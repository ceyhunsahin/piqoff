/*! For license information please see 4643.index.js.LICENSE.txt */
"use strict";(self.webpackChunkwww=self.webpackChunkwww||[]).push([[4643],{90428:(t,e,n)=>{n.d(e,{ZP:()=>E});var i=n(15671),a=n(43144),o=n(97326),s=n(60136),l=n(82963),r=n(61120),c=n(67294),u=n(14140),d=n.n(u),p=n(20819),h=n(30381),m=n.n(h);var E=function(t){(0,s.Z)(p,t);var e,n,u=(e=p,n=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}(),function(){var t,i=(0,r.Z)(e);if(n){var a=(0,r.Z)(this).constructor;t=Reflect.construct(i,arguments,a)}else t=i.apply(this,arguments);return(0,l.Z)(this,t)});function p(t){var e;return(0,i.Z)(this,p),(e=u.call(this,t)).state.value=void 0===t.param?new Date(0):new Date(t.param.getValue().toString()),e.state.title=void 0===t.title?"":t.title,e.state.titleAlign=void 0===t.titleAlign?"left":t.titleAlign,e.state.showClearButton=void 0!==t.showClearButton&&t.showClearButton,e.state.type=void 0===t.type?"date":t.type,e.state.editorOptions=void 0===t.editorOptions?void 0:t.editorOptions,e._onValueChanged=e._onValueChanged.bind((0,o.Z)(e)),e._onEnterKey=e._onEnterKey.bind((0,o.Z)(e)),e}return(0,a.Z)(p,[{key:"_onValueChanged",value:function(t){this.value=t.value,void 0!==this.props.onValueChanged&&this.props.onValueChanged()}},{key:"_onEnterKey",value:function(){void 0!==this.props.onEnterKey&&this.props.onEnterKey()}},{key:"_dateView",value:function(){return c.createElement(d(),{id:this.props.id,showClearButton:this.state.showClearButton,height:"fit-content",valueChangeEvent:"keyup",value:"1970-01-01"==m()(this.state.value).format("YYYY-MM-DD")?null:m()(this.state.value),disabled:this.state.editable,type:this.state.type,dateSerializationFormat:"yyyy-MM-dd",editorOptions:this.state.editorOptions,onEnterKey:this._onEnterKey,onValueChanged:this._onValueChanged},this.props.children,this.validationView())}},{key:"value",get:function(){return null==this.state.value?new Date(0):this.state.value},set:function(t){var e=this;if(void 0!==t&&null!=t||(t="1970-01-01"),void 0!==this.props.dt&&void 0!==this.props.dt.data&&this.props.dt.data.length>0&&void 0!==this.props.dt.field)if(void 0===this.props.dt.filter)void 0!==this.props.dt.row&&void 0!==this.props.dt.data.find((function(t){return t===e.props.dt.row}))?this.props.dt.data.find((function(t){return t===e.props.dt.row}))[this.props.dt.field]=t:this.props.dt.data[this.props.dt.data.length-1][this.props.dt.field]=t;else{var n=this.props.dt.data.where(this.props.dt.filter);n.length>0&&(void 0!==this.props.dt.row&&void 0!==n.find((function(t){return t===e.props.dt.row}))?n.find((function(t){return t===e.props.dt.row}))[this.props.dt.field]=t:n[n.length-1][this.props.dt.field]=t)}this.setState({value:t})}},{key:"render",value:function(){return 0==this.state.visible?c.createElement("div",null):void 0!==this.props.simple&&this.props.simple?this._dateView():void 0===this.state.title?c.createElement("div",{className:"dx-field"},this._dateView()):void 0===this.state.titleAlign?c.createElement("div",{className:"dx-field"},c.createElement("div",{className:"dx-field-label",style:{textAlign:"right"}},this.state.title),this._dateView()):"top"==this.state.titleAlign?c.createElement("div",{className:"dx-field"},c.createElement("div",null,this.state.title),this._dateView()):"bottom"==this.state.titleAlign?c.createElement("div",{className:"dx-field"},this._dateView(),c.createElement("div",null,this.state.option.title)):"left"==this.state.titleAlign?c.createElement("div",{className:"dx-field"},c.createElement("div",{className:"dx-field-label",style:{textAlign:"right"}},this.state.title),this._dateView()):"right"==this.state.titleAlign?c.createElement("div",{className:"dx-field"},this._dateView(),c.createElement("div",{className:"dx-field-label",style:{float:"right",paddingLeft:"15px"}},this.state.title)):void 0}}]),p}(p.ZP)},40185:(t,e,n)=>{n.d(e,{Z:()=>f});var i=n(15861),a=n(15671),o=n(43144),s=n(97326),l=n(60136),r=n(82963),c=n(61120),u=n(64687),d=n.n(u),p=n(67294),h=n(20819),m=n(93730),E=n.n(m);var f=function(t){(0,l.Z)(m,t);var e,n,u,h=(n=m,u=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}(),function(){var t,e=(0,c.Z)(n);if(u){var i=(0,c.Z)(this).constructor;t=Reflect.construct(e,arguments,i)}else t=e.apply(this,arguments);return(0,r.Z)(this,t)});function m(t){var e;return(0,a.Z)(this,m),(e=h.call(this,t)).state.value=void 0===t.value?[]:t.value,e._onValueChanged=e._onValueChanged.bind((0,s.Z)(e)),e}return(0,o.Z)(m,[{key:"_onValueChanged",value:function(t){this.value=t.value,void 0!==this.props.onValueChanged&&this.props.onValueChanged(t)}},{key:"_dropDownView",value:function(){return p.createElement(E(),{value:this.state.value,valueExpr:this.props.valueExpr,displayExpr:this.props.displayExpr,placeholder:this.props.placeholder,showClearButton:this.props.showClearButton,dataSource:void 0===this.state.data?void 0:this.state.data.store,onValueChanged:this._onValueChanged,contentRender:this.props.contentRender})}},{key:"value",get:function(){return this.state.value},set:function(t){this.setState({value:t})}},{key:"componentDidMount",value:(e=(0,i.Z)(d().mark((function t(){return d().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(void 0===this.state.data){t.next=3;break}return t.next=3,this.dataRefresh(this.state.data);case 3:case"end":return t.stop()}}),t,this)}))),function(){return e.apply(this,arguments)})},{key:"componentWillReceiveProps",value:function(t){this.setState({value:t.value})}},{key:"render",value:function(){return void 0!==this.props.simple&&this.props.simple?this._dropDownView():p.createElement("div",{className:"dx-field"},p.createElement("div",{className:"dx-field-label"},void 0===this.props.title?"":this.props.title),p.createElement("div",{className:"dx-field-value"},this._dropDownView()))}}]),m}(h.ZP)},71518:(t,e,n)=>{n.d(e,{Z:()=>f});var i=n(15861),a=n(15671),o=n(43144),s=n(97326),l=n(60136),r=n(82963),c=n(61120),u=n(64687),d=n.n(u),p=n(67294),h=n(20819),m=n(33522),E=n.n(m);var f=function(t){(0,l.Z)(m,t);var e,n,u,h=(n=m,u=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}(),function(){var t,e=(0,c.Z)(n);if(u){var i=(0,c.Z)(this).constructor;t=Reflect.construct(e,arguments,i)}else t=e.apply(this,arguments);return(0,r.Z)(this,t)});function m(t){var e;return(0,a.Z)(this,m),(e=h.call(this,t)).state.value=void 0===t.value?[]:t.value,e._onOptionChanged=e._onOptionChanged.bind((0,s.Z)(e)),e._onItemDeleting=e._onItemDeleting.bind((0,s.Z)(e)),e._onItemDeleted=e._onItemDeleted.bind((0,s.Z)(e)),e}return(0,o.Z)(m,[{key:"_onOptionChanged",value:function(t){"selectedItemKeys"==t.name&&(this.value=t.value),void 0!==this.props.onOptionChanged&&this.props.onOptionChanged(t)}},{key:"_onItemDeleting",value:function(t){void 0!==this.props.onItemDeleting&&this.props.onItemDeleting(t)}},{key:"_onItemDeleted",value:function(t){void 0!==this.props.onItemDeleted&&this.props.onItemDeleted(t)}},{key:"componentDidMount",value:(e=(0,i.Z)(d().mark((function t(){return d().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(void 0===this.state.data){t.next=3;break}return t.next=3,this.dataRefresh(this.state.data);case 3:case"end":return t.stop()}}),t,this)}))),function(){return e.apply(this,arguments)})},{key:"value",get:function(){return this.state.value},set:function(t){this.setState({value:t})}},{key:"render",value:function(){return p.createElement(E(),{dataSource:void 0===this.state.data?void 0:this.state.data.store,allowItemDeleting:this.props.allowItemDeleting,itemDeleteMode:this.props.itemDeleteMode,itemRender:this.props.itemRender,collapsibleGroups:this.props.collapsibleGroups,grouped:this.props.grouped,groupRender:this.props.groupRender,groupTemplate:this.props.groupTemplate,width:this.props.width,height:this.props.height,displayExpr:this.props.displayExpr,keyExpr:this.props.keyExpr,showSelectionControls:this.props.showSelectionControls,selectionMode:this.props.selectionMode,selectAllMode:this.props.selectAllMode,selectedItemKeys:this.state.value,onOptionChanged:this._onOptionChanged,onItemDeleting:this._onItemDeleting,onItemDeleted:this._onItemDeleted})}}]),m}(h.ZP)},5083:(t,e,n)=>{n.d(e,{ZP:()=>p});var i=n(15671),a=n(43144),o=n(97326),s=n(60136),l=n(82963),r=n(61120),c=n(67294),u=n(67497),d=n(20819);n(17276);var p=function(t){(0,s.Z)(p,t);var e,n,d=(e=p,n=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}(),function(){var t,i=(0,r.Z)(e);if(n){var a=(0,r.Z)(this).constructor;t=Reflect.construct(i,arguments,a)}else t=i.apply(this,arguments);return(0,l.Z)(this,t)});function p(t){var e;return(0,i.Z)(this,p),(e=d.call(this,t)).dev=null,e.state.value=void 0!==t.value?t.value:0,e.state.title=void 0===t.title?"":t.title,e.state.titleAlign=void 0===t.titleAlign?"left":t.titleAlign,e.state.showClearButton=void 0!==t.showClearButton&&t.showClearButton,e.state.readOnly=void 0!==t.readOnly&&t.readOnly,e._onInitialized=e._onInitialized.bind((0,o.Z)(e)),e._onValueChanged=e._onValueChanged.bind((0,o.Z)(e)),e._onEnterKey=e._onEnterKey.bind((0,o.Z)(e)),e._onFocusIn=e._onFocusIn.bind((0,o.Z)(e)),e._onFocusOut=e._onFocusOut.bind((0,o.Z)(e)),e._onChange=e._onChange.bind((0,o.Z)(e)),e}return(0,a.Z)(p,[{key:"_onInitialized",value:function(t){this.dev=t.component}},{key:"_onValueChanged",value:function(t){this.value=t.value,void 0!==this.props.onValueChanged&&this.props.onValueChanged(t)}},{key:"_onEnterKey",value:function(){void 0!==this.props.onEnterKey&&this.props.onEnterKey()}},{key:"_onFocusIn",value:function(t){void 0!==this.props.selectAll&&1!=this.props.selectAll||this.dev.element().getElementsByTagName("input")[0].select(),void 0!==this.props.onFocusIn&&this.props.onFocusIn(t)}},{key:"_onFocusOut",value:function(){void 0!==this.props.onFocusOut&&this.props.onFocusOut()}},{key:"_onChange",value:function(){void 0!==this.props.onChange&&this.props.onChange()}},{key:"_txtView",value:function(){return c.createElement(u.NumberBox,{showClearButton:this.state.showClearButton,height:"fit-content",elementAttr:this.props.elementAttr,style:this.props.style,valueChangeEvent:"keyup",onValueChanged:this._onValueChanged,onEnterKey:this._onEnterKey,onFocusIn:this._onFocusIn,onFocusOut:this._onFocusOut,onChange:this._onChange,value:this.state.value,readOnly:this.state.readOnly,onInitialized:this._onInitialized,disabled:void 0===this.props.editable?this.state.editable:this.props.editable,showSpinButtons:this.props.showSpinButtons,step:this.props.step,format:this.props.format},this.props.children,this.validationView())}},{key:"value",get:function(){return this.state.value},set:function(t){var e=this;if(void 0!==t){if(void 0!==this.props.dt&&void 0!==this.props.dt.data&&this.props.dt.data.length>0&&void 0!==this.props.dt.field)if(void 0===this.props.dt.filter)void 0!==this.props.dt.row&&void 0!==this.props.dt.data.find((function(t){return t===e.props.dt.row}))?this.props.dt.data.find((function(t){return t===e.props.dt.row}))[this.props.dt.field]=t:this.props.dt.data[this.props.dt.data.length-1][this.props.dt.field]=t;else{var n=this.props.dt.data.where(this.props.dt.filter);n.length>0&&(void 0!==this.props.dt.row&&void 0!==n.find((function(t){return t===e.props.dt.row}))?n.find((function(t){return t===e.props.dt.row}))[this.props.dt.field]=t:n[n.length-1][this.props.dt.field]=t)}this.setState({value:t})}}},{key:"readOnly",get:function(){return this.state.readOnly},set:function(t){this.setState({readOnly:t})}},{key:"focus",value:function(){this.dev.focus()}},{key:"render",value:function(){return 0==this.state.visible?c.createElement("div",null):void 0!==this.props.simple&&this.props.simple?this._txtView():""==this.state.title?c.createElement("div",{className:"dx-field"},this._txtView()):void 0===this.state.titleAlign?c.createElement("div",{className:"dx-field"},c.createElement("div",{className:"dx-field-label",style:{textAlign:"right"}},this.state.title),this._txtView()):"top"==this.state.titleAlign?c.createElement("div",{className:"dx-field"},c.createElement("div",null,this.state.title),this._txtView()):"bottom"==this.state.titleAlign?c.createElement("div",{className:"dx-field"},this._txtView(),c.createElement("div",null,this.state.option.title)):"left"==this.state.titleAlign?c.createElement("div",{className:"dx-field"},c.createElement("div",{className:"dx-field-label",style:{textAlign:"right"}},this.state.title),this._txtView()):"right"==this.state.titleAlign?c.createElement("div",{className:"dx-field"},this._txtView(),c.createElement("div",{className:"dx-field-label",style:{float:"right",paddingLeft:"15px"}},this.state.title)):void 0}}]),p}(d.ZP)},94643:(t,e,n)=>{n.r(e),n.d(e,{default:()=>Y});var i=n(4942),a=n(15861),o=n(15671),s=n(43144),l=n(97326),r=n(60136),c=n(82963),u=n(61120),d=n(64687),p=n.n(d),h=n(67294),m=n(73364),E=n(30381),f=n.n(E),v=n(53221),y=n.n(v),T=n(25552),g=n.n(T),C=n(42866),P=n.n(C),A=n(18405),O=n(99846),b=n(99077),S=n(5083),D=(n(40185),n(71518),n(32175)),N=n(73682),_=n(55585),w=n(90428),I=n(34514);var R=function(t){(0,r.Z)(a,t);var e,n,i=(e=a,n=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}(),function(){var t,i=(0,u.Z)(e);if(n){var a=(0,u.Z)(this).constructor;t=Reflect.construct(i,arguments,a)}else t=i.apply(this,arguments);return(0,c.Z)(this,t)});function a(t){var e;(0,o.Z)(this,a);var n=[];if(void 0!==(e=i.call(this,t)).props.button)for(var s=0;s<e.props.button.length;s++)n.push("-outline");return e.state={btnClass:n,value:0,vertical:void 0===e.props.vertical||e.props.vertical},e._onClick=e._onClick.bind((0,l.Z)(e)),e}return(0,s.Z)(a,[{key:"value",get:function(){return this.state.value},set:function(t){for(var e=0;e<this.state.btnClass.length;e++)this.state.btnClass[e]="-outline";this.state.btnClass[t]="",this.setState({btnClass:this.state.btnClass,value:t})}},{key:"_onClick",value:function(t){void 0!==this.props.onClick&&this.props.onClick(t)}},{key:"_buttonView",value:function(){var t=this;if(void 0!==this.props.button){for(var e=[],n=function(n){var i="btn btn-block btn"+t.state.btnClass[n]+"-primary";e.push(h.createElement("button",{className:i,key:t.props.button[n].id,id:t.props.button[n].id,style:t.props.button[n].style,onClick:function(){for(var e=0;e<t.state.btnClass.length;e++)t.state.btnClass[e]="-outline";t.state.btnClass[n]="",t.setState({btnClass:t.state.btnClass,value:n}),t._onClick(n)}},function(t){if(void 0!==t)return t="fa-solid "+t,h.createElement("div",{className:"row"},h.createElement("div",{className:"col-12"},h.createElement("i",{className:t,style:{fontSize:"20px"}})))}(t.props.button[n].icon),function(t){if(void 0!==t)return h.createElement("div",{className:"row"},h.createElement("div",{className:"col-12"},h.createElement("span",null,t)))}(t.props.button[n].text)))},i=0;i<this.props.button.length;i++)n(i);return e}}},{key:"render",value:function(){return h.createElement("div",{className:"row"},h.createElement("div",{className:"col-12 pe-1"},h.createElement("div",{className:"btn-group"+(1==this.state.vertical?"-vertical":""),style:{width:"100%"}},this._buttonView())))}}]),a}(I.Z);var x=function(t){(0,r.Z)(a,t);var e,n,i=(e=a,n=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}(),function(){var t,i=(0,u.Z)(e);if(n){var a=(0,u.Z)(this).constructor;t=Reflect.construct(i,arguments,a)}else t=i.apply(this,arguments);return(0,c.Z)(this,t)});function a(t){var e;return(0,o.Z)(this,a),(e=i.call(this,t)).state.value=void 0===t.value?"":t.value,e.state.text=void 0===t.value?"":t.value,e}return(0,s.Z)(a,[{key:"value",get:function(){return this.state.value},set:function(t){void 0===this.props.format||"currency"!=this.props.format?this.setState({value:t.toString(),text:t.toString()}):this.setState({value:t.toString(),text:Number(t).currency()})}},{key:"render",value:function(){return this.state.text}}]),a}(I.Z),M=n(417),L=n(9125),U=n(60547),k=n(17276),V=n(57812);function F(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);e&&(i=i.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,i)}return n}function Z(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?F(Object(n),!0).forEach((function(e){(0,i.Z)(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):F(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}var Y=function(t){(0,r.Z)(I,t);var e,n,i,d,E,C=(d=I,E=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}(),function(){var t,e=(0,u.Z)(d);if(E){var n=(0,u.Z)(this).constructor;t=Reflect.construct(e,arguments,n)}else t=e.apply(this,arguments);return(0,c.Z)(this,t)});function I(t){var e;return(0,o.Z)(this,I),(e=C.call(this,t)).core=m.Z.instance.core,e.groupList=[],e._btnGetClick=e._btnGetClick.bind((0,l.Z)(e)),e.btnGetDetail=e.btnGetDetail.bind((0,l.Z)(e)),e.lastPosSaleDt=new k.$A,e.lastPosPayDt=new k.$A,e.state={ticketId:""},Number.money=e.sysParam.filter({ID:"MoneySymbol",TYPE:0}).getValue(),e.tabIndex=t.data.tabkey,e}return(0,s.Z)(I,[{key:"componentDidMount",value:function(){var t=this;setTimeout((0,a.Z)(p().mark((function e(){return p().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t.Init();case 1:case"end":return e.stop()}}),e)}))),1e3)}},{key:"Init",value:(i=(0,a.Z)(p().mark((function t(){var e;return p().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return this.dtFirst.value=f()(new Date).format("YYYY-MM-DD"),this.dtLast.value=f()(new Date).format("YYYY-MM-DD"),this.txtCustomerCode.CODE="",this.txtPayChangeDesc.value=this.t("txtPayChangeDesc"),e={source:{groupBy:this.groupList,select:{query:"SELECT *,CONVERT(NVARCHAR,DOC_DATE,104) AS DATE,SUBSTRING(CONVERT(NVARCHAR(50),GUID),20,25) AS TICKET_ID FROM POS_VW_01 WHERE STATUS = 0 ORDER BY DOC_DATE"},sql:this.core.sql}},t.next=7,this.grdOpenTike.dataRefresh(e);case 7:console.log(this.grdOpenTike),this.grdOpenTike.data.datatable.length>0&&(console.log(1321),this.popOpenTike.show());case 9:case"end":return t.stop()}}),t,this)}))),function(){return i.apply(this,arguments)})},{key:"_btnGetClick",value:(n=(0,a.Z)(p().mark((function t(){var e;return p().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return e={source:{groupBy:this.groupList,select:{query:"SELECT  MAX(ITEM_CODE) AS ITEM_CODE,   MAX(ITEM_NAME) AS ITEM_NAME,   MAX(TIME) AS TIME,   MAX(DATE) AS DATE,   MAX(DEVICE) AS DEVICE,   MAX(USERS) AS USERS,  SUBSTRING(CONVERT(NVARCHAR(50),SALE_POS_GUID),20,25) AS POS_ID,  SALE_POS_GUID AS POS_GUID,  MAX(SALE_TYPE) AS SALE_TYPE,   COUNT(PAYMENT_TYPE) AS PAY_COUNT,   MAX(CUSTOMER) AS CUSTOMER,   MAX(DISCOUNT) AS DISCOUNT,   MAX(LOYALTY) AS LOYALTY,   MAX(HT) AS HT,   MAX(TVA) AS TVA,   MAX(TTC) AS TTC,   MAX(CUSTOMER_NAME) AS CUSTOMER_NAME,   MAX(PAYMENT_TYPE) AS PAYMENT_TYPE,   MAX(PAYMENT) AS PAYMENT   FROM (   SELECT  SALE.POS_GUID AS SALE_POS_GUID, PAYMENT.POS_GUID AS PAYMENT_POS_GUID,  MAX(SALE.ITEM_CODE) AS ITEM_CODE,   MAX(SALE.ITEM_NAME) AS ITEM_NAME,   CONVERT(NVARCHAR,MAX(SALE.CDATE),101) AS DATE,    CONVERT(NVARCHAR,MAX(SALE.CDATE),108) AS TIME,    MAX(SALE.DEVICE) AS DEVICE,   ISNULL((SELECT NAME FROM USERS WHERE CODE = MAX(SALE.LUSER)),'') AS USERS,   SALE.TYPE AS SALE_TYPE,   PAYMENT.TYPE AS PAYMENT_TYPE,   PAYMENT.PAY_TYPE_NAME AS PAY_TYPE_NAME,  MAX(SALE.CUSTOMER_CODE) AS CUSTOMER,   MAX(SALE.GRAND_DISCOUNT) DISCOUNT,   MAX(SALE.GRAND_LOYALTY) LOYALTY,   MAX(SALE.GRAND_AMOUNT) HT,  MAX(SALE.GRAND_VAT) TVA,  MAX(SALE.GRAND_TOTAL) TTC,   MAX(SALE.CUSTOMER_NAME) AS CUSTOMER_NAME,   (SELECT SUM(AMOUNT) FROM [POS_PAYMENT_VW_01] AS PAY WHERE PAY.POS_GUID = SALE.POS_GUID ) AS PAYMENT    FROM [dbo].[POS_SALE_VW_01] AS SALE   INNER JOIN [dbo].[POS_PAYMENT_VW_01] AS PAYMENT ON   PAYMENT.POS_GUID = SALE.POS_GUID AND PAYMENT.STATUS = 1   WHERE SALE.DOC_DATE >= @FIRST_DATE AND SALE.DOC_DATE <= @LAST_DATE AND    ((SALE.CUSTOMER_CODE = @CUSTOMER_CODE) OR (@CUSTOMER_CODE = '')) AND   ((SALE.DEVICE = @DEVICE) OR (@DEVICE = '')) AND   ((PAYMENT.PAY_TYPE = @PAY_TYPE) OR (@PAY_TYPE = -1)) AND  ((ITEM_CODE = @ITEM_CODE OR SALE.INPUT =  @ITEM_CODE) OR (@ITEM_CODE = '')) AND  ((SUBSTRING(CONVERT(NVARCHAR(50),SALE.POS_GUID),20,25) = @TICKET_ID) OR (@TICKET_ID = '')) AND  ((SALE.LUSER = @LUSER) OR (@LUSER = '')) AND SALE.STATUS = 1   GROUP BY SALE.TYPE,PAYMENT.TYPE,PAYMENT.PAY_TYPE_NAME,PAYMENT.POS_GUID,SALE.POS_GUID) AS TMP   GROUP BY SALE_POS_GUID,PAYMENT_POS_GUID HAVING COUNT(PAYMENT_TYPE) >= @PAY_COUNT AND  ((MAX(TTC) >= @FIRST_AMOUNT) OR (@FIRST_AMOUNT = 0)) AND ((MAX(TTC) <= @LAST_AMOUNT) OR (@LAST_AMOUNT = 0)) ",param:["FIRST_DATE:date","LAST_DATE:date","CUSTOMER_CODE:string|50","DEVICE:string|25","PAY_TYPE:int","ITEM_CODE:string|50","TICKET_ID:string|50","LUSER:string|50","PAY_COUNT:string|50","FIRST_AMOUNT:float","LAST_AMOUNT:float"],value:[this.dtFirst.value,this.dtLast.value,this.txtCustomerCode.value,this.cmbDevice.value,this.cmbPayType.value,this.txtItem.value,this.txtTicketno.value,this.cmbUser.value,this.ckhDoublePay.value?2:1,this.numFirstTicketAmount.value,this.numLastTicketAmount.value]},sql:this.core.sql}},t.next=3,this.grdSaleTicketReport.dataRefresh(e);case 3:case"end":return t.stop()}}),t,this)}))),function(){return n.apply(this,arguments)})},{key:"btnGetDetail",value:(e=(0,a.Z)(p().mark((function t(e){return p().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return this.lastPosSaleDt.selectCmd={query:"SELECT * FROM POS_SALE_VW_01  WHERE POS_GUID = @POS_GUID ",param:["POS_GUID:string|50"],value:[e]},t.next=3,this.lastPosSaleDt.refresh();case 3:return t.next=5,this.grdSaleTicketItems.dataRefresh({source:this.lastPosSaleDt});case 5:return this.lastPosPayDt.selectCmd={query:"SELECT (AMOUNT-CHANGE) AS LINE_TOTAL,* FROM POS_PAYMENT_VW_01  WHERE POS_GUID = @POS_GUID ",param:["POS_GUID:string|50"],value:[e]},this.lastPosPayDt.insertCmd={query:"EXEC [dbo].[PRD_POS_PAYMENT_INSERT] @GUID = @PGUID, @CUSER = @PCUSER, @POS = @PPOS, @TYPE = @PTYPE, @LINE_NO = @PLINE_NO, @AMOUNT = @PAMOUNT, @CHANGE = @PCHANGE ",param:["PGUID:string|50","PCUSER:string|25","PPOS:string|50","PTYPE:int","PLINE_NO:int","PAMOUNT:float","PCHANGE:float"],dataprm:["GUID","CUSER","POS_GUID","PAY_TYPE","LINE_NO","AMOUNT","CHANGE"]},this.lastPosPayDt.updateCmd={query:"EXEC [dbo].[PRD_POS_PAYMENT_UPDATE] @GUID = @PGUID, @CUSER = @PCUSER, @POS = @PPOS, @TYPE = @PTYPE, @LINE_NO = @PLINE_NO, @AMOUNT = @PAMOUNT, @CHANGE = @PCHANGE ",param:["PGUID:string|50","PCUSER:string|25","PPOS:string|50","PTYPE:int","PLINE_NO:int","PAMOUNT:float","PCHANGE:float"],dataprm:["GUID","CUSER","POS_GUID","PAY_TYPE","LINE_NO","AMOUNT","CHANGE"]},this.lastPosPayDt.deleteCmd={query:"EXEC [dbo].[PRD_POS_PAYMENT_DELETE] @CUSER = @PCUSER, @UPDATE = 1, @GUID = @PGUID, @POS_GUID = @PPOS_GUID ",param:["PCUSER:string|25","PGUID:string|50","PPOS_GUID:string|50"],dataprm:["CUSER","GUID","POS_GUID"]},t.next=11,this.lastPosPayDt.refresh();case 11:return t.next=13,this.grdSaleTicketPays.dataRefresh({source:this.lastPosPayDt});case 13:return t.next=15,this.grdLastTotalPay.dataRefresh({source:this.lastPosPayDt});case 15:this.popDetail.show();case 16:case"end":return t.stop()}}),t,this)}))),function(t){return e.apply(this,arguments)})},{key:"render",value:function(){var t,e=this;return h.createElement("div",null,h.createElement(P(),null,h.createElement("div",{className:"row px-2 pt-2"},h.createElement("div",{className:"col-12"},h.createElement(y(),null,h.createElement(v.Item,{location:"after",locateInMenu:"auto",widget:"dxButton",options:{type:"default",icon:"clear",onClick:(t=(0,a.Z)(p().mark((function t(){var n;return p().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n={id:"msgClose",showTitle:!0,title:e.lang.t("msgWarning"),showCloseButton:!0,width:"500px",height:"200px",button:[{id:"btn01",caption:e.lang.t("btnYes"),location:"before"},{id:"btn02",caption:e.lang.t("btnNo"),location:"after"}],content:h.createElement("div",{style:{textAlign:"center",fontSize:"20px"}},e.lang.t("msgClose"))},t.next=3,(0,U.W)(n);case 3:"btn01"==t.sent&&m.Z.instance.panel.closePage();case 5:case"end":return t.stop()}}),t)}))),function(){return t.apply(this,arguments)})}})))),h.createElement("div",{className:"row px-2 pt-2"},h.createElement("div",{className:"col-12"},h.createElement(g(),{colCount:4,id:"frmCriter"},h.createElement(v.Item,null,h.createElement(T.Label,{text:this.t("dtFirst"),alignment:"right"}),h.createElement(w.ZP,{simple:!0,parent:this,id:"dtFirst"})),h.createElement(v.Item,null,h.createElement(T.Label,{text:this.t("dtLast"),alignment:"right"}),h.createElement(w.ZP,{simple:!0,parent:this,id:"dtLast"})),h.createElement(v.Item,null,h.createElement(T.Label,{text:this.t("txtCustomerCode"),alignment:"right"}),h.createElement(O.ZP,{id:"txtCustomerCode",parent:this,simple:!0,upper:this.sysParam.filter({ID:"onlyBigChar",USERS:this.user.CODE}).getValue().value,button:[{id:"01",icon:"more",onClick:function(){e.pg_txtCustomerCode.show(),e.pg_txtCustomerCode.onClick=function(t){t.length>0&&e.txtCustomerCode.setState({value:t[0].CODE})}}}],onEnterKey:(0,a.Z)(p().mark((function t(){return p().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.pg_txtCustomerCode.setVal(e.txtCustomerCode.value);case 2:e.pg_txtCustomerCode.show(),e.pg_txtCustomerCode.onClick=function(t){t.length>0&&(e.txtCustomerCode.setState({value:t[0].CODE}),e.txtCustomerName.setState({value:t[0].TITLE}),e._btnGetClick())};case 4:case"end":return t.stop()}}),t)}))).bind(this)}),h.createElement(M.Z,{id:"pg_txtCustomerCode",parent:this,container:"#root",visible:!1,position:{of:"#root"},showTitle:!0,showBorders:!0,width:"90%",height:"90%",title:this.t("pg_txtCustomerCode.title"),search:!0,data:{source:{select:{query:"SELECT GUID,CODE,TITLE,NAME,LAST_NAME,[TYPE_NAME],[GENUS_NAME] FROM CUSTOMER_VW_01 WHERE UPPER(CODE) LIKE UPPER(@VAL) OR UPPER(TITLE) LIKE UPPER(@VAL)",param:["VAL:string|50"]},sql:this.core.sql}},button:{id:"01",icon:"more",onClick:function(){console.log(1111)}}},h.createElement(A.sg,{dataField:"CODE",caption:this.t("pg_txtCustomerCode.clmCode"),width:150}),h.createElement(A.sg,{dataField:"TITLE",caption:this.t("pg_txtCustomerCode.clmTitle"),width:500,defaultSortOrder:"asc"}),h.createElement(A.sg,{dataField:"TYPE_NAME",caption:this.t("pg_txtCustomerCode.clmTypeName"),width:150}),h.createElement(A.sg,{dataField:"GENUS_NAME",caption:this.t("pg_txtCustomerCode.clmGenusName"),width:150}))),h.createElement(v.Item,null,h.createElement(T.Label,{text:this.t("cmbDevice"),alignment:"right"}),h.createElement(b.ZP,{simple:!0,parent:this,id:"cmbDevice",displayExpr:"DISPLAY",valueExpr:"CODE",showClearButton:!0,notRefresh:!0,data:{source:{select:{query:"SELECT CODE + '-' + NAME AS DISPLAY,CODE,NAME FROM POS_DEVICE_VW_01 ORDER BY CODE ASC"},sql:this.core.sql}},param:this.param.filter({ELEMENT:"cmbDevice",USERS:this.user.CODE}),access:this.access.filter({ELEMENT:"cmbDevice",USERS:this.user.CODE})})),h.createElement(v.Item,null,h.createElement(T.Label,{text:this.t("numFirstTicketAmount"),alignment:"right"}),h.createElement(S.ZP,{id:"numFirstTicketAmount",title:this.t("numFirstTicketAmount"),parent:this,simple:!0,tabIndex:this.tabIndex,style:{borderTopLeftRadius:"0px",borderBottomLeftRadius:"0px"},param:this.param.filter({ELEMENT:"numFirstTicketAmount",USERS:this.user.CODE}),access:this.access.filter({ELEMENT:"numFirstTicketAmount",USERS:this.user.CODE}),onChange:function(t){null==e.numFirstTicketAmount.value&&(e.numFirstTicketAmount.value=0)},onValueChanged:function(t){null!=t.value&&(e.numLastTicketAmount.value=t.value)}})),h.createElement(v.Item,null,h.createElement(T.Label,{text:this.t("numLastTicketAmount"),alignment:"right"}),h.createElement(S.ZP,{id:"numLastTicketAmount",title:this.t("numLastTicketAmount"),parent:this,simple:!0,tabIndex:this.tabIndex,style:{borderTopLeftRadius:"0px",borderBottomLeftRadius:"0px"},param:this.param.filter({ELEMENT:"numLastTicketAmount",USERS:this.user.CODE}),access:this.access.filter({ELEMENT:"numLastTicketAmount",USERS:this.user.CODE}),onChange:function(t){null==e.numLastTicketAmount.value&&(e.numLastTicketAmount.value=e.numFirstTicketAmount.value)}})),h.createElement(v.Item,null,h.createElement(T.Label,{text:this.t("cmbPayType.title"),alignment:"right"}),h.createElement(b.ZP,{simple:!0,parent:this,id:"cmbPayType",displayExpr:"VALUE",valueExpr:"ID",value:-1,data:{source:[{ID:-1,VALUE:this.t("cmbPayType.all")},{ID:0,VALUE:this.t("cmbPayType.esc")},{ID:1,VALUE:this.t("cmbPayType.cb")},{ID:2,VALUE:this.t("cmbPayType.check")},{ID:3,VALUE:this.t("cmbPayType.ticket")},{ID:4,VALUE:this.t("cmbPayType.bonD")},{ID:5,VALUE:this.t("cmbPayType.avoir")},{ID:6,VALUE:this.t("cmbPayType.virment")},{ID:7,VALUE:this.t("cmbPayType.prlv")}]},param:this.param.filter({ELEMENT:"cmbPayType",USERS:this.user.CODE}),access:this.access.filter({ELEMENT:"cmbPayType",USERS:this.user.CODE})})),h.createElement(v.Item,null,h.createElement(T.Label,{text:this.t("cmbUser"),alignment:"right"}),h.createElement(b.ZP,{simple:!0,parent:this,id:"cmbUser",displayExpr:"NAME",valueExpr:"CODE",showClearButton:!0,data:{source:{select:{query:"SELECT CODE,NAME FROM USERS"},sql:this.core.sql}},param:this.param.filter({ELEMENT:"cmbUser",USERS:this.user.CODE}),access:this.access.filter({ELEMENT:"cmbUser",USERS:this.user.CODE})})),h.createElement(v.Item,null,h.createElement(T.Label,{text:this.t("txtTicketno"),alignment:"right"}),h.createElement(O.ZP,{id:"txtTicketno",title:this.t("txtTicketno"),parent:this,simple:!0,param:this.param.filter({ELEMENT:"txtTicketno",USERS:this.user.CODE}),access:this.access.filter({ELEMENT:"txtTicketno",USERS:this.user.CODE}),onValueChanged:function(t){}})),h.createElement(v.Item,null,h.createElement(T.Label,{text:this.t("txtItem"),alignment:"right"}),h.createElement(O.ZP,{id:"txtItem",parent:this,simple:!0,tabIndex:this.tabIndex,upper:this.sysParam.filter({ID:"onlyBigChar",USERS:this.user.CODE}).getValue().value,showClearButton:!0,button:[{id:"01",icon:"more",onClick:function(){e.pg_txtItem.show(),e.pg_txtItem.onClick=function(t){e.txtItem.setState({value:t[0].CODE})}}}],param:this.param.filter({ELEMENT:"txtItem",USERS:this.user.CODE}),access:this.access.filter({ELEMENT:"txtItem",USERS:this.user.CODE}),selectAll:!0}),h.createElement(M.Z,{id:"pg_txtItem",parent:this,container:"#root",visible:!1,position:{of:"#root"},showTitle:!0,showBorders:!0,width:"90%",height:"90%",title:this.t("pg_txtItem.title"),search:!0,selection:{mode:"single"},data:{source:{select:{query:"SELECT GUID,CODE,NAME FROM ITEMS_VW_01 WHERE UPPER(CODE) LIKE UPPER(@VAL) OR UPPER(NAME) LIKE UPPER(@VAL)",param:["VAL:string|50"]},sql:this.core.sql}},button:[{id:"tst",icon:"more",onClick:function(){}}]},h.createElement(A.sg,{dataField:"CODE",caption:this.t("pg_txtItem.clmCode"),width:150}),h.createElement(A.sg,{dataField:"NAME",caption:this.t("pg_txtItem.clmName"),width:650,defaultSortOrder:"asc"}))),h.createElement(v.Item,null,h.createElement(T.Label,{text:this.t("ckhDoublePay"),alignment:"right"}),h.createElement(_.ZP,{id:"ckhDoublePay",parent:this,defaultValue:!1,param:this.param.filter({ELEMENT:"ckhDoublePay",USERS:this.user.CODE}),access:this.access.filter({ELEMENT:"ckhDoublePay",USERS:this.user.CODE})}))))),h.createElement("div",{className:"row px-2 pt-2"},h.createElement("div",{className:"col-3"}),h.createElement("div",{className:"col-3"}),h.createElement("div",{className:"col-3"}),h.createElement("div",{className:"col-3"},h.createElement(N.Z,{text:this.t("btnGet"),type:"success",width:"100%",onClick:this._btnGetClick}))),h.createElement("div",{className:"row px-2 pt-2"},h.createElement("div",{className:"col-12"},h.createElement(A.ZP,{id:"grdSaleTicketReport",parent:this,selection:{mode:"multiple"},showBorders:!0,filterRow:{visible:!0},headerFilter:{visible:!0},sorting:{mode:"single"},height:600,columnAutoWidth:!0,allowColumnReordering:!0,allowColumnResizing:!0,onRowDblClick:function(){var t=(0,a.Z)(p().mark((function t(n){return p().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:e.btnGetDetail(n.data.POS_GUID),e.setState({ticketId:n.data.POS_ID});case 2:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()},h.createElement(A.PY,{mode:"virtual"}),h.createElement(A.D7,{fileName:this.lang.t("menu.pos_02_001"),enabled:!0,allowExportSelectedData:!0}),h.createElement(A.sg,{dataField:"DATE",caption:this.t("grdSaleTicketReport.clmDate"),visible:!0,width:150}),h.createElement(A.sg,{dataField:"TIME",caption:this.t("grdSaleTicketReport.clmTime"),visible:!0,width:100}),h.createElement(A.sg,{dataField:"USERS",caption:this.t("grdSaleTicketReport.slmUser"),visible:!0,width:100}),h.createElement(A.sg,{dataField:"CUSTOMER_NAME",caption:this.t("grdSaleTicketReport.clmCustomer"),visible:!0,width:300}),h.createElement(A.sg,{dataField:"DISCOUNT",caption:this.t("grdSaleTicketReport.clmDiscount"),visible:!0,width:100,format:{style:"currency",currency:"EUR",precision:2}}),h.createElement(A.sg,{dataField:"LOYALYT",caption:this.t("grdSaleTicketReport.clmLoyalyt"),visible:!0,width:100,format:{style:"currency",currency:"EUR",precision:2}}),h.createElement(A.sg,{dataField:"HT",caption:this.t("grdSaleTicketReport.clmHT"),visible:!0,width:100,format:{style:"currency",currency:"EUR",precision:2}}),h.createElement(A.sg,{dataField:"TVA",caption:this.t("grdSaleTicketReport.clmVTA"),visible:!0,width:100,format:{style:"currency",currency:"EUR",precision:2}}),h.createElement(A.sg,{dataField:"TTC",caption:this.t("grdSaleTicketReport.clmTTC"),visible:!0,width:100,format:{style:"currency",currency:"EUR",precision:2}}),h.createElement(A.sg,{dataField:"POS_ID",caption:this.t("grdSaleTicketReport.clmTicketID"),visible:!0})))),h.createElement(D.ZP,{parent:this,id:"popDetail",visible:!1,showCloseButton:!0,showTitle:!0,title:this.t("popDetail.title"),container:"#root",width:"100%",height:"100%",position:{of:"#root"}},h.createElement("div",{className:"row"},h.createElement("div",{className:"col-1 pe-0"}),h.createElement("div",{className:"col-7 pe-0"},this.t("TicketId")," : ",this.state.ticketId)),h.createElement("div",{className:"row"},h.createElement("div",{className:"col-1 pe-0"}),h.createElement("div",{className:"col-7 pe-0"},h.createElement(A.ZP,{id:"grdSaleTicketItems",parent:this,selection:{mode:"multiple"},showBorders:!0,filterRow:{visible:!0},headerFilter:{visible:!0},columnAutoWidth:!0,allowColumnReordering:!0,allowColumnResizing:!0},h.createElement(A.Po,{defaultPageSize:20}),h.createElement(A.uE,{visible:!0,allowedPageSizes:[5,10,50],showPageSizeSelector:!0}),h.createElement(A.D7,{fileName:this.lang.t("menu.pos_02_001"),enabled:!0,allowExportSelectedData:!0}),h.createElement(A.sg,{dataField:"BARCODE",caption:this.t("grdSaleTicketItems.clmBarcode"),visible:!0,width:150}),h.createElement(A.sg,{dataField:"ITEM_NAME",caption:this.t("grdSaleTicketItems.clmName"),visible:!0,width:250}),h.createElement(A.sg,{dataField:"QUANTITY",caption:this.t("grdSaleTicketItems.clmQuantity"),visible:!0,width:100}),h.createElement(A.sg,{dataField:"PRICE",caption:this.t("grdSaleTicketItems.clmPrice"),visible:!0,width:150,format:{style:"currency",currency:"EUR",precision:2}}),h.createElement(A.sg,{dataField:"TOTAL",caption:this.t("grdSaleTicketItems.clmTotal"),visible:!0,width:150,format:{style:"currency",currency:"EUR",precision:2}}))),h.createElement("div",{className:"col-3 ps-0"},h.createElement(A.ZP,{id:"grdSaleTicketPays",parent:this,selection:{mode:"multiple"},showBorders:!0,filterRow:{visible:!0},headerFilter:{visible:!0},columnAutoWidth:!0,allowColumnReordering:!0,allowColumnResizing:!0,onRowClick:function(){var t=(0,a.Z)(p().mark((function t(n){return p().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:e.lastPosPayDt.length>0&&(e.rbtnTotalPayType.value=0,e.lastPayRest.value=e.lastPosSaleDt[0].GRAND_TOTAL-e.lastPosPayDt.sum("AMOUNT")<0?0:Number(e.lastPosSaleDt[0].GRAND_TOTAL-e.lastPosPayDt.sum("AMOUNT")),e.txtPopLastTotal.value=e.lastPosSaleDt[0].GRAND_TOTAL,e.popLastTotal.show(),setTimeout((function(){e.grdLastTotalPay.devGrid.selectRowsByIndexes(0)}),100));case 1:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()},h.createElement(A.Po,{defaultPageSize:20}),h.createElement(A.uE,{visible:!0,allowedPageSizes:[5,10,50],showPageSizeSelector:!0}),h.createElement(A.D7,{fileName:this.lang.t("menu.pos_02_001"),enabled:!0,allowExportSelectedData:!0}),h.createElement(A.sg,{dataField:"PAY_TYPE_NAME",caption:this.t("grdSaleTicketPays.clmPayName"),visible:!0,width:155}),h.createElement(A.sg,{dataField:"LINE_TOTAL",caption:this.t("grdSaleTicketPays.clmTotal"),visible:!0,format:{style:"currency",currency:"EUR",precision:2},width:150}))))),h.createElement("div",null,h.createElement(D.ZP,{parent:this,id:"popLastTotal",visible:!1,showCloseButton:!0,showTitle:!0,title:this.lang.t("popLastTotal.title"),container:"#root",width:"600",height:"700",position:{of:"#root"},onHiding:(0,a.Z)(p().mark((function t(){return p().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.lastPosPayDt.refresh();case 2:case"end":return t.stop()}}),t)})))},h.createElement("div",{className:"row"},h.createElement("div",{className:"col-12"},h.createElement("div",{className:"row pt-2"},h.createElement("div",{className:"col-2 pe-1"},h.createElement(R,{id:"rbtnTotalPayType",parent:this,button:[{id:"btn01",style:{height:"49px",width:"100%"},icon:"fa-money-bill-1",text:"ESC"},{id:"btn02",style:{height:"49px",width:"100%"},icon:"fa-credit-card",text:"CB"},{id:"btn03",style:{height:"49px",width:"100%"},icon:"fa-rectangle-list",text:"CHQ"},{id:"btn04",style:{height:"49px",width:"100%"},icon:"fa-rectangle-list",text:"CHQe"}]})),h.createElement("div",{className:"col-10"},h.createElement("div",{className:"row"},h.createElement("div",{className:"col-12"},h.createElement(A.ZP,{parent:this,id:"grdLastTotalPay",showBorders:!0,columnsAutoWidth:!0,allowColumnReordering:!0,allowColumnResizing:!0,showRowLines:!0,showColumnLines:!0,showColumnHeaders:!1,height:"138px",width:"100%",dbApply:!1,selection:{mode:"single"},onRowPrepared:function(t){t.rowElement.style.fontSize="16px",t.rowElement.style.fontWeight="bold"},onRowRemoved:function(){var t=(0,a.Z)(p().mark((function t(e){return p().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()},h.createElement(A.LO,{confirmDelete:!1}),h.createElement(A.sg,{dataField:"PAY_TYPE_NAME",width:200,alignment:"center"}),h.createElement(A.sg,{dataField:"AMOUNT",width:100,format:"#,##0.00"}),h.createElement(A.sg,{dataField:"CHANGE",width:100,format:"#,##0.00"})))),h.createElement("div",{className:"row pt-1"},h.createElement("div",{className:"col-12"},h.createElement("p",{className:"fs-2 fw-bold text-center m-0"},h.createElement(x,{id:"lastPayRest",parent:this,value:"0.00",format:"currency"})))),h.createElement("div",{className:"row pt-1"},h.createElement("div",{className:"col-12"},h.createElement(O.ZP,{id:"txtPopLastTotal",parent:this,simple:!0,elementAttr:{style:"font-size:15pt;font-weight:bold;border:3px solid #428bca;"}}))))),h.createElement("div",{className:"row pt-4"},h.createElement("div",{className:"col-12"},h.createElement("div",{className:"row"},h.createElement("div",{className:"col-3"},h.createElement(L.Z,{id:"btnPopLastTotalTRDetail",parent:this,className:"form-group btn btn-danger btn-block",style:{height:"60px",width:"100%"},onClick:(0,a.Z)(p().mark((function t(){var n;return p().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!(e.lastPosPayDt.where({PAY_TYPE:4}).length>0)){t.next=9;break}return(n=new k.$A).selectCmd={query:"SELECT AMOUNT AS AMOUNT,COUNT(AMOUNT) AS COUNT FROM CHEQPAY_VW_01 WHERE DOC = @DOC GROUP BY AMOUNT",param:["DOC:string|50"],local:{type:"select",from:"CHEQPAY_VW_01",where:{DOC:e.lastPosPayDt[0].POS_GUID},aggregate:{count:"AMOUNT"},groupBy:"AMOUNT"}},n.selectCmd.value=[e.lastPosPayDt[0].POS_GUID],t.next=6,n.refresh();case 6:return t.next=8,e.grdLastTRDetail.dataRefresh({source:n});case 8:e.popLastTRDetail.show();case 9:case"end":return t.stop()}}),t)})))},this.t("trDeatil"))),h.createElement("div",{className:"col-3"},h.createElement(L.Z,{id:"btnPopLastTotalLineDel",parent:this,className:"form-group btn btn-danger btn-block",style:{height:"60px",width:"100%"},onClick:(0,a.Z)(p().mark((function t(){return p().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:e.grdLastTotalPay.devGrid.getSelectedRowKeys().length>0&&(e.grdLastTotalPay.devGrid.deleteRow(e.grdLastTotalPay.devGrid.getRowIndexByKey(e.grdLastTotalPay.devGrid.getSelectedRowKeys()[0])),e.lastPayRest.value=e.lastPosSaleDt[0].GRAND_TOTAL-e.lastPosPayDt.sum("AMOUNT")<0?0:Number(e.lastPosSaleDt[0].GRAND_TOTAL-e.lastPosPayDt.sum("AMOUNT")),e.txtPopLastTotal.newStart=!0,setTimeout((function(){e.grdLastTotalPay.devGrid.selectRowsByIndexes(0)}),100));case 1:case"end":return t.stop()}}),t)})))},this.t("lineDelete"))),h.createElement("div",{className:"col-3"},h.createElement(L.Z,{id:"btnPopLastTotalCancel",parent:this,className:"form-group btn btn-danger btn-block",style:{height:"60px",width:"100%"},onClick:function(){e.popLastTotal.hide()}},this.t("cancel"))),h.createElement("div",{className:"col-3"},h.createElement(L.Z,{id:"btnPopLastTotalOkey",parent:this,className:"form-group btn btn-success btn-block",style:{height:"60px",width:"100%"},onClick:(0,a.Z)(p().mark((function t(){var n,i,a,o,s;return p().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(n="",i=Number(parseFloat(e.txtPopLastTotal.value).toFixed(2)),a=Number(parseFloat(e.lastPosSaleDt[0].GRAND_TOTAL-(e.lastPosPayDt.sum("AMOUNT")+i)).toFixed(2)),0==e.rbtnTotalPayType.value?n="ESC":1==e.rbtnTotalPayType.value?n="CB":2==e.rbtnTotalPayType.value?n="CHQ":3==e.rbtnTotalPayType.value?n="T.R":4==e.rbtnTotalPayType.value&&(n="BON D'AVOIR"),!(a<0)){t.next=17;break}if(0!=e.rbtnTotalPayType.value){t.next=10;break}a*=-1,i=e.txtPopLastTotal.value,t.next=15;break;case 10:return o={id:"msgPayNotBigToPay",showTitle:!0,title:e.lang.t("msgPayNotBigToPay.title"),showCloseButton:!0,width:"500px",height:"200px",button:[{id:"btn01",caption:e.lang.t("msgPayNotBigToPay.btn01"),location:"after"}],content:h.createElement("div",{style:{textAlign:"center",fontSize:"20px"}},e.lang.t("msgPayNotBigToPay.msg"))},t.next=13,(0,U.W)(o);case 13:i=-1*(e.txtPopLastTotal.value-a),a=0;case 15:t.next=18;break;case 17:a=0;case 18:i>0&&(s={GUID:k.$A.uuidv4(),CUSER:e.core.auth.data.CODE,POS_GUID:e.lastPosSaleDt[0].POS_GUID,PAY_TYPE:e.rbtnTotalPayType.value,PAY_TYPE_NAME:n,LINE_NO:e.lastPosPayDt.length+1,AMOUNT:i,CHANGE:a},e.lastPosPayDt.push(s),e.lastPayRest.value=e.lastPosSaleDt[0].GRAND_TOTAL-e.lastPosPayDt.sum("AMOUNT")<0?0+Number.money.sign:Number(e.lastPosSaleDt[0].GRAND_TOTAL-e.lastPosPayDt.sum("AMOUNT")),e.txtPopLastTotal.newStart=!0),setTimeout((function(){e.grdLastTotalPay.devGrid.selectRowsByIndexes(0)}),100);case 20:case"end":return t.stop()}}),t)})))},h.createElement("i",{className:"text-white fa-solid fa-check",style:{fontSize:"24px"}})))))),h.createElement("div",{className:"row pt-2"},h.createElement("div",{className:"col-12"},this.t("payChangeNote"))),h.createElement("div",{className:"row pt-1"},h.createElement("div",{className:"col-12"},this.t("payChangeNote2"))),h.createElement("div",{className:"row py-2"},h.createElement("div",{className:"col-12"},h.createElement(O.ZP,{id:"txtPayChangeDesc",placeholder:this.t("txtPayChangeDescPlace"),parent:this,simple:!0}))),h.createElement("div",{className:"row pt-2"},h.createElement("div",{className:"col-12"},h.createElement(L.Z,{id:"btnPopLastTotalSave",parent:this,className:"form-group btn btn-success btn-block",style:{height:"60px",width:"100%"},onClick:(0,a.Z)(p().mark((function t(){var n,i;return p().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!(e.lastPayRest.value>0)){t.next=5;break}return n={id:"msgMissingPay",showTitle:!0,title:e.lang.t("msgMissingPay.title"),showCloseButton:!0,width:"500px",height:"200px",button:[{id:"btn01",caption:e.lang.t("msgMissingPay.btn01"),location:"after"}],content:h.createElement("div",{style:{textAlign:"center",fontSize:"20px"}},e.lang.t("msgMissingPay.msg"))},t.next=4,(0,U.W)(n);case 4:return t.abrupt("return");case 5:return t.next=7,e.lastPosPayDt.delete();case 7:return t.next=9,e.lastPosPayDt.update();case 9:e.popLastTotal.hide(),e.extraObj=new V.XR,i=Z({},e.extraObj.empty),e.extraObj.addEmpty(i),e.extraObj.dt()[0].TAG="PAYMENT_CHANGE",e.extraObj.dt()[0].POS_GUID=e.lastPosPayDt[0].POS_GUID,e.extraObj.dt()[0].DESCRIPTION=e.txtPayChangeDesc.value,e.extraObj.save();case 17:case"end":return t.stop()}}),t)})))},h.createElement("i",{className:"text-white fa-solid fa-floppy-disk",style:{fontSize:"24px"}}))))))),h.createElement("div",null,h.createElement(D.ZP,{parent:this,id:"popOpenTike",visible:!1,showCloseButton:!0,showTitle:!0,title:this.t("popOpenTike.title"),container:"#root",width:"700",height:"500",position:{of:"#root"}},h.createElement(g(),{colCount:1,height:"fit-content"},h.createElement(v.Item,null,h.createElement(A.ZP,{parent:this,id:"grdOpenTike",showBorders:!0,columnsAutoWidth:!0,allowColumnReordering:!0,allowColumnResizing:!0,headerFilter:{visible:!0},height:350,width:"100%",dbApply:!1,onRowRemoved:function(){var t=(0,a.Z)(p().mark((function t(e){return p().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()},h.createElement(A.PY,{mode:"virtual"}),h.createElement(A.LO,{mode:"cell",allowUpdating:!1,allowDeleting:!1}),h.createElement(A.sg,{dataField:"CUSER_NAME",caption:this.t("grdOpenTike.clmUser"),width:120,headerFilter:{visible:!0}}),h.createElement(A.sg,{dataField:"DEVICE",caption:this.t("grdOpenTike.clmDevice"),width:100,headerFilter:{visible:!0}}),h.createElement(A.sg,{dataField:"DATE",caption:this.t("grdOpenTike.clmDate"),width:150,allowEditing:!1}),h.createElement(A.sg,{dataField:"TICKET_ID",caption:this.t("grdOpenTike.clmTicketId"),width:150,headerFilter:{visible:!0}})))))))))}}]),I}(h.PureComponent)},14140:function(t,e,n){var i,a=this&&this.__extends||(i=function(t,e){return i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])},i(t,e)},function(t,e){function n(){this.constructor=t}i(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)});Object.defineProperty(e,"__esModule",{value:!0}),e.ToolbarItem=e.Show=e.Position=e.Options=e.Offset=e.My=e.Hide=e.DropDownOptions=e.DisplayFormat=e.Collision=e.CalendarOptions=e.Button=e.BoundaryOffset=e.At=e.Animation=e.DateBox=void 0;var o=n(35561),s=n(45697),l=n(76907),r=n(85287),c=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e._WidgetClass=o.default,e.subscribableOptions=["opened","value"],e.independentEvents=["onChange","onClosed","onContentReady","onCopy","onCut","onDisposing","onEnterKey","onFocusIn","onFocusOut","onInitialized","onInput","onKeyDown","onKeyUp","onOpened","onPaste"],e._defaults={defaultOpened:"opened",defaultValue:"value"},e._expectedChildren={button:{optionName:"buttons",isCollectionItem:!0},calendarOptions:{optionName:"calendarOptions",isCollectionItem:!1},displayFormat:{optionName:"displayFormat",isCollectionItem:!1},dropDownOptions:{optionName:"dropDownOptions",isCollectionItem:!1}},e._templateProps=[{tmplOption:"dropDownButtonTemplate",render:"dropDownButtonRender",component:"dropDownButtonComponent",keyFn:"dropDownButtonKeyFn"}],e}return a(e,t),Object.defineProperty(e.prototype,"instance",{get:function(){return this._instance},enumerable:!1,configurable:!0}),e}(l.Component);e.DateBox=c,c.propTypes={acceptCustomValue:s.bool,accessKey:s.string,activeStateEnabled:s.bool,adaptivityEnabled:s.bool,applyButtonText:s.string,applyValueMode:s.oneOf(["instantly","useButtons"]),buttons:s.array,calendarOptions:s.object,cancelButtonText:s.string,dateOutOfRangeMessage:s.string,dateSerializationFormat:s.string,deferRendering:s.bool,disabled:s.bool,disabledDates:s.oneOfType([s.array,s.func]),displayFormat:s.oneOfType([s.object,s.func,s.string]),dropDownOptions:s.object,focusStateEnabled:s.bool,height:s.oneOfType([s.func,s.number,s.string]),hint:s.string,hoverStateEnabled:s.bool,interval:s.number,invalidDateMessage:s.string,isValid:s.bool,maxLength:s.oneOfType([s.number,s.string]),name:s.string,onChange:s.func,onClosed:s.func,onContentReady:s.func,onCopy:s.func,onCut:s.func,onDisposing:s.func,onEnterKey:s.func,onFocusIn:s.func,onFocusOut:s.func,onInitialized:s.func,onInput:s.func,onKeyDown:s.func,onKeyUp:s.func,onOpened:s.func,onOptionChanged:s.func,onPaste:s.func,onValueChanged:s.func,opened:s.bool,openOnFieldClick:s.bool,pickerType:s.oneOf(["calendar","list","native","rollers"]),placeholder:s.string,readOnly:s.bool,rtlEnabled:s.bool,showAnalogClock:s.bool,showClearButton:s.bool,showDropDownButton:s.bool,spellcheck:s.bool,stylingMode:s.oneOf(["outlined","underlined","filled"]),tabIndex:s.number,text:s.string,type:s.oneOf(["date","datetime","time"]),useMaskBehavior:s.bool,validationErrors:s.array,validationMessageMode:s.oneOf(["always","auto"]),validationStatus:s.oneOf(["valid","invalid","pending"]),valueChangeEvent:s.string,visible:s.bool,width:s.oneOfType([s.func,s.number,s.string])};var u=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return a(e,t),e.OptionName="animation",e.ExpectedChildren={hide:{optionName:"hide",isCollectionItem:!1},show:{optionName:"show",isCollectionItem:!1}},e}(r.default);e.Animation=u;var d=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return a(e,t),e.OptionName="at",e}(r.default);e.At=d;var p=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return a(e,t),e.OptionName="boundaryOffset",e}(r.default);e.BoundaryOffset=p;var h=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return a(e,t),e.OptionName="buttons",e.IsCollectionItem=!0,e.ExpectedChildren={options:{optionName:"options",isCollectionItem:!1}},e}(r.default);e.Button=h;var m=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return a(e,t),e.OptionName="calendarOptions",e.DefaultsProps={defaultValue:"value",defaultZoomLevel:"zoomLevel"},e.TemplateProps=[{tmplOption:"cellTemplate",render:"cellRender",component:"cellComponent",keyFn:"cellKeyFn"}],e}(r.default);e.CalendarOptions=m;var E=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return a(e,t),e.OptionName="collision",e}(r.default);e.Collision=E;var f=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return a(e,t),e.OptionName="displayFormat",e}(r.default);e.DisplayFormat=f;var v=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return a(e,t),e.OptionName="dropDownOptions",e.DefaultsProps={defaultHeight:"height",defaultPosition:"position",defaultVisible:"visible",defaultWidth:"width"},e.ExpectedChildren={animation:{optionName:"animation",isCollectionItem:!1},position:{optionName:"position",isCollectionItem:!1},toolbarItem:{optionName:"toolbarItems",isCollectionItem:!0}},e.TemplateProps=[{tmplOption:"contentTemplate",render:"contentRender",component:"contentComponent",keyFn:"contentKeyFn"},{tmplOption:"titleTemplate",render:"titleRender",component:"titleComponent",keyFn:"titleKeyFn"}],e}(r.default);e.DropDownOptions=v;var y=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return a(e,t),e.OptionName="hide",e}(r.default);e.Hide=y;var T=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return a(e,t),e.OptionName="my",e}(r.default);e.My=T;var g=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return a(e,t),e.OptionName="offset",e}(r.default);e.Offset=g;var C=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return a(e,t),e.OptionName="options",e.TemplateProps=[{tmplOption:"template",render:"render",component:"component",keyFn:"keyFn"}],e}(r.default);e.Options=C;var P=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return a(e,t),e.OptionName="position",e.ExpectedChildren={at:{optionName:"at",isCollectionItem:!1},boundaryOffset:{optionName:"boundaryOffset",isCollectionItem:!1},collision:{optionName:"collision",isCollectionItem:!1},my:{optionName:"my",isCollectionItem:!1},offset:{optionName:"offset",isCollectionItem:!1}},e}(r.default);e.Position=P;var A=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return a(e,t),e.OptionName="show",e}(r.default);e.Show=A;var O=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return a(e,t),e.OptionName="toolbarItems",e.IsCollectionItem=!0,e.TemplateProps=[{tmplOption:"template",render:"render",component:"component",keyFn:"keyFn"}],e}(r.default);e.ToolbarItem=O,e.default=c},67497:function(t,e,n){var i,a=this&&this.__extends||(i=function(t,e){return i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])},i(t,e)},function(t,e){function n(){this.constructor=t}i(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)});Object.defineProperty(e,"__esModule",{value:!0}),e.Options=e.Format=e.Button=e.NumberBox=void 0;var o=n(74341),s=n(45697),l=n(76907),r=n(85287),c=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e._WidgetClass=o.default,e.subscribableOptions=["value"],e.independentEvents=["onChange","onContentReady","onCopy","onCut","onDisposing","onEnterKey","onFocusIn","onFocusOut","onInitialized","onInput","onKeyDown","onKeyUp","onPaste"],e._defaults={defaultValue:"value"},e._expectedChildren={button:{optionName:"buttons",isCollectionItem:!0},format:{optionName:"format",isCollectionItem:!1}},e}return a(e,t),Object.defineProperty(e.prototype,"instance",{get:function(){return this._instance},enumerable:!1,configurable:!0}),e}(l.Component);e.NumberBox=c,c.propTypes={accessKey:s.string,activeStateEnabled:s.bool,buttons:s.array,disabled:s.bool,focusStateEnabled:s.bool,format:s.oneOfType([s.object,s.func,s.string]),height:s.oneOfType([s.func,s.number,s.string]),hint:s.string,hoverStateEnabled:s.bool,invalidValueMessage:s.string,isValid:s.bool,max:s.number,min:s.number,mode:s.oneOf(["number","text","tel"]),name:s.string,onChange:s.func,onContentReady:s.func,onCopy:s.func,onCut:s.func,onDisposing:s.func,onEnterKey:s.func,onFocusIn:s.func,onFocusOut:s.func,onInitialized:s.func,onInput:s.func,onKeyDown:s.func,onKeyUp:s.func,onOptionChanged:s.func,onPaste:s.func,onValueChanged:s.func,placeholder:s.string,readOnly:s.bool,rtlEnabled:s.bool,showClearButton:s.bool,showSpinButtons:s.bool,step:s.number,stylingMode:s.oneOf(["outlined","underlined","filled"]),tabIndex:s.number,text:s.string,useLargeSpinButtons:s.bool,validationErrors:s.array,validationMessageMode:s.oneOf(["always","auto"]),validationStatus:s.oneOf(["valid","invalid","pending"]),value:s.number,valueChangeEvent:s.string,visible:s.bool,width:s.oneOfType([s.func,s.number,s.string])};var u=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return a(e,t),e.OptionName="buttons",e.IsCollectionItem=!0,e.ExpectedChildren={options:{optionName:"options",isCollectionItem:!1}},e}(r.default);e.Button=u;var d=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return a(e,t),e.OptionName="format",e}(r.default);e.Format=d;var p=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return a(e,t),e.OptionName="options",e.TemplateProps=[{tmplOption:"template",render:"render",component:"component",keyFn:"keyFn"}],e}(r.default);e.Options=p,e.default=c}}]);