"use strict";(self.webpackChunkwww=self.webpackChunkwww||[]).push([[5576],{5576:(e,t,n)=>{n.r(t),n.d(t,{default:()=>N});var r=n(4942),a=n(15861),s=n(15671),i=n(43144),o=n(97326),c=n(60136),l=n(82963),d=n(61120),u=n(64687),p=n.n(u),m=n(67294),h=n(73364),E=n(37400),b=n(42866),f=n.n(b),C=n(53221),g=n.n(C),v=n(25552),x=n.n(v),w=n(91686),S=n.n(w),O=n(30886),y=n(99846),P=(n(5083),n(99077)),A=(n(55585),n(417)),k=n(32175),Z=n(18405),D=n(73682),R=(n(90428),n(57941),n(60547));function I(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function T(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?I(Object(n),!0).forEach((function(t){(0,r.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):I(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}n(17276);var N=function(e){(0,c.Z)(L,e);var t,n,r,u,b,C,w,I,N,M=(I=L,N=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,t=(0,d.Z)(I);if(N){var n=(0,d.Z)(this).constructor;e=Reflect.construct(t,arguments,n)}else e=t.apply(this,arguments);return(0,l.Z)(this,e)});function L(e){var t;return(0,s.Z)(this,L),(t=M.call(this,e)).core=h.Z.instance.core,t.prmObj=t.param.filter({TYPE:1,USERS:t.user.CODE}),t.customerObj=new E.an,t.prevCode="",t.tabIndex=e.data.tabkey,t._onItemRendered=t._onItemRendered.bind((0,o.Z)(t)),t}return(0,i.Z)(L,[{key:"componentDidMount",value:(w=(0,a.Z)(p().mark((function e(){return p().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.core.util.waitUntil(0);case 2:this.init();case 3:case"end":return e.stop()}}),e,this)}))),function(){return w.apply(this,arguments)})},{key:"init",value:(C=(0,a.Z)(p().mark((function e(){var t=this;return p().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:this.customerObj.clearAll(),this.customerObj.ds.on("onAddRow",(function(e,n){"new"==n.stat&&(""!=t.prevCode?(t.btnNew.setState({disabled:!0}),t.btnBack.setState({disabled:!1})):(t.btnNew.setState({disabled:!1}),t.btnBack.setState({disabled:!0})),t.btnSave.setState({disabled:!1}),t.btnDelete.setState({disabled:!1}),t.btnCopy.setState({disabled:!1}))})),this.customerObj.ds.on("onEdit",(function(e,n){"edit"==n.rowData.stat&&(t.btnBack.setState({disabled:!1}),t.btnNew.setState({disabled:!0}),t.btnSave.setState({disabled:!1}),t.btnDelete.setState({disabled:!1}),t.btnCopy.setState({disabled:!1}),n.rowData.CUSER=t.user.CODE)})),this.customerObj.ds.on("onRefresh",(function(e){t.prevCode=t.customerObj.dt("CUSTOMERS").length>0?t.customerObj.dt("CUSTOMERS")[0].CODE:"",t.btnBack.setState({disabled:!0}),t.btnNew.setState({disabled:!1}),t.btnSave.setState({disabled:!0}),t.btnDelete.setState({disabled:!1}),t.btnCopy.setState({disabled:!1})})),this.customerObj.ds.on("onDelete",(function(e){t.btnBack.setState({disabled:!1}),t.btnNew.setState({disabled:!0}),t.btnSave.setState({disabled:!1}),t.btnDelete.setState({disabled:!1}),t.btnCopy.setState({disabled:!1})})),this.txtCode.value="";case 6:case"end":return e.stop()}}),e,this)}))),function(){return C.apply(this,arguments)})},{key:"getCustomer",value:(b=(0,a.Z)(p().mark((function e(t){return p().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.customerObj.clearAll(),e.next=3,this.customerObj.load({CODE:t});case 3:case"end":return e.stop()}}),e,this)}))),function(e){return b.apply(this,arguments)})},{key:"checkCustomer",value:(u=(0,a.Z)(p().mark((function e(t){var n=this;return p().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",new Promise(function(){var e=(0,a.Z)(p().mark((function e(r){var a;return p().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(""===t){e.next=15;break}return e.next=3,(new E.an).load({CODE:t});case 3:if(!(e.sent.length>0)){e.next=12;break}return a={id:"msgCode",showTitle:!0,title:n.t("msgCode.title"),showCloseButton:!0,width:"500px",height:"200px",button:[{id:"btn01",caption:n.t("msgCode.btn01"),location:"before"},{id:"btn02",caption:n.t("msgCode.btn02"),location:"after"}],content:m.createElement("div",{style:{textAlign:"center",fontSize:"20px"}},n.t("msgCode.msg"))},e.next=8,(0,R.W)(a);case 8:"btn01"==e.sent?(n.getCustomer(t),r(2)):r(3),e.next=13;break;case 12:r(1);case 13:e.next=16;break;case 15:r(0);case 16:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()));case 1:case"end":return e.stop()}}),e)}))),function(e){return u.apply(this,arguments)})},{key:"checkZipcode",value:(r=(0,a.Z)(p().mark((function e(t){var n=this;return p().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",new Promise(function(){var e=(0,a.Z)(p().mark((function e(r){var a,s;return p().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(""===t){e.next=8;break}return a={query:"SELECT COUNTRY_CODE,PLACE FROM ZIPCODE WHERE ZIPCODE = @ZIPCODE ",param:["ZIPCODE:string|50"],value:[t]},e.next=4,n.core.sql.execute(a);case 4:(s=e.sent).result.recordset.length>0?(n.cmbPopCity.value=s.result.recordset[0].PLACE,n.cmbPopCountry.value=s.result.recordset[0].COUNTRY_CODE,r(1)):r(1),e.next=9;break;case 8:r(0);case 9:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()));case 1:case"end":return e.stop()}}),e)}))),function(e){return r.apply(this,arguments)})},{key:"_onCustomerRendered",value:(n=(0,a.Z)(p().mark((function e(t){return p().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.core.util.waitUntil(10);case 2:case"end":return e.stop()}}),e,this)}))),function(e){return n.apply(this,arguments)})},{key:"_onItemRendered",value:(t=(0,a.Z)(p().mark((function e(t){return p().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.core.util.waitUntil(10);case 2:if(t.itemData.title!=this.t("tabTitleAdress")){e.next=5;break}return e.next=5,this.grdAdress.dataRefresh({source:this.customerObj.customerAdress.dt("CUSTOMER_ADRESS")});case 5:case"end":return e.stop()}}),e,this)}))),function(e){return t.apply(this,arguments)})},{key:"render",value:function(){var e,t=this;return m.createElement("div",null,m.createElement(f(),null,m.createElement("div",{className:"row px-2 pt-2"},m.createElement("div",{className:"col-12"},m.createElement(g(),null,m.createElement(v.Item,{location:"after",locateInMenu:"auto"},m.createElement(D.Z,{id:"btnBack",parent:this,icon:"revert",type:"default",onClick:function(){""!=t.prevCode&&t.getCustomer(t.prevCode)}})),m.createElement(v.Item,{location:"after",locateInMenu:"auto"},m.createElement(D.Z,{id:"btnNew",parent:this,icon:"file",type:"default",onClick:function(){t.init()}})),m.createElement(v.Item,{location:"after",locateInMenu:"auto"},m.createElement(D.Z,{id:"btnSave",parent:this,icon:"floppy",type:"default",validationGroup:"frmCustomerAddress"+this.tabIndex,onClick:function(){var e=(0,a.Z)(p().mark((function e(n){var r,a,s;return p().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if("valid"!=n.validationGroup.validate().status){e.next=23;break}return r={id:"msgSave",showTitle:!0,title:t.t("msgSave.title"),showCloseButton:!0,width:"500px",height:"200px",button:[{id:"btn01",caption:t.t("msgSave.btn01"),location:"before"},{id:"btn02",caption:t.t("msgSave.btn02"),location:"after"}],content:m.createElement("div",{style:{textAlign:"center",fontSize:"20px"}},t.t("msgSave.msg"))},e.next=4,(0,R.W)(r);case 4:if("btn01"!=e.sent){e.next=21;break}return a={id:"msgSaveResult",showTitle:!0,title:t.t("msgSave.title"),showCloseButton:!0,width:"500px",height:"200px",button:[{id:"btn01",caption:t.t("msgSave.btn01"),location:"after"}]},e.next=9,t.customerObj.save();case 9:if(e.t0=e.sent,0!=e.t0){e.next=18;break}return a.content=m.createElement("div",{style:{textAlign:"center",fontSize:"20px",color:"green"}},t.t("msgSaveResult.msgSuccess")),e.next=14,(0,R.W)(a);case 14:t.btnSave.setState({disabled:!0}),t.btnNew.setState({disabled:!1}),e.next=21;break;case 18:return a.content=m.createElement("div",{style:{textAlign:"center",fontSize:"20px",color:"red"}},t.t("msgSaveResult.msgFailed")),e.next=21,(0,R.W)(a);case 21:e.next=26;break;case 23:return s={id:"msgSaveValid",showTitle:!0,title:t.t("msgSaveValid.title"),showCloseButton:!0,width:"500px",height:"200px",button:[{id:"btn01",caption:t.t("msgSaveValid.btn01"),location:"after"}],content:m.createElement("div",{style:{textAlign:"center",fontSize:"20px"}},t.t("msgSaveValid.msg"))},e.next=26,(0,R.W)(s);case 26:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()})),m.createElement(v.Item,{location:"after",locateInMenu:"auto"},m.createElement(D.Z,{id:"btnDelete",parent:this,icon:"trash",type:"default",onClick:(0,a.Z)(p().mark((function e(){var n;return p().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n={id:"msgDelete",showTitle:!0,title:t.t("msgDelete.title"),showCloseButton:!0,width:"500px",height:"200px",button:[{id:"btn01",caption:t.t("msgDelete.btn01"),location:"before"},{id:"btn02",caption:t.t("msgDelete.btn02"),location:"after"}],content:m.createElement("div",{style:{textAlign:"center",fontSize:"20px"}},t.t("msgDelete.msg"))},e.next=3,(0,R.W)(n);case 3:if("btn01"!=e.sent){e.next=9;break}return t.customerObj.dt("CUSTOMERS").removeAt(0),e.next=8,t.customerObj.dt("CUSTOMERS").delete();case 8:t.init();case 9:case"end":return e.stop()}}),e)})))})),m.createElement(v.Item,{location:"after",locateInMenu:"auto"},m.createElement(D.Z,{id:"btnCopy",parent:this,icon:"copy",type:"default",onClick:function(){}})),m.createElement(v.Item,{location:"after",locateInMenu:"auto",widget:"dxButton",options:{type:"default",icon:"clear",onClick:(e=(0,a.Z)(p().mark((function e(){var n;return p().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n={id:"msgClose",showTitle:!0,title:t.lang.t("msgWarning"),showCloseButton:!0,width:"500px",height:"200px",button:[{id:"btn01",caption:t.lang.t("btnYes"),location:"before"},{id:"btn02",caption:t.lang.t("btnNo"),location:"after"}],content:m.createElement("div",{style:{textAlign:"center",fontSize:"20px"}},t.lang.t("msgClose"))},e.next=3,(0,R.W)(n);case 3:"btn01"==e.sent&&h.Z.instance.panel.closePage();case 5:case"end":return e.stop()}}),e)}))),function(){return e.apply(this,arguments)})}})))),m.createElement("div",{className:"row px-2 pt-2"},m.createElement("div",{className:"col-12"},m.createElement(x(),{colCount:2,id:"frmCustomerAddress"+this.tabIndex},m.createElement(v.Item,null,m.createElement(v.Label,{text:this.t("txtCode"),alignment:"right"}),m.createElement(y.ZP,{id:"txtCode",parent:this,simple:!0,placeholder:this.t("customerPlace"),dt:{data:this.customerObj.dt("CUSTOMERS"),field:"CODE"},upper:this.sysParam.filter({ID:"onlyBigChar",USERS:this.user.CODE}).getValue().value,button:[{id:"01",icon:"more",onClick:function(){t.pg_txtCode.show(),t.pg_txtCode.onClick=function(e){e.length>0&&t.getCustomer(e[0].CODE)}}},{id:"02",icon:"arrowdown",onClick:function(){t.txtCode.value=Math.floor(Date.now()/1e3)}}],onEnterKey:(0,a.Z)(p().mark((function e(){return p().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.pg_txtCode.setVal(t.txtCode.value);case 2:t.pg_txtCode.show(),t.pg_txtCode.onClick=function(e){e.length>0&&t.getCustomer(e[0].CODE)};case 4:case"end":return e.stop()}}),e)}))).bind(this),onChange:(0,a.Z)(p().mark((function e(){return p().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.checkCustomer(t.txtCode.value);case 2:3==e.sent&&(t.txtCode.value="");case 4:case"end":return e.stop()}}),e)}))).bind(this),param:this.param.filter({ELEMENT:"txtCode",USERS:this.user.CODE}),access:this.access.filter({ELEMENT:"txtCode",USERS:this.user.CODE})},m.createElement(y.cX,{validationGroup:"frmCustomerAddress"+this.tabIndex},m.createElement(y.n2,{message:"Kodu boş geçemezsiniz !"}))),m.createElement(A.Z,{id:"pg_txtCode",parent:this,container:"#root",visible:!1,position:{of:"#root"},showTitle:!0,showBorders:!0,width:"90%",height:"90%",title:this.t("pg_txtCode.title"),search:!0,data:{source:{select:{query:"SELECT GUID,CODE,TITLE,NAME,LAST_NAME,[TYPE_NAME],[GENUS_NAME] FROM CUSTOMER_VW_01 WHERE UPPER(CODE) LIKE UPPER(@VAL) OR UPPER(TITLE) LIKE UPPER(@VAL)",param:["VAL:string|50"]},sql:this.core.sql}},button:{id:"01",icon:"more",onClick:function(){console.log(1111)}}},m.createElement(Z.sg,{dataField:"CODE",caption:this.t("pg_txtCode.clmCode"),width:150}),m.createElement(Z.sg,{dataField:"TITLE",caption:this.t("pg_txtCode.clmTitle"),width:300,defaultSortOrder:"asc"}),m.createElement(Z.sg,{dataField:"NAME",caption:this.t("pg_txtCode.clmName"),width:300,defaultSortOrder:"asc"}),m.createElement(Z.sg,{dataField:"LAST_NAME",caption:this.t("pg_txtCode.clmLastName"),width:300,defaultSortOrder:"asc"}))),m.createElement(v.Item,null,m.createElement(v.Label,{text:this.t("txtTitle"),alignment:"right"}),m.createElement(y.ZP,{id:"txtTitle",parent:this,simple:!0,dt:{data:this.customerObj.dt("CUSTOMERS"),field:"TITLE"},onChange:(0,a.Z)(p().mark((function e(){return p().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:case"end":return e.stop()}}),e)}))).bind(this),param:this.param.filter({ELEMENT:"txtTitle",USERS:this.user.CODE}),access:this.access.filter({ELEMENT:"txtTitle",USERS:this.user.CODE})})))),m.createElement("div",{className:"row px-2 pt-2"},m.createElement("div",{className:"col-12"},m.createElement(S(),{height:"100%",onItemRendered:this._onItemRendered},m.createElement(v.Item,{title:this.t("tabTitleAdress")},m.createElement("div",{className:"row px-2 py-2"},m.createElement("div",{className:"col-12"},m.createElement(g(),null,m.createElement(v.Item,{location:"after"},m.createElement(O.Button,{icon:"add",onClick:(0,a.Z)(p().mark((function e(){return p().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t.txtPopAdress.value="",t.cmbPopZipcode.value="",t.cmbPopCity.value="",t.cmbPopCountry.value="",t.popAdress.show();case 5:case"end":return e.stop()}}),e)})))}))))),m.createElement("div",{className:"row px-2 py-2"},m.createElement("div",{className:"col-12"},m.createElement(Z.ZP,{parent:this,id:"grdAdress",showBorders:!0,columnsAutoWidth:!0,allowColumnReordering:!0,allowColumnResizing:!0,height:"100%",width:"100%",dbApply:!1},m.createElement(Z.Po,{defaultPageSize:5}),m.createElement(Z.LO,{mode:"cell",allowUpdating:!0,allowDeleting:!0}),m.createElement(Z.sg,{dataField:"ADRESS",caption:this.t("grdAdress.clmAdress")}),m.createElement(Z.sg,{dataField:"ZIPCODE",caption:this.t("grdAdress.clmZipcode")}),m.createElement(Z.sg,{dataField:"CITY",caption:this.t("grdAdress.clmCity")}),m.createElement(Z.sg,{dataField:"COUNTRY",caption:this.t("grdAdress.clmCountry")}))))))))),m.createElement("div",null,m.createElement(k.ZP,{parent:this,id:"popAdress",visible:!1,showCloseButton:!0,showTitle:!0,title:this.t("popAdress.title"),container:"#root",width:"500",height:"350",position:{of:"#root"}},m.createElement(x(),{colCount:1,height:"fit-content"},m.createElement(v.Item,null,m.createElement(v.Label,{text:this.t("popAdress.txtPopAdress"),alignment:"right"}),m.createElement(y.ZP,{id:"txtPopAdress",parent:this,simple:!0})),m.createElement(v.Item,null,m.createElement(v.Label,{text:this.t("popAdress.cmbPopZipcode"),alignment:"right"}),m.createElement(P.ZP,{simple:!0,parent:this,id:"cmbPopZipcode",displayExpr:"ZIPNAME",valueExpr:"ZIPCODE",value:"",searchEnabled:!0,onValueChanged:(0,a.Z)(p().mark((function e(){return p().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:case"end":return e.stop()}}),e)}))).bind(this),pageSize:50,notRefresh:!0,data:{source:{select:{query:"SELECT [COUNTRY_CODE],[ZIPCODE],[PLACE],ZIPCODE + ' ' + PLACE AS ZIPNAME  FROM [dbo].[ZIPCODE]"},sql:this.core.sql}}})),m.createElement(v.Item,null,m.createElement(v.Label,{text:this.t("popAdress.cmbPopCity"),alignment:"right"}),m.createElement(P.ZP,{simple:!0,parent:this,id:"cmbPopCity",displayExpr:"CITYNAME",valueExpr:"PLACE",value:"",searchEnabled:!0,pageSize:50,notRefresh:!0,data:{source:{select:{query:"SELECT COUNTRY_CODE,ZIPCODE,PLACE,PLACE + ' ' + ZIPCODE AS CITYNAME  FROM [dbo].[ZIPCODE]"},sql:this.core.sql}}})),m.createElement(v.Item,null,m.createElement(v.Label,{text:this.t("popAdress.cmbPopCountry"),alignment:"right"}),m.createElement(P.ZP,{simple:!0,parent:this,id:"cmbPopCountry",displayExpr:"NAME",valueExpr:"CODE",value:"FR",searchEnabled:!0,data:{source:{select:{query:"SELECT CODE,NAME FROM COUNTRY ORDER BY NAME ASC"},sql:this.core.sql}}})),m.createElement(v.Item,null,m.createElement("div",{className:"row"},m.createElement("div",{className:"col-6"},m.createElement(D.Z,{text:this.lang.t("btnSave"),type:"normal",stylingMode:"contained",width:"100%",onClick:(0,a.Z)(p().mark((function e(){var n;return p().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:(n=T({},t.customerObj.customerAdress.empty)).TYPE=0,n.ADRESS=t.txtPopAdress.value,n.ZIPCODE=t.cmbPopZipcode.value,n.CITY=t.cmbPopCity.value,n.COUNTRY=t.cmbPopCountry.value,n.CUSTOMER=t.customerObj.dt()[0].GUID,t.customerObj.customerAdress.addEmpty(n),t.popAdress.hide();case 9:case"end":return e.stop()}}),e)})))})),m.createElement("div",{className:"col-6"},m.createElement(D.Z,{text:this.lang.t("btnCancel"),type:"normal",stylingMode:"contained",width:"100%",onClick:function(){t.popAdress.hide()}})))))))))}}]),L}(m.PureComponent)}}]);