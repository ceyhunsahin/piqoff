"use strict";(self.webpackChunkwww=self.webpackChunkwww||[]).push([[2670],{22670:(t,e,n)=>{n.r(e),n.d(e,{default:()=>F});var a=n(4942),E=n(15861),r=n(15671),i=n(43144),s=n(97326),l=n(60136),c=n(82963),o=n(61120),u=n(64687),d=n.n(u),h=n(67294),I=n(73364),m=n(5577),T=n(30381),R=n.n(T),p=n(42866),S=n.n(p),C=n(53221),b=n.n(C),D=n(25552),O=n.n(D),_=(n(91686),n(30886)),N=n(99846),A=(n(5083),n(99077)),U=n(55585),f=n(417),L=n(32175),g=n(18405),M=n(73682),x=n(90428),v=(n(57941),n(60547));function P(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);e&&(a=a.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,a)}return n}function w(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?P(Object(n),!0).forEach((function(e){(0,a.Z)(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):P(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}n(17276),n(51166);var F=function(t){(0,l.Z)(y,t);var e,n,a,u,T,p,C,P,F,G,k=(F=y,G=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}(),function(){var t,e=(0,o.Z)(F);if(G){var n=(0,o.Z)(this).constructor;t=Reflect.construct(e,arguments,n)}else t=e.apply(this,arguments);return(0,c.Z)(this,t)});function y(t){var e;return(0,r.Z)(this,y),(e=k.call(this,t)).core=I.Z.instance.core,e.prmObj=e.param.filter({TYPE:1,USERS:e.user.CODE}),e.acsobj=e.access.filter({TYPE:1,USERS:e.user.CODE}),e.lblObj=new m.vN,e.mainLblObj=new m.f5,e.pageCount=0,e.tabIndex=t.data.tabkey,e._cellRoleRender=e._cellRoleRender.bind((0,s.Z)(e)),e.frmOutwas=void 0,e}return(0,i.Z)(y,[{key:"componentDidMount",value:(P=(0,E.Z)(d().mark((function t(){return d().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,this.core.util.waitUntil(0);case 2:this.init();case 3:case"end":return t.stop()}}),t,this)}))),function(){return P.apply(this,arguments)})},{key:"init",value:(C=(0,E.Z)(d().mark((function t(){var e,n=this;return d().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return this.lblObj.clearAll(),this.mainLblObj.clearAll(),this.lblObj.ds.on("onAddRow",(function(t,e){"new"==e.stat&&(n.btnNew.setState({disabled:!1}),n.btnBack.setState({disabled:!1}),n.btnNew.setState({disabled:!1}),n.btnBack.setState({disabled:!0}),n.btnSave.setState({disabled:!1}),n.btnPrint.setState({disabled:!1}))})),this.lblObj.ds.on("onEdit",(function(t,e){"edit"==e.rowData.stat&&(n.btnBack.setState({disabled:!1}),n.btnNew.setState({disabled:!0}),n.btnSave.setState({disabled:!1}),n.btnCopy.setState({disabled:!1}),n.btnPrint.setState({disabled:!1}),e.rowData.CUSER=n.user.CODE)})),this.lblObj.ds.on("onRefresh",(function(t){n.btnBack.setState({disabled:!0}),n.btnNew.setState({disabled:!1}),n.btnSave.setState({disabled:!0}),n.btnPrint.setState({disabled:!1})})),this.lblObj.ds.on("onDelete",(function(t){n.btnBack.setState({disabled:!1}),n.btnNew.setState({disabled:!1}),n.btnSave.setState({disabled:!1}),n.btnPrint.setState({disabled:!1})})),(e=w({},this.lblObj.empty)).REF=this.user.NAME,this.mainLblObj.addEmpty(e),this.txtRef.readOnly=!1,this.txtRefno.readOnly=!1,this.dtSelectChange.value=R()(new Date).format("YYYY-MM-DD"),this.txtRef.readOnly=!0,this.calculateCount(),t.next=15,this.grdLabelQueue.dataRefresh({source:this.lblObj.dt("LABEL_QUEUE")});case 15:this.txtRef.props.onChange();case 16:case"end":return t.stop()}}),t,this)}))),function(){return C.apply(this,arguments)})},{key:"getDoc",value:(p=(0,E.Z)(d().mark((function t(e){return d().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return this.lblObj.clearAll(),this.mainLblObj.clearAll(),t.next=4,this.lblObj.load({GUID:e});case 4:this.mainLblObj.load({GUID:e}),this.txtRef.readOnly=!0,this.txtRefno.readOnly=!0;case 7:case"end":return t.stop()}}),t,this)}))),function(t){return p.apply(this,arguments)})},{key:"getDocs",value:(T=(0,E.Z)(d().mark((function t(e){var n,a,E,r=this;return d().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n={query:"SELECT GUID,CASE STATUS WHEN 1 THEN 'OK' WHEN 0 THEN 'X' END AS STATUS,REF,REF_NO,CONVERT(NVARCHAR,CDATE,104) AS DOC_DATE_CONVERT,ISNULL((SELECT COUNT(CODE) FROM ITEM_LABEL_QUEUE_VW_01 WHERE ITEM_LABEL_QUEUE_VW_01.GUID = LABEL_QUEUE.GUID),0) AS COUNT FROM LABEL_QUEUE WHERE STATUS IN("+e+") AND REF <> 'SPECIAL' "},t.next=3,this.core.sql.execute(n);case 3:return a=t.sent,E=[],a.result.recordset.length>0&&(E=a.result.recordset),t.next=8,this.pg_Docs.setData(E);case 8:this.pg_Docs.show(),this.pg_Docs.onClick=function(t){console.log(t),t.length>0&&r.getDoc(t[0].GUID)};case 10:case"end":return t.stop()}}),t,this)}))),function(t){return T.apply(this,arguments)})},{key:"getDocsCombine",value:(u=(0,E.Z)(d().mark((function t(e){var n,a,r,i=this;return d().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n={query:"SELECT GUID,CASE STATUS WHEN 1 THEN 'OK' WHEN 0 THEN 'X' END AS STATUS,REF,REF_NO,CONVERT(NVARCHAR,CDATE,104) AS DOC_DATE_CONVERT,ISNULL((SELECT COUNT(CODE) FROM ITEM_LABEL_QUEUE_VW_01 WHERE ITEM_LABEL_QUEUE_VW_01.GUID = LABEL_QUEUE.GUID),0) AS COUNT FROM LABEL_QUEUE WHERE STATUS IN("+e+") AND REF <> 'SPECIAL' "},t.next=3,this.core.sql.execute(n);case 3:return a=t.sent,r=[],a.result.recordset.length>0&&(r=a.result.recordset),t.next=8,this.pg_DocsCombine.setData(r);case 8:this.pg_DocsCombine.show(),this.pg_DocsCombine.onClick=function(){var t=(0,E.Z)(d().mark((function t(e){var n,a,E,r,s;return d().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!(e.length>0)){t.next=13;break}n=0;case 2:if(!(n<e.length)){t.next=13;break}return a=new m.vN,t.next=6,a.load({GUID:e[n].GUID});case 6:return E={query:"UPDATE LABEL_QUEUE SET STATUS = 1 WHERE GUID = @GUID",param:["GUID:string|50"],value:[e[n].GUID]},t.next=9,i.core.sql.execute(E);case 9:for(r=0;r<a.dt().length;r++)(s=w({},i.lblObj.empty)).REF=i.mainLblObj.dt()[0].REF,s.REF_NO=i.mainLblObj.dt()[0].REF_NO,i.lblObj.addEmpty(s),i.addItem(a.dt()[r],i.lblObj.dt().length-1);case 10:n++,t.next=2;break;case 13:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}();case 10:case"end":return t.stop()}}),t,this)}))),function(t){return u.apply(this,arguments)})},{key:"AddWizardItems",value:(a=(0,E.Z)(d().mark((function t(){var e,n,a,E,r,i,s,l,c,o,u,m,T,R,p,S,C,b,D,O;return d().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(1!=this.chkLastChange.value){t.next=19;break}return e={query:"SELECT  *, CASE WHEN UNDER_UNIT_VALUE =0  THEN 0 ELSE ROUND((PRICE * UNDER_UNIT_VALUE),2) END AS UNDER_UNIT_PRICE FROM  (  SELECT GUID,   CDATE, CODE,   NAME,   ISNULL((SELECT TOP 1 BARCODE FROM ITEM_BARCODE WHERE ITEM = ITEMS_VW_01.GUID ORDER BY CDATE DESC),'') AS BARCODE,   ISNULL((SELECT TOP 1 CODE FROM ITEM_MULTICODE WHERE ITEM = ITEMS_VW_01.GUID ORDER BY LDATE DESC),ITEMS_VW_01.CODE) AS MULTICODE,   MAIN_GRP AS ITEM_GRP,   MAIN_GRP_NAME AS ITEM_GRP_NAME,   (SELECT [dbo].[FN_PRICE_SALE](GUID,1,GETDATE(),'00000000-0000-0000-0000-000000000000')) AS PRICE  , ISNULL((SELECT TOP 1 FACTOR FROM ITEM_UNIT WHERE TYPE = 1 AND ITEM_UNIT.ITEM = ITEMS_VW_01.GUID),0) AS UNDER_UNIT_VALUE FROM ITEMS_VW_01  WHERE (SELECT TOP 1 LDATE FROM LABEL_QUEUE ORDER BY LDATE DESC) < (SELECT TOP 1 LDATE FROM ITEM_PRICE WHERE TYPE = 0  AND ITEM = ITEMS_VW_01.GUID ORDER BY LDATE DESC) OR  (SELECT TOP 1 LDATE FROM LABEL_QUEUE ORDER BY LDATE DESC) < ITEMS_VW_01.LDATE) AS TMP "},I.Z.instance.setState({isExecute:!0}),t.next=5,this.core.sql.execute(e);case 5:if(n=t.sent,I.Z.instance.setState({isExecute:!1}),!(n.result.recordset.length>0)){t.next=14;break}for(a=0;a<n.result.recordset.length;a++)this.addAutoItem(n.result.recordset[a]);return t.next=11,this.grdLabelQueue.devGrid.deleteRow(0);case 11:this.popWizard.hide(),t.next=17;break;case 14:return E={id:"msgItemNotFound",showTitle:!0,title:this.t("msgItemNotFound.title"),showCloseButton:!0,width:"500px",height:"200px",button:[{id:"btn01",caption:this.t("msgItemNotFound.btn01"),location:"after"}],content:h.createElement("div",{style:{textAlign:"center",fontSize:"20px"}},this.t("msgItemNotFound.msg"))},t.next=17,(0,v.W)(E);case 17:case 36:case 55:case 74:t.next=93;break;case 19:if(1!=this.chkSelectChange.value){t.next=38;break}return r={query:"SELECT  *, CASE WHEN UNDER_UNIT_VALUE =0  THEN 0 ELSE ROUND((PRICE * UNDER_UNIT_VALUE),2) END AS UNDER_UNIT_PRICE FROM  (  SELECT GUID,   CDATE, CODE,   NAME,   ISNULL((SELECT TOP 1 BARCODE FROM ITEM_BARCODE WHERE ITEM = ITEMS_VW_01.GUID ORDER BY CDATE DESC),'') AS BARCODE,   ISNULL((SELECT TOP 1 CODE FROM ITEM_MULTICODE WHERE ITEM = ITEMS_VW_01.GUID ORDER BY LDATE DESC),ITEMS_VW_01.CODE) AS MULTICODE,   MAIN_GRP AS ITEM_GRP,   MAIN_GRP_NAME AS ITEM_GRP_NAME,   (SELECT [dbo].[FN_PRICE_SALE](GUID,1,GETDATE(),'00000000-0000-0000-0000-000000000000')) AS PRICE  , ISNULL((SELECT TOP 1 FACTOR FROM ITEM_UNIT WHERE TYPE = 1 AND ITEM_UNIT.ITEM = ITEMS_VW_01.GUID),0) AS UNDER_UNIT_VALUE FROM ITEMS_VW_01  WHERE @DATE < (SELECT TOP 1 LDATE FROM ITEM_PRICE WHERE TYPE = 0  AND ITEM = ITEMS_VW_01.GUID ORDER BY LDATE DESC) OR @DATE < ITEMS_VW_01.LDATE) AS TMP ",param:["DATE:date"],value:[this.dtSelectChange.value]},I.Z.instance.setState({isExecute:!0}),t.next=24,this.core.sql.execute(r);case 24:if(i=t.sent,I.Z.instance.setState({isExecute:!1}),!(i.result.recordset.length>0)){t.next=33;break}for(s=0;s<i.result.recordset.length;s++)this.addAutoItem(i.result.recordset[s]);return t.next=30,this.grdLabelQueue.devGrid.deleteRow(0);case 30:this.popWizard.hide(),t.next=36;break;case 33:return l={id:"msgItemNotFound",showTitle:!0,title:this.t("msgItemNotFound.title"),showCloseButton:!0,width:"500px",height:"200px",button:[{id:"btn01",caption:this.t("msgItemNotFound.btn01"),location:"after"}],content:h.createElement("div",{style:{textAlign:"center",fontSize:"20px"}},this.t("msgItemNotFound.msg"))},t.next=36,(0,v.W)(l);case 38:if(1!=this.chkGroup.value){t.next=57;break}return c={query:"SELECT  *, CASE WHEN UNDER_UNIT_VALUE =0  THEN 0 ELSE ROUND((PRICE * UNDER_UNIT_VALUE),2) END AS UNDER_UNIT_PRICE FROM  (  SELECT GUID,   CDATE, CODE,   NAME,   ISNULL((SELECT TOP 1 BARCODE FROM ITEM_BARCODE WHERE ITEM = ITEMS_VW_01.GUID ORDER BY CDATE DESC),'') AS BARCODE,   ISNULL((SELECT TOP 1 CODE FROM ITEM_MULTICODE WHERE ITEM = ITEMS_VW_01.GUID ORDER BY LDATE DESC),ITEMS_VW_01.CODE) AS MULTICODE,   MAIN_GRP AS ITEM_GRP,   MAIN_GRP_NAME AS ITEM_GRP_NAME,   (SELECT [dbo].[FN_PRICE_SALE](GUID,1,GETDATE(),'00000000-0000-0000-0000-000000000000')) AS PRICE  , ISNULL((SELECT TOP 1 FACTOR FROM ITEM_UNIT WHERE TYPE = 1 AND ITEM_UNIT.ITEM = ITEMS_VW_01.GUID),0) AS UNDER_UNIT_VALUE FROM ITEMS_VW_01  WHERE  MAIN_GRP = @GROUP) AS TMP ",param:["GROUP:string|25"],value:[this.cmbGroup.value]},I.Z.instance.setState({isExecute:!0}),t.next=43,this.core.sql.execute(c);case 43:if(o=t.sent,I.Z.instance.setState({isExecute:!1}),!(o.result.recordset.length>0)){t.next=52;break}for(u=0;u<o.result.recordset.length;u++)this.addAutoItem(o.result.recordset[u]);return t.next=49,this.grdLabelQueue.devGrid.deleteRow(0);case 49:this.popWizard.hide(),t.next=55;break;case 52:return m={id:"msgItemNotFound",showTitle:!0,title:this.t("msgItemNotFound.title"),showCloseButton:!0,width:"500px",height:"200px",button:[{id:"btn01",caption:this.t("msgItemNotFound.btn01"),location:"after"}],content:h.createElement("div",{style:{textAlign:"center",fontSize:"20px"}},this.t("msgItemNotFound.msg"))},t.next=55,(0,v.W)(m);case 57:if(1!=this.chkCustomer.value){t.next=76;break}return T={query:"SELECT  *, CASE WHEN UNDER_UNIT_VALUE =0  THEN 0 ELSE ROUND((PRICE * UNDER_UNIT_VALUE),2) END AS UNDER_UNIT_PRICE FROM  (  SELECT GUID,   CDATE, CODE,   NAME,   ISNULL((SELECT TOP 1 BARCODE FROM ITEM_BARCODE WHERE ITEM = ITEMS_VW_01.GUID ORDER BY CDATE DESC),'') AS BARCODE,   ISNULL((SELECT TOP 1 CODE FROM ITEM_MULTICODE WHERE ITEM = ITEMS_VW_01.GUID ORDER BY LDATE DESC),ITEMS_VW_01.CODE) AS MULTICODE,   MAIN_GRP AS ITEM_GRP,   MAIN_GRP_NAME AS ITEM_GRP_NAME,   (SELECT [dbo].[FN_PRICE_SALE](GUID,1,GETDATE(),'00000000-0000-0000-0000-000000000000')) AS PRICE  , ISNULL((SELECT TOP 1 FACTOR FROM ITEM_UNIT WHERE TYPE = 1 AND ITEM_UNIT.ITEM = ITEMS_VW_01.GUID),0) AS UNDER_UNIT_VALUE FROM ITEMS_VW_01  WHERE  ISNULL((SELECT TOP 1 [CODE] FROM ITEM_MULTICODE WHERE ITEM = ITEMS_VW_01.GUID AND CUSTOMER = @CUSTOMER),'') <> '') AS TMP ",param:["CUSTOMER:string|50"],value:[this.cmbCustomer.value]},I.Z.instance.setState({isExecute:!0}),t.next=62,this.core.sql.execute(T);case 62:if(R=t.sent,I.Z.instance.setState({isExecute:!1}),!(R.result.recordset.length>0)){t.next=71;break}for(p=0;p<R.result.recordset.length;p++)this.addAutoItem(R.result.recordset[p]);return t.next=68,this.grdLabelQueue.devGrid.deleteRow(0);case 68:this.popWizard.hide(),t.next=74;break;case 71:return S={id:"msgItemNotFound",showTitle:!0,title:this.t("msgItemNotFound.title"),showCloseButton:!0,width:"500px",height:"200px",button:[{id:"btn01",caption:this.t("msgItemNotFound.btn01"),location:"after"}],content:h.createElement("div",{style:{textAlign:"center",fontSize:"20px"}},this.t("msgItemNotFound.msg"))},t.next=74,(0,v.W)(S);case 76:if(1!=this.chkAllItems.value){t.next=93;break}return C={query:"SELECT  *, CASE WHEN UNDER_UNIT_VALUE =0  THEN 0 ELSE ROUND((PRICE * UNDER_UNIT_VALUE),2) END AS UNDER_UNIT_PRICE FROM  (  SELECT GUID,   CDATE, CODE,   NAME,   ISNULL((SELECT TOP 1 BARCODE FROM ITEM_BARCODE WHERE ITEM = ITEMS_VW_01.GUID ORDER BY CDATE DESC),'') AS BARCODE,   ISNULL((SELECT TOP 1 CODE FROM ITEM_MULTICODE WHERE ITEM = ITEMS_VW_01.GUID ORDER BY LDATE DESC),ITEMS_VW_01.CODE) AS MULTICODE,   MAIN_GRP AS ITEM_GRP,   MAIN_GRP_NAME AS ITEM_GRP_NAME,   (SELECT [dbo].[FN_PRICE_SALE](GUID,1,GETDATE(),'00000000-0000-0000-0000-000000000000')) AS PRICE  , ISNULL((SELECT TOP 1 FACTOR FROM ITEM_UNIT WHERE TYPE = 1 AND ITEM_UNIT.ITEM = ITEMS_VW_01.GUID),0) AS UNDER_UNIT_VALUE FROM ITEMS_VW_01   ) AS TMP "},I.Z.instance.setState({isExecute:!0}),t.next=81,this.core.sql.execute(C);case 81:if(b=t.sent,I.Z.instance.setState({isExecute:!1}),!(b.result.recordset.length>0)){t.next=90;break}for(D=0;D<b.result.recordset.length;D++)this.addAutoItem(b.result.recordset[D]);return t.next=87,this.grdLabelQueue.devGrid.deleteRow(0);case 87:this.popWizard.hide(),t.next=93;break;case 90:return O={id:"msgItemNotFound",showTitle:!0,title:this.t("msgItemNotFound.title"),showCloseButton:!0,width:"500px",height:"200px",button:[{id:"btn01",caption:this.t("msgItemNotFound.btn01"),location:"after"}],content:h.createElement("div",{style:{textAlign:"center",fontSize:"20px"}},this.t("msgItemNotFound.msg"))},t.next=93,(0,v.W)(O);case 93:case"end":return t.stop()}}),t,this)}))),function(){return a.apply(this,arguments)})},{key:"_cellRoleRender",value:function(t){var e=this;if("CODE"==t.column.dataField)return h.createElement(N.ZP,{id:"txtGrdItemsCode"+t.rowIndex,parent:this,simple:!0,upper:this.sysParam.filter({ID:"onlyBigChar",USERS:this.user.CODE}).getValue().value,value:t.value,onKeyDown:function(){var n=(0,E.Z)(d().mark((function n(a){return d().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if("F10"!=a.event.key&&"ArrowRight"!=a.event.key){n.next=4;break}return n.next=3,e.pg_txtItemsCode.setVal(t.value);case 3:e.pg_txtItemsCode.onClick=function(){var n=(0,E.Z)(d().mark((function n(a){var E,r;return d().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(1==a.length)e.addItem(a[0],t.rowIndex);else if(a.length>1)for(E=0;E<a.length;E++)0==E?e.addItem(a[E],t.rowIndex):((r=w({},e.lblObj.empty)).REF=e.mainLblObj.dt()[0].REF,r.REF_NO=e.mainLblObj.dt()[0].REF_NO,e.lblObj.addEmpty(r),e.addItem(a[E],e.lblObj.dt().length-1));case 1:case"end":return n.stop()}}),n)})));return function(t){return n.apply(this,arguments)}}();case 4:case"end":return n.stop()}}),n)})));return function(t){return n.apply(this,arguments)}}(),onValueChanged:function(e){t.value=e.value},onChange:function(){var n=(0,E.Z)(d().mark((function n(a){var E,r,i;return d().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(void 0!==a.event.isTrusted){n.next=12;break}return E={query:"SELECT  *, CASE WHEN UNDER_UNIT_VALUE =0 THEN 0 ELSE ROUND((PRICE * UNDER_UNIT_VALUE),2) END AS UNDER_UNIT_PRICE FROM (  SELECT GUID,  CODE,  NAME,  ISNULL((SELECT TOP 1 BARCODE FROM ITEM_BARCODE WHERE ITEM = ITEMS_VW_01.GUID ORDER BY CDATE DESC),'') AS BARCODE,  ISNULL((SELECT TOP 1 CODE FROM ITEM_MULTICODE WHERE ITEM = ITEMS_VW_01.GUID ORDER BY LDATE DESC),ITEMS_VW_01.CODE) AS MULTICODE,   MAIN_GRP AS ITEM_GRP,  MAIN_GRP_NAME AS ITEM_GRP_NAME,  (SELECT [dbo].[FN_PRICE_SALE](GUID,1,GETDATE(),'00000000-0000-0000-0000-000000000000')) AS PRICE  ,ISNULL((SELECT TOP 1 FACTOR FROM ITEM_UNIT WHERE TYPE = 1 AND ITEM_UNIT.ITEM = ITEMS_VW_01.GUID),0) AS UNDER_UNIT_VALUE FROM ITEMS_VW_01 WHERE ISNULL((SELECT TOP 1 BARCODE FROM ITEM_BARCODE WHERE ITEM = ITEMS_VW_01.GUID),'') <> '') AS TMP WHERE CODE = @CODE  ",param:["CODE:string|50"],value:[a.component._changedValue]},n.next=4,e.core.sql.execute(E);case 4:if(!((r=n.sent).result.recordset.length>0)){n.next=9;break}e.addItem(r.result.recordset[0],t.rowIndex),n.next=12;break;case 9:return i={id:"msgItemNotFound",showTitle:!0,title:e.t("msgItemNotFound.title"),showCloseButton:!0,width:"500px",height:"200px",button:[{id:"btn01",caption:e.t("msgItemNotFound.btn01"),location:"after"}],content:h.createElement("div",{style:{textAlign:"center",fontSize:"20px"}},e.t("msgItemNotFound.msg"))},n.next=12,(0,v.W)(i);case 12:case"end":return n.stop()}}),n)})));return function(t){return n.apply(this,arguments)}}().bind(this),button:[{id:"01",icon:"more",onClick:function(){e.pg_txtItemsCode.show(),e.pg_txtItemsCode.onClick=function(){var n=(0,E.Z)(d().mark((function n(a){var E,r;return d().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(1==a.length)e.addItem(a[0],t.rowIndex);else if(a.length>1)for(E=0;E<a.length;E++)0==E?e.addItem(a[E],t.rowIndex):((r=w({},e.lblObj.empty)).REF=e.mainLblObj.dt()[0].REF,r.REF_NO=e.mainLblObj.dt()[0].REF_NO,e.lblObj.addEmpty(r),e.addItem(a[E],e.lblObj.dt().length-1));case 1:case"end":return n.stop()}}),n)})));return function(t){return n.apply(this,arguments)}}()}}]})}},{key:"addItem",value:(n=(0,E.Z)(d().mark((function t(e,n){var a,E;return d().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:a=0;case 1:if(!(a<this.lblObj.dt().length)){t.next=17;break}if(this.lblObj.dt()[a].CODE!=e.CODE){t.next=14;break}return E={id:"msgCombineItem",showTitle:!0,title:this.t("msgCombineItem.title"),showCloseButton:!0,width:"500px",height:"200px",button:[{id:"btn01",caption:this.t("msgCombineItem.btn01"),location:"before"},{id:"btn02",caption:this.t("msgCombineItem.btn02"),location:"after"}],content:h.createElement("div",{style:{textAlign:"center",fontSize:"20px"}},this.t("msgCombineItem.msg"))},t.next=6,(0,v.W)(E);case 6:if("btn01"!=t.sent){t.next=13;break}return t.next=10,this.grdLabelQueue.devGrid.deleteRow(n);case 10:return t.abrupt("return");case 13:return t.abrupt("break",17);case 14:a++,t.next=1;break;case 17:this.lblObj.dt()[n].CODE=e.CODE,this.lblObj.dt()[n].MULTICODE=e.MULTICODE,this.lblObj.dt()[n].BARCODE=e.BARCODE,this.lblObj.dt()[n].NAME=e.NAME,this.lblObj.dt()[n].ITEM_GRP=e.ITEM_GRP,this.lblObj.dt()[n].ITEM_GRP_NAME=e.ITEM_GRP_NAME,this.lblObj.dt()[n].CUSTOMER_NAME=e.CUSTOMER_NAME,this.lblObj.dt()[n].PRICE=e.PRICE,this.lblObj.dt()[n].UNDER_UNIT_VALUE=e.UNDER_UNIT_VALUE,this.lblObj.dt()[n].UNDER_UNIT_PRICE=e.UNDER_UNIT_PRICE,this.lblObj.dt()[n].UNDER_UNIT_SYMBOL=e.UNDER_UNIT_SYMBOL,this.lblObj.dt()[n].PRICE=e.PRICE,this.lblObj.dt()[n].LINE_NO=n+1,this.calculateCount();case 31:case"end":return t.stop()}}),t,this)}))),function(t,e){return n.apply(this,arguments)})},{key:"addAutoItem",value:(e=(0,E.Z)(d().mark((function t(e){var n;return d().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:(n=w({},this.lblObj.empty)).REF=this.mainLblObj.dt()[0].REF,n.REF_NO=this.mainLblObj.dt()[0].REF_NO,n.CODE=e.CODE,n.BARCODE=e.BARCODE,n.NAME=e.NAME,n.ITEM_GRP=e.ITEM_GRP,n.ITEM_GRP_NAME=e.ITEM_GRP_NAME,n.CUSTOMER_NAME=e.CUSTOMER_NAME,n.PRICE=e.PRICE,n.UNDER_UNIT_VALUE=e.UNDER_UNIT_VALUE,n.UNDER_UNIT_PRICE=e.UNDER_UNIT_PRICE,n.UNDER_UNIT_SYMBOL=e.UNDER_UNIT_SYMBOL,n.PRICE=e.PRICE,n.LINE_NO=this.lblObj.dt().length+1,this.lblObj.addEmpty(n),this.calculateCount();case 17:case"end":return t.stop()}}),t,this)}))),function(t){return e.apply(this,arguments)})},{key:"calculateCount",value:function(){this.txtPage.value=Math.ceil(this.lblObj.dt().length/this.pageCount),""==this.txtPage.value&&(this.txtPage.value=this.t("validDesign")),0==this.pageCount?(this.txtPage.value=this.t("validDesign"),this.txtFreeLabel.value=this.t("validDesign")):this.txtFreeLabel.value=this.pageCount-this.lblObj.dt().length%this.pageCount,this.txtLineCount.value=this.lblObj.dt().length}},{key:"render",value:function(){var t,e,n=this;return h.createElement("div",null,h.createElement(S(),null,h.createElement("div",{className:"row px-2 pt-2"},h.createElement("div",{className:"col-12"},h.createElement(b(),null,h.createElement(D.Item,{location:"after",locateInMenu:"auto"},h.createElement(M.Z,{id:"btnWizard",parent:this,icon:"tips",type:"default",onClick:function(){n.popWizard.show()}})),h.createElement(D.Item,{location:"after",locateInMenu:"auto"},h.createElement(M.Z,{id:"btnBack",parent:this,icon:"revert",type:"default",onClick:function(){n.getDoc(n.lblObj.dt()[0].GUID)}})),h.createElement(D.Item,{location:"after",locateInMenu:"auto"},h.createElement(M.Z,{id:"btnNew",parent:this,icon:"file",type:"default",onClick:function(){n.init()}})),h.createElement(D.Item,{location:"after",locateInMenu:"auto"},h.createElement(M.Z,{id:"btnSave",parent:this,icon:"floppy",type:"default",onClick:function(){var t=(0,E.Z)(d().mark((function t(e){var a,E,r;return d().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(""!=n.lblObj.dt()[n.lblObj.dt().length-1].CODE){t.next=3;break}return t.next=3,n.grdLabelQueue.devGrid.deleteRow(n.lblObj.dt().length-1);case 3:return a={id:"msgSave",showTitle:!0,title:n.t("msgSave.title"),showCloseButton:!0,width:"500px",height:"200px",button:[{id:"btn01",caption:n.t("msgSave.btn01"),location:"before"},{id:"btn02",caption:n.t("msgSave.btn02"),location:"after"}],content:h.createElement("div",{style:{textAlign:"center",fontSize:"20px"}},n.t("msgSave.msg"))},t.next=6,(0,v.W)(a);case 6:if("btn01"!=t.sent){t.next=25;break}return E={data:n.lblObj.dt().toArray()},n.mainLblObj.dt()[0].DATA=JSON.stringify(E),r={id:"msgSaveResult",showTitle:!0,title:n.t("msgSave.title"),showCloseButton:!0,width:"500px",height:"200px",button:[{id:"btn01",caption:n.t("msgSave.btn01"),location:"after"}]},t.next=13,n.mainLblObj.save();case 13:if(t.t0=t.sent,0!=t.t0){t.next=22;break}return r.content=h.createElement("div",{style:{textAlign:"center",fontSize:"20px",color:"green"}},n.t("msgSaveResult.msgSuccess")),t.next=18,(0,v.W)(r);case 18:n.btnSave.setState({disabled:!0}),n.btnNew.setState({disabled:!1}),t.next=25;break;case 22:return r.content=h.createElement("div",{style:{textAlign:"center",fontSize:"20px",color:"red"}},n.t("msgSaveResult.msgFailed")),t.next=25,(0,v.W)(r);case 25:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()})),h.createElement(D.Item,{location:"after",locateInMenu:"auto"},h.createElement(M.Z,{id:"btnPrint",parent:this,icon:"print",type:"default",validationGroup:"frmLabelQeueu"+this.tabIndex,onClick:function(){var t=(0,E.Z)(d().mark((function t(e){var a,E,r,i;return d().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if("valid"!=e.validationGroup.validate().status){t.next=11;break}return a={query:"SELECT *, ISNULL((SELECT TOP 1 PATH FROM LABEL_DESIGN WHERE TAG = @DESIGN),'') AS PATH FROM  ITEM_LABEL_QUEUE_VW_01 WHERE GUID  = @GUID",param:["GUID:string|50","DESIGN:string|25"],value:[n.mainLblObj.dt()[0].GUID,n.cmbDesignList.value]},t.next=4,n.core.sql.execute(a);case 4:return E=t.sent,n.core.socket.emit("devprint","{TYPE:'REVIEW',PATH:'"+E.result.recordset[0].PATH.replaceAll("\\","/")+"',DATA:"+JSON.stringify(E.result.recordset)+"}",(function(t){if("ERR"!=t.split("|")[0]){var e=window.open("printview.html","_blank","width=900,height=1000,left=500");e.onload=function(){e.document.getElementById("view").innerHTML="<iframe src='data:application/pdf;base64,"+t.split("|")[1]+"' type='application/pdf' width='100%' height='100%'></iframe>"}}})),r={query:"UPDATE LABEL_QUEUE SET STATUS = 1 WHERE GUID = @GUID",param:["GUID:string|50"],value:[n.mainLblObj.dt()[0].GUID]},t.next=9,n.core.sql.execute(r);case 9:t.next=14;break;case 11:return i={id:"msgSaveValid",showTitle:!0,title:n.t("msgSaveValid.title"),showCloseButton:!0,width:"500px",height:"200px",button:[{id:"btn01",caption:n.t("msgSaveValid.btn01"),location:"after"}],content:h.createElement("div",{style:{textAlign:"center",fontSize:"20px"}},n.t("msgSaveValid.msg"))},t.next=14,(0,v.W)(i);case 14:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()})),h.createElement(D.Item,{location:"after",locateInMenu:"auto",widget:"dxButton",options:{type:"default",icon:"clear",onClick:(e=(0,E.Z)(d().mark((function t(){var e;return d().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return e={id:"msgClose",showTitle:!0,title:n.lang.t("msgWarning"),showCloseButton:!0,width:"500px",height:"200px",button:[{id:"btn01",caption:n.lang.t("btnYes"),location:"before"},{id:"btn02",caption:n.lang.t("btnNo"),location:"after"}],content:h.createElement("div",{style:{textAlign:"center",fontSize:"20px"}},n.lang.t("msgClose"))},t.next=3,(0,v.W)(e);case 3:"btn01"==t.sent&&I.Z.instance.panel.closePage();case 5:case"end":return t.stop()}}),t)}))),function(){return e.apply(this,arguments)})}})))),h.createElement("div",{className:"row px-2 pt-2"},h.createElement("div",{className:"col-12"},h.createElement(O(),{colCount:3,id:"frmLabelQeueu"},h.createElement(D.Item,null,h.createElement(D.Label,{text:this.t("txtRefRefno"),alignment:"right"}),h.createElement("div",{className:"row"},h.createElement("div",{className:"col-4 pe-0"},h.createElement(N.ZP,{id:"txtRef",parent:this,simple:!0,dt:{data:this.mainLblObj.dt("MAIN_LABEL_QUEUE"),field:"REF"},upper:this.sysParam.filter({ID:"onlyBigChar",USERS:this.user.CODE}).getValue().value,readOnly:!0,maxLength:32,onChange:(0,E.Z)(d().mark((function t(){var e,a;return d().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return e={query:"SELECT ISNULL(MAX(REF_NO) + 1,1) AS REF_NO FROM LABEL_QUEUE WHERE  REF = @REF ",param:["REF:string|25"],value:[n.txtRef.value]},t.next=3,n.core.sql.execute(e);case 3:(a=t.sent).result.recordset.length>0&&(n.txtRefno.value=a.result.recordset[0].REF_NO);case 5:case"end":return t.stop()}}),t)}))).bind(this),param:this.param.filter({ELEMENT:"txtRef",USERS:this.user.CODE}),access:this.access.filter({ELEMENT:"txtRef",USERS:this.user.CODE})},h.createElement(N.cX,{validationGroup:"frmLabelQeueu"+this.tabIndex},h.createElement(N.n2,{message:this.t("validRef")})))),h.createElement("div",{className:"col-5 ps-0"},h.createElement(N.ZP,{id:"txtRefno",parent:this,simple:!0,dt:{data:this.mainLblObj.dt("MAIN_LABEL_QUEUE"),field:"REF_NO"},upper:this.sysParam.filter({ID:"onlyBigChar",USERS:this.user.CODE}).getValue().value,readOnly:!0,button:[{id:"01",icon:"more",onClick:(t=(0,E.Z)(d().mark((function t(){return d().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:n.getDocs(0);case 1:case"end":return t.stop()}}),t)}))),function(){return t.apply(this,arguments)})},{id:"02",icon:"arrowdown",onClick:function(){n.txtRefno.value=Math.floor(Date.now()/1e3)}}],onChange:(0,E.Z)(d().mark((function t(){return d().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,n.checkDoc("00000000-0000-0000-0000-000000000000",n.txtRef.value,n.txtRefno.value);case 2:3==t.sent&&(n.txtRefno.value="");case 4:case"end":return t.stop()}}),t)}))).bind(this),param:this.param.filter({ELEMENT:"txtRefno",USERS:this.user.CODE}),access:this.access.filter({ELEMENT:"txtRefno",USERS:this.user.CODE})},h.createElement(N.cX,{validationGroup:"frmLabelQeueu"+this.tabIndex},h.createElement(N.n2,{message:this.t("validRefNo")}))))),h.createElement(f.Z,{id:"pg_Docs",parent:this,container:"#root",visible:!1,position:{of:"#root"},showTitle:!0,showBorders:!0,width:"90%",height:"90%",title:this.t("pg_Docs.title"),button:[{id:"01",icon:"more",onClick:function(){n.pg_Docs.hide(),n.getDocs("0,1")}}]},h.createElement(g.sg,{dataField:"REF",caption:this.t("pg_Docs.clmRef"),width:150,defaultSortOrder:"asc"}),h.createElement(g.sg,{dataField:"REF_NO",caption:this.t("pg_Docs.clmRefNo"),width:150,defaultSortOrder:"asc"}),h.createElement(g.sg,{dataField:"COUNT",caption:this.t("pg_Docs.clmCount"),width:150}),h.createElement(g.sg,{dataField:"DOC_DATE_CONVERT",caption:this.t("pg_Docs.clmDocDate"),width:250}),h.createElement(g.sg,{dataField:"STATUS",caption:this.t("pg_Docs.clmPrint"),width:150}))),h.createElement(D.Item,null,h.createElement(D.Label,{text:this.t("txtPage"),alignment:"right"}),h.createElement(N.ZP,{id:"txtPage",parent:this,simple:!0,upper:this.sysParam.filter({ID:"onlyBigChar",USERS:this.user.CODE}).getValue().value,readOnly:!0,param:this.param.filter({ELEMENT:"txtPage",USERS:this.user.CODE}),access:this.access.filter({ELEMENT:"txtPage",USERS:this.user.CODE})})),h.createElement(D.EmptyItem,null),h.createElement(D.Item,null,h.createElement(D.Label,{text:this.t("design"),alignment:"right"}),h.createElement(A.ZP,{simple:!0,parent:this,id:"cmbDesignList",notRefresh:!0,dt:{data:this.mainLblObj.dt("MAIN_LABEL_QUEUE"),field:"DESING"},displayExpr:"DESIGN_NAME",valueExpr:"TAG",value:"",searchEnabled:!0,onValueChanged:function(){var t=(0,E.Z)(d().mark((function t(e){var a;return d().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:for(a=0;a<n.cmbDesignList.data.datatable.length;a++)n.cmbDesignList.data.datatable[a].TAG==e.value&&(n.pageCount=n.cmbDesignList.data.datatable[a].PAGE_COUNT);n.calculateCount();case 2:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}().bind(this),data:{source:{select:{query:"SELECT TAG,DESIGN_NAME,PAGE_COUNT FROM [dbo].[LABEL_DESIGN] WHERE PAGE = '01'"},sql:this.core.sql}},param:this.param.filter({ELEMENT:"cmbDesignList",USERS:this.user.CODE}),access:this.access.filter({ELEMENT:"cmbDesignList",USERS:this.user.CODE})},h.createElement(N.cX,{validationGroup:"frmLabelQeueu"+this.tabIndex},h.createElement(N.n2,{message:this.t("validDesign")})))),h.createElement(D.Item,null,h.createElement(D.Label,{text:this.t("txtFreeLabel"),alignment:"right"}),h.createElement(N.ZP,{id:"txtFreeLabel",parent:this,simple:!0,readOnly:!0,param:this.param.filter({ELEMENT:"txtFreeLabel",USERS:this.user.CODE}),access:this.access.filter({ELEMENT:"txtFreeLabel",USERS:this.user.CODE})})),h.createElement(D.EmptyItem,null),h.createElement(D.Item,null,h.createElement(D.Label,{text:this.t("txtBarcode"),alignment:"right"}),h.createElement(N.ZP,{id:"txtBarcode",parent:this,simple:!0,onEnterKey:function(){var t=(0,E.Z)(d().mark((function t(e){var a,E,r,i;return d().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return a={query:"SELECT  *, CASE WHEN UNDER_UNIT_VALUE =0 THEN 0 ELSE ROUND((PRICE / UNDER_UNIT_VALUE),2) END AS UNDER_UNIT_PRICE FROM ( SELECT ITEMS.GUID, ITEM_BARCODE.CDATE, ISNULL((SELECT TOP 1 CODE FROM ITEM_MULTICODE WHERE ITEM = ITEMS.GUID ORDER BY LDATE DESC),ITEMS.CODE) AS MULTICODE,   ITEMS.CODE, ITEMS.NAME, ITEM_BARCODE.BARCODE, MAIN_GRP AS ITEM_GRP, MAIN_GRP_NAME AS ITEM_GRP_NAME, ISNULL((SELECT TOP 1 CUSTOMER_NAME FROM ITEM_MULTICODE_VW_01 WHERE ITEM_GUID = ITEMS.GUID),'') AS CUSTOMER_NAME, (SELECT [dbo].[FN_PRICE_SALE](ITEMS.GUID,1,GETDATE(),'00000000-0000-0000-0000-000000000000')) AS PRICE  ,  ISNULL((SELECT TOP 1 FACTOR FROM ITEM_UNIT WHERE TYPE = 1 AND ITEM_UNIT.ITEM = ITEMS.GUID),0) AS UNDER_UNIT_VALUE, ISNULL((SELECT TOP 1 SYMBOL FROM ITEM_UNIT_VW_01 WHERE TYPE = 1 AND ITEM_UNIT_VW_01.ITEM_GUID = ITEMS.GUID),0) AS UNDER_UNIT_SYMBOL FROM ITEMS_VW_01 AS ITEMS LEFT OUTER  JOIN ITEM_BARCODE ON ITEMS.GUID = ITEM_BARCODE.ITEM  WHERE ((ITEMS.CODE = @CODE) OR (ITEM_BARCODE.BARCODE = @CODE))   ) AS TMP ORDER BY CDATE DESC ",param:["CODE:string|50"],value:[n.txtBarcode.value]},t.next=3,n.core.sql.execute(a);case 3:if(E=t.sent,n.txtBarcode.setState({value:""}),!(E.result.recordset.length>0)){t.next=11;break}void 0!==n.lblObj.dt()[n.lblObj.dt().length-1]&&""==n.lblObj.dt()[n.lblObj.dt().length-1].CODE||((r=w({},n.lblObj.empty)).REF=n.mainLblObj.dt()[0].REF,r.REF_NO=n.mainLblObj.dt()[0].REF_NO,n.lblObj.addEmpty(r)),n.addItem(E.result.recordset[0],n.lblObj.dt().length-1),n.txtBarcode.focus(),t.next=14;break;case 11:return i={id:"msgItemNotFound",showTitle:!0,title:n.t("msgItemNotFound.title"),showCloseButton:!0,width:"500px",height:"200px",button:[{id:"btn01",caption:n.t("msgItemNotFound.btn01"),location:"after"}],content:h.createElement("div",{style:{textAlign:"center",fontSize:"20px"}},n.t("msgItemNotFound.msg"))},t.next=14,(0,v.W)(i);case 14:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}().bind(this),param:this.param.filter({ELEMENT:"txtBarcode",USERS:this.user.CODE}),access:this.access.filter({ELEMENT:"txtBarcode",USERS:this.user.CODE})})),h.createElement(D.Item,null,h.createElement(D.Label,{text:this.t("txtLineCount"),alignment:"right"}),h.createElement(N.ZP,{id:"txtLineCount",parent:this,simple:!0,upper:this.sysParam.filter({ID:"onlyBigChar",USERS:this.user.CODE}).getValue().value,readOnly:!0,param:this.param.filter({ELEMENT:"txtLineCount",USERS:this.user.CODE}),access:this.access.filter({ELEMENT:"txtLineCount",USERS:this.user.CODE})}))))),h.createElement("div",{className:"row px-2 pt-2"},h.createElement("div",{className:"col-12"},h.createElement(O(),{colCount:1,onInitialized:function(t){n.frmOutwas=t.component}},h.createElement(D.Item,{location:"after"},h.createElement(_.Button,{icon:"add",validationGroup:"frmLabelQeueu"+this.tabIndex,onClick:function(){var t=(0,E.Z)(d().mark((function t(e){var a,r;return d().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if("valid"!=e.validationGroup.validate().status){t.next=16;break}if(void 0===n.lblObj.dt()[0]){t.next=6;break}if(""!=n.lblObj.dt()[n.lblObj.dt().length-1].CODE){t.next=6;break}return n.pg_txtItemsCode.show(),n.pg_txtItemsCode.onClick=function(){var t=(0,E.Z)(d().mark((function t(e){var a,E;return d().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(1==e.length)n.addItem(e[0],n.lblObj.dt().length-1);else if(e.length>1)for(a=0;a<e.length;a++)0==a||((E=w({},n.lblObj.empty)).REF=n.mainLblObj.dt()[0].REF,E.REF_NO=n.mainLblObj.dt()[0].REF_NO,n.lblObj.addEmpty(E)),n.addItem(e[a],n.lblObj.dt().length-1);case 1:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),t.abrupt("return");case 6:(a=w({},n.lblObj.empty)).REF=n.mainLblObj.dt()[0].REF,a.REF_NO=n.mainLblObj.dt()[0].REF_NO,n.txtRef.readOnly=!0,n.txtRefno.readOnly=!0,n.lblObj.addEmpty(a),n.pg_txtItemsCode.show(),n.pg_txtItemsCode.onClick=function(){var t=(0,E.Z)(d().mark((function t(e){var a,E;return d().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(1==e.length)n.addItem(e[0],n.lblObj.dt().length-1);else if(e.length>1)for(a=0;a<e.length;a++)0==a||((E=w({},n.lblObj.empty)).REF=n.mainLblObj.dt()[0].REF,E.REF_NO=n.mainLblObj.dt()[0].REF_NO,n.lblObj.addEmpty(E)),n.addItem(e[a],n.lblObj.dt().length-1);case 1:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),t.next=19;break;case 16:return r={id:"msgDocValid",showTitle:!0,title:n.t("msgDocValid.title"),showCloseButton:!0,width:"500px",height:"200px",button:[{id:"btn01",caption:n.t("msgDocValid.btn01"),location:"after"}],content:h.createElement("div",{style:{textAlign:"center",fontSize:"20px"}},n.t("msgDocValid.msg"))},t.next=19,(0,v.W)(r);case 19:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()}),h.createElement(_.Button,{text:this.t("btnLabelCombine"),validationGroup:"frmLabelQeueu"+this.tabIndex,onClick:function(){var t=(0,E.Z)(d().mark((function t(e){var a;return d().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if("valid"!=e.validationGroup.validate().status){t.next=4;break}n.getDocsCombine(0),t.next=7;break;case 4:return a={id:"msgDocValid",showTitle:!0,title:n.t("msgDocValid.title"),showCloseButton:!0,width:"500px",height:"200px",button:[{id:"btn01",caption:n.t("msgDocValid.btn01"),location:"after"}],content:h.createElement("div",{style:{textAlign:"center",fontSize:"20px"}},n.t("msgDocValid.msg"))},t.next=7,(0,v.W)(a);case 7:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()})),h.createElement(D.Item,null,h.createElement(g.ZP,{parent:this,id:"grdLabelQueue",showBorders:!0,columnsAutoWidth:!0,allowColumnReordering:!0,allowColumnResizing:!0,height:"600",width:"100%",dbApply:!1,loadPanel:{enabled:!0},onRowUpdated:function(){var t=(0,E.Z)(d().mark((function t(e){var a;return d().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(void 0===e.data.PRICE&&void 0===e.data.UNDER_UNIT_VALUE||(e.key.UNDER_UNIT_PRICE=parseFloat((e.key.PRICE*(100*e.key.UNDER_UNIT_VALUE)/100).toFixed(3))),""!=n.lblObj.dt()[n.lblObj.dt().length-1].CODE){t.next=4;break}return t.next=4,n.grdLabelQueue.devGrid.deleteRow(n.lblObj.dt().length-1);case 4:a={data:n.lblObj.dt().toArray()},n.mainLblObj.dt()[0].DATA=JSON.stringify(a),setTimeout((function(){n.mainLblObj.save()}),500);case 7:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),onRowRemoved:function(t){n.calculateCount()}},h.createElement(g.m_,{editOnKeyPress:!0,enterKeyAction:"moveFocus",enterKeyDirection:"column"}),h.createElement(g.PY,{mode:"standard"}),h.createElement(g.LO,{mode:"cell",allowUpdating:!0,allowDeleting:!0,confirmDelete:!1}),h.createElement(g.D7,{fileName:this.lang.t("menu.stk_02_004"),enabled:!0,allowExportSelectedData:!0}),h.createElement(g.sg,{dataField:"CODE",caption:this.t("grdLabelQueue.clmItemCode"),width:150,editCellRender:this._cellRoleRender}),h.createElement(g.sg,{dataField:"BARCODE",caption:this.t("grdLabelQueue.clmBarcode"),width:150}),h.createElement(g.sg,{dataField:"NAME",caption:this.t("grdLabelQueue.clmItemName"),width:550}),h.createElement(g.sg,{dataField:"ITEM_GRP_NAME",caption:this.t("grdLabelQueue.clmItemGrpName"),width:200}),h.createElement(g.sg,{dataField:"PRICE",caption:this.t("grdLabelQueue.clmPrice"),width:70}),h.createElement(g.sg,{dataField:"UNDER_UNIT_VALUE",caption:this.t("grdLabelQueue.clmUnderUnit"),width:80}),h.createElement(g.sg,{dataField:"UNDER_UNIT_PRICE",caption:this.t("grdLabelQueue.clmUnderUnitPrice"),width:70}),h.createElement(g.sg,{dataField:"DESCRIPTION",caption:this.t("grdLabelQueue.clmDescription")})))))),h.createElement(f.Z,{id:"pg_txtItemsCode",parent:this,container:"#root",visible:!1,position:{of:"#root"},showTitle:!0,showBorders:!0,width:"90%",height:"90%",title:this.t("pg_txtItemsCode.title"),search:!0,data:{source:{select:{query:"SELECT  *,  CASE WHEN UNDER_UNIT_VALUE =0  THEN 0 ELSE ROUND((PRICE / UNDER_UNIT_VALUE),2) END AS UNDER_UNIT_PRICE FROM  (  SELECT GUID,   CODE,   NAME,   ISNULL((SELECT TOP 1 BARCODE FROM ITEM_BARCODE WHERE ITEM = ITEMS_VW_01.GUID ORDER BY CDATE DESC),'') AS BARCODE,   ISNULL((SELECT TOP 1 CODE FROM ITEM_MULTICODE WHERE ITEM = ITEMS_VW_01.GUID ORDER BY LDATE DESC),ITEMS_VW_01.CODE) AS MULTICODE,   MAIN_GRP AS ITEM_GRP,   MAIN_GRP_NAME AS ITEM_GRP_NAME, ISNULL((SELECT TOP 1 CUSTOMER_NAME FROM ITEM_MULTICODE_VW_01 WHERE ITEM_GUID = ITEMS_VW_01.GUID),'') AS CUSTOMER_NAME, (SELECT [dbo].[FN_PRICE_SALE](GUID,1,GETDATE(),'00000000-0000-0000-0000-000000000000')) AS PRICE  , ISNULL((SELECT TOP 1 FACTOR FROM ITEM_UNIT WHERE TYPE = 1 AND ITEM_UNIT.ITEM = ITEMS_VW_01.GUID),0) AS UNDER_UNIT_VALUE, ISNULL((SELECT TOP 1 SYMBOL FROM ITEM_UNIT_VW_01 WHERE TYPE = 1 AND ITEM_UNIT_VW_01.ITEM_GUID = ITEMS_VW_01.GUID),0) AS UNDER_UNIT_SYMBOL FROM ITEMS_VW_01 WHERE  STATUS = 1) AS TMP WHERE UPPER(CODE) LIKE UPPER(@VAL) OR UPPER(NAME) LIKE UPPER(@VAL)",param:["VAL:string|50"]},sql:this.core.sql}}},h.createElement(g.sg,{dataField:"CODE",caption:this.t("pg_txtItemsCode.clmCode"),width:150}),h.createElement(g.sg,{dataField:"NAME",caption:this.t("pg_txtItemsCode.clmName"),width:300,defaultSortOrder:"asc"})),h.createElement(f.Z,{id:"pg_DocsCombine",parent:this,container:"#root",visible:!1,position:{of:"#root"},showTitle:!0,showBorders:!0,width:"90%",height:"90%",title:this.t("pg_DocsCombine.title"),button:[{id:"01",icon:"more",onClick:function(){n.pg_DocsCombine.hide(),n.getDocsCombine("0,1")}}]},h.createElement(g.sg,{dataField:"REF",caption:this.t("pg_DocsCombine.clmRef"),width:150,defaultSortOrder:"asc"}),h.createElement(g.sg,{dataField:"REF_NO",caption:this.t("pg_DocsCombine.clmRefNo"),width:300,defaultSortOrder:"asc"}),h.createElement(g.sg,{dataField:"COUNT",caption:this.t("pg_Docs.clmCount"),width:300}),h.createElement(g.sg,{dataField:"DOC_DATE_CONVERT",caption:this.t("pg_Docs.clmDocDate"),width:300})),h.createElement("div",null,h.createElement(L.ZP,{parent:this,id:"popWizard",visible:!1,showCloseButton:!0,showTitle:!0,title:this.t("popWizard.title"),container:"#root",width:"50%",height:"50%",position:{of:"#root"}},h.createElement(O(),{colCount:2,height:"fit-content"},h.createElement(D.Item,{colSpan:2},h.createElement(U.ZP,{id:"chkLastChange",parent:this,defaultValue:!0,param:this.param.filter({ELEMENT:"chkLastChange",USERS:this.user.CODE}),access:this.access.filter({ELEMENT:"chkLastChange",USERS:this.user.CODE}),onValueChanged:(0,E.Z)(d().mark((function t(){return d().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:n.chkSelectChange.setState({value:!1}),n.chkGroup.setState({value:!1}),n.chkCustomer.setState({value:!1}),n.chkAllItems.setState({value:!1});case 4:case"end":return t.stop()}}),t)}))).bind(this)}),h.createElement(D.Label,{text:this.t("chkLastChange"),alignment:"right"})),h.createElement(D.Item,null,h.createElement(U.ZP,{id:"chkSelectChange",parent:this,defaultValue:!1,param:this.param.filter({ELEMENT:"chkSelectChange",USERS:this.user.CODE}),access:this.access.filter({ELEMENT:"chkSelectChange",USERS:this.user.CODE}),onValueChanged:(0,E.Z)(d().mark((function t(){return d().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:n.chkLastChange.setState({value:!1}),n.chkGroup.setState({value:!1}),n.chkCustomer.setState({value:!1}),n.chkAllItems.setState({value:!1});case 4:case"end":return t.stop()}}),t)}))).bind(this)}),h.createElement(D.Label,{text:this.t("chkSelectChange"),alignment:"right"})),h.createElement(D.Item,null,h.createElement(x.ZP,{simple:!0,parent:this,id:"dtSelectChange",type:"datetime"})),h.createElement(D.Item,null,h.createElement(U.ZP,{id:"chkGroup",parent:this,defaultValue:!1,param:this.param.filter({ELEMENT:"chkGroup",USERS:this.user.CODE}),access:this.access.filter({ELEMENT:"chkGroup",USERS:this.user.CODE}),onValueChanged:(0,E.Z)(d().mark((function t(){return d().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:n.chkLastChange.setState({value:!1}),n.chkSelectChange.setState({value:!1}),n.chkCustomer.setState({value:!1}),n.chkAllItems.setState({value:!1});case 4:case"end":return t.stop()}}),t)}))).bind(this)}),h.createElement(D.Label,{text:this.t("chkGroup"),alignment:"right"})),h.createElement(D.Item,null,h.createElement(A.ZP,{simple:!0,parent:this,id:"cmbGroup",notRefresh:!0,displayExpr:"NAME",valueExpr:"CODE",value:"",searchEnabled:!0,onValueChanged:(0,E.Z)(d().mark((function t(){return d().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:case"end":return t.stop()}}),t)}))).bind(this),data:{source:{select:{query:"SELECT CODE,NAME FROM ITEM_GROUP"},sql:this.core.sql}}})),h.createElement(D.Item,null,h.createElement(U.ZP,{id:"chkCustomer",parent:this,defaultValue:!1,param:this.param.filter({ELEMENT:"chkCustomer",USERS:this.user.CODE}),access:this.access.filter({ELEMENT:"chkCustomer",USERS:this.user.CODE}),onValueChanged:(0,E.Z)(d().mark((function t(){return d().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:n.chkLastChange.setState({value:!1}),n.chkSelectChange.setState({value:!1}),n.chkGroup.setState({value:!1}),n.chkAllItems.setState({value:!1});case 4:case"end":return t.stop()}}),t)}))).bind(this)}),h.createElement(D.Label,{text:this.t("chkCustomer"),alignment:"right"})),h.createElement(D.Item,null,h.createElement(A.ZP,{simple:!0,parent:this,id:"cmbCustomer",notRefresh:!0,displayExpr:"TITLE",valueExpr:"GUID",value:"",searchEnabled:!0,onValueChanged:(0,E.Z)(d().mark((function t(){return d().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:case"end":return t.stop()}}),t)}))).bind(this),data:{source:{select:{query:"SELECT GUID,TITLE FROM CUSTOMER_VW_01 WHERE GENUS IN(1,2)"},sql:this.core.sql}}})),h.createElement(D.Item,null,h.createElement(U.ZP,{id:"chkAllItems",parent:this,defaultValue:!1,param:this.param.filter({ELEMENT:"chkAllItems",USERS:this.user.CODE}),access:this.access.filter({ELEMENT:"chkAllItems",USERS:this.user.CODE}),onValueChanged:(0,E.Z)(d().mark((function t(){return d().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:n.chkLastChange.setState({value:!1}),n.chkSelectChange.setState({value:!1}),n.chkGroup.setState({value:!1}),n.chkCustomer.setState({value:!1});case 4:case"end":return t.stop()}}),t)}))).bind(this)}),h.createElement(D.Label,{text:this.t("chkAllItems"),alignment:"right"})),h.createElement(D.EmptyItem,null),h.createElement(D.Item,{colSpan:2},h.createElement("div",{className:"row"},h.createElement("div",{className:"col-6"},h.createElement(M.Z,{text:this.t("AddItems"),type:"normal",stylingMode:"contained",width:"100%",onClick:(0,E.Z)(d().mark((function t(){var e;return d().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return e={id:"msgAddItems",showTitle:!0,title:n.t("msgAddItems.title"),showCloseButton:!0,width:"500px",height:"200px",button:[{id:"btn01",caption:n.t("msgAddItems.btn01"),location:"before"},{id:"btn02",caption:n.t("msgAddItems.btn02"),location:"after"}],content:h.createElement("div",{style:{textAlign:"center",fontSize:"20px"}},n.t("msgAddItems.msg"))},t.next=3,(0,v.W)(e);case 3:"btn01"==t.sent&&n.AddWizardItems();case 5:case"end":return t.stop()}}),t)})))})),h.createElement("div",{className:"col-6"},h.createElement(M.Z,{text:this.lang.t("btnCancel"),type:"normal",stylingMode:"contained",width:"100%",onClick:function(){n.popWizard.hide()}})))))))))}}]),y}(h.PureComponent)}}]);