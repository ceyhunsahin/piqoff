"use strict";(self.webpackChunkwww=self.webpackChunkwww||[]).push([[5210],{90428:(e,t,r)=>{r.d(t,{ZP:()=>m});var i=r(15671),n=r(43144),a=r(97326),s=r(60136),o=r(82963),l=r(61120),c=r(67294),d=r(14140),u=r.n(d),h=r(20819),p=r(30381),E=r.n(p);var m=function(e){(0,s.Z)(h,e);var t,r,d=(t=h,r=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,i=(0,l.Z)(t);if(r){var n=(0,l.Z)(this).constructor;e=Reflect.construct(i,arguments,n)}else e=i.apply(this,arguments);return(0,o.Z)(this,e)});function h(e){var t;return(0,i.Z)(this,h),(t=d.call(this,e)).state.value=void 0===e.param?new Date(0):new Date(e.param.getValue().toString()),t.state.title=void 0===e.title?"":e.title,t.state.titleAlign=void 0===e.titleAlign?"left":e.titleAlign,t.state.showClearButton=void 0!==e.showClearButton&&e.showClearButton,t.state.pickerType=void 0===e.pickerType?"calendar":e.pickerType,t.state.type=void 0===e.type?"date":e.type,t.state.editorOptions=void 0===e.editorOptions?void 0:e.editorOptions,t._onValueChanged=t._onValueChanged.bind((0,a.Z)(t)),t._onEnterKey=t._onEnterKey.bind((0,a.Z)(t)),t}return(0,n.Z)(h,[{key:"_onValueChanged",value:function(e){this.value=e.value,void 0!==this.props.onValueChanged&&this.props.onValueChanged()}},{key:"_onEnterKey",value:function(){void 0!==this.props.onEnterKey&&this.props.onEnterKey()}},{key:"_dateView",value:function(){return c.createElement(u(),{id:this.props.id,showClearButton:this.state.showClearButton,pickerType:this.state.pickerType,height:"fit-content",valueChangeEvent:"keyup",value:"1970-01-01"==E()(this.state.value).format("YYYY-MM-DD")?null:E()(this.state.value),disabled:this.state.editable,type:this.state.type,dateSerializationFormat:"yyyy-MM-dd HH:mm",editorOptions:this.state.editorOptions,onEnterKey:this._onEnterKey,onValueChanged:this._onValueChanged},this.props.children,this.validationView())}},{key:"value",get:function(){return null==this.state.value?new Date(0):this.state.value},set:function(e){var t=this;if(void 0!==e&&null!=e||(e="1970-01-01"),void 0!==this.props.dt&&void 0!==this.props.dt.data&&this.props.dt.data.length>0&&void 0!==this.props.dt.field)if(void 0===this.props.dt.filter)void 0!==this.props.dt.row&&void 0!==this.props.dt.data.find((function(e){return e===t.props.dt.row}))?this.props.dt.data.find((function(e){return e===t.props.dt.row}))[this.props.dt.field]=e:this.props.dt.data[this.props.dt.data.length-1][this.props.dt.field]=e;else{var r=this.props.dt.data.where(this.props.dt.filter);r.length>0&&(void 0!==this.props.dt.row&&void 0!==r.find((function(e){return e===t.props.dt.row}))?r.find((function(e){return e===t.props.dt.row}))[this.props.dt.field]=e:r[r.length-1][this.props.dt.field]=e)}this.setState({value:e})}},{key:"render",value:function(){return 0==this.state.visible?c.createElement("div",null):void 0!==this.props.simple&&this.props.simple?this._dateView():void 0===this.state.title?c.createElement("div",{className:"dx-field"},this._dateView()):void 0===this.state.titleAlign?c.createElement("div",{className:"dx-field"},c.createElement("div",{className:"dx-field-label",style:{textAlign:"right"}},this.state.title),this._dateView()):"top"==this.state.titleAlign?c.createElement("div",{className:"dx-field"},c.createElement("div",null,this.state.title),this._dateView()):"bottom"==this.state.titleAlign?c.createElement("div",{className:"dx-field"},this._dateView(),c.createElement("div",null,this.state.option.title)):"left"==this.state.titleAlign?c.createElement("div",{className:"dx-field"},c.createElement("div",{className:"dx-field-label",style:{textAlign:"right"}},this.state.title),this._dateView()):"right"==this.state.titleAlign?c.createElement("div",{className:"dx-field"},this._dateView(),c.createElement("div",{className:"dx-field-label",style:{float:"right",paddingLeft:"15px"}},this.state.title)):void 0}}]),h}(h.ZP)},5083:(e,t,r)=>{r.d(t,{ZP:()=>h});var i=r(15671),n=r(43144),a=r(97326),s=r(60136),o=r(82963),l=r(61120),c=r(67294),d=r(67497),u=r(20819);r(17276);var h=function(e){(0,s.Z)(h,e);var t,r,u=(t=h,r=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,i=(0,l.Z)(t);if(r){var n=(0,l.Z)(this).constructor;e=Reflect.construct(i,arguments,n)}else e=i.apply(this,arguments);return(0,o.Z)(this,e)});function h(e){var t;return(0,i.Z)(this,h),(t=u.call(this,e)).dev=null,t.state.value=void 0!==e.value?e.value:0,t.state.title=void 0===e.title?"":e.title,t.state.titleAlign=void 0===e.titleAlign?"left":e.titleAlign,t.state.showClearButton=void 0!==e.showClearButton&&e.showClearButton,t.state.readOnly=void 0!==e.readOnly&&e.readOnly,t._onInitialized=t._onInitialized.bind((0,a.Z)(t)),t._onValueChanged=t._onValueChanged.bind((0,a.Z)(t)),t._onEnterKey=t._onEnterKey.bind((0,a.Z)(t)),t._onFocusIn=t._onFocusIn.bind((0,a.Z)(t)),t._onFocusOut=t._onFocusOut.bind((0,a.Z)(t)),t._onChange=t._onChange.bind((0,a.Z)(t)),t}return(0,n.Z)(h,[{key:"_onInitialized",value:function(e){this.dev=e.component}},{key:"_onValueChanged",value:function(e){this.value=e.value,void 0!==this.props.onValueChanged&&this.props.onValueChanged(e)}},{key:"_onEnterKey",value:function(){void 0!==this.props.onEnterKey&&this.props.onEnterKey()}},{key:"_onFocusIn",value:function(e){void 0!==this.props.selectAll&&1!=this.props.selectAll||this.dev.element().getElementsByTagName("input")[1].select(),void 0!==this.props.onFocusIn&&this.props.onFocusIn(e)}},{key:"_onFocusOut",value:function(){void 0!==this.props.onFocusOut&&this.props.onFocusOut()}},{key:"_onChange",value:function(){void 0!==this.props.onChange&&this.props.onChange()}},{key:"_txtView",value:function(){return c.createElement(d.NumberBox,{showClearButton:this.state.showClearButton,height:"fit-content",elementAttr:this.props.elementAttr,style:this.props.style,valueChangeEvent:"keyup",onValueChanged:this._onValueChanged,onEnterKey:this._onEnterKey,onFocusIn:this._onFocusIn,onFocusOut:this._onFocusOut,onChange:this._onChange,value:this.state.value,readOnly:this.state.readOnly,onInitialized:this._onInitialized,disabled:void 0===this.props.editable?this.state.editable:this.props.editable,showSpinButtons:this.props.showSpinButtons,step:this.props.step,format:this.props.format},this.props.children,this.validationView())}},{key:"value",get:function(){return this.state.value},set:function(e){var t=this;if(void 0!==e){if(void 0!==this.props.dt&&void 0!==this.props.dt.data&&this.props.dt.data.length>0&&void 0!==this.props.dt.field)if(void 0===this.props.dt.filter)void 0!==this.props.dt.row&&void 0!==this.props.dt.data.find((function(e){return e===t.props.dt.row}))?this.props.dt.data.find((function(e){return e===t.props.dt.row}))[this.props.dt.field]=e:this.props.dt.data[this.props.dt.data.length-1][this.props.dt.field]=e;else{var r=this.props.dt.data.where(this.props.dt.filter);r.length>0&&(void 0!==this.props.dt.row&&void 0!==r.find((function(e){return e===t.props.dt.row}))?r.find((function(e){return e===t.props.dt.row}))[this.props.dt.field]=e:r[r.length-1][this.props.dt.field]=e)}this.setState({value:e})}}},{key:"readOnly",get:function(){return this.state.readOnly},set:function(e){this.setState({readOnly:e})}},{key:"focus",value:function(){this.dev.focus()}},{key:"render",value:function(){return 0==this.state.visible?c.createElement("div",null):void 0!==this.props.simple&&this.props.simple?this._txtView():""==this.state.title?c.createElement("div",{className:"dx-field"},this._txtView()):void 0===this.state.titleAlign?c.createElement("div",{className:"dx-field"},c.createElement("div",{className:"dx-field-label",style:{textAlign:"right"}},this.state.title),this._txtView()):"top"==this.state.titleAlign?c.createElement("div",{className:"dx-field"},c.createElement("div",null,this.state.title),this._txtView()):"bottom"==this.state.titleAlign?c.createElement("div",{className:"dx-field"},this._txtView(),c.createElement("div",null,this.state.option.title)):"left"==this.state.titleAlign?c.createElement("div",{className:"dx-field"},c.createElement("div",{className:"dx-field-label",style:{textAlign:"right"}},this.state.title),this._txtView()):"right"==this.state.titleAlign?c.createElement("div",{className:"dx-field"},this._txtView(),c.createElement("div",{className:"dx-field-label",style:{float:"right",paddingLeft:"15px"}},this.state.title)):void 0}}]),h}(u.ZP)},95210:(e,t,r)=>{r.r(t),r.d(t,{default:()=>D});var i=r(4942),n=r(15861),a=r(15671),s=r(43144),o=r(97326),l=r(60136),c=r(82963),d=r(61120),u=r(64687),h=r.n(u),p=r(67294),E=r(85107),m=r(28996),f=r(30381),O=r.n(f),v=r(42866),b=r.n(v),g=(r(53221),r(25552)),I=r.n(g),P=(r(41226),r(91686),r(30886),r(99846)),C=(r(5083),r(99077),r(55585),r(417)),R=r(32175),_=r(18405),T=r(73682),y=(r(90428),r(60547)),x=r(17276);function A(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,i)}return r}function S(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?A(Object(r),!0).forEach((function(t){(0,i.Z)(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):A(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}r(9279),r(82048);var D=function(e){(0,l.Z)(D,e);var t,r,i,u,f,v,A=(f=D,v=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,t=(0,d.Z)(f);if(v){var r=(0,d.Z)(this).constructor;e=Reflect.construct(t,arguments,r)}else e=t.apply(this,arguments);return(0,c.Z)(this,e)});function D(){var e;return(0,a.Z)(this,D),(e=A.call(this)).state={Grid:"hidden"},e.barcode={name:"",price:0,barcode:"",code:"",guid:"00000000-0000-0000-0000-000000000000"},e.core=E.Z.instance.core,e.prmObj=e.param.filter({TYPE:1,USERS:e.user.CODE}),e.acsobj=e.access.filter({TYPE:1,USERS:e.user.CODE}),e.itemsPriceObj=new m.oQ,e.itemsPurcPriceObj=new m.oQ,e.barcodeScan=e.barcodeScan.bind((0,o.Z)(e)),e.otherShopObj=new x.$A,e.barcodeObj=new m.Ns,e.otherShopObj.selectCmd={query:"SELECT  (CONVERT(NVARCHAR, OTHER_SHOP.UPDATE_DATE, 104) + ' ' + CONVERT(NVARCHAR, OTHER_SHOP.UPDATE_DATE, 24)) AS DATE, OTHER_SHOP.CODE, OTHER_SHOP.NAME, MAX(OTHER_SHOP.BARCODE) AS BARCODE, OTHER_SHOP.MULTICODE, OTHER_SHOP.SALE_PRICE, OTHER_SHOP.CUSTOMER, OTHER_SHOP.CUSTOMER_PRICE, 1 AS QUANTITY, OTHER_SHOP.SHOP FROM ITEM_BARCODE_VW_01 AS BARCODE INNER JOIN OTHER_SHOP_ITEMS AS OTHER_SHOP ON BARCODE.BARCODE = OTHER_SHOP.BARCODE WHERE BARCODE.ITEM_GUID = @ITEM_GUID GROUP BY OTHER_SHOP.CODE,OTHER_SHOP.NAME, OTHER_SHOP.MULTICODE, OTHER_SHOP.SALE_PRICE, OTHER_SHOP.CUSTOMER_PRICE, OTHER_SHOP.CUSTOMER,OTHER_SHOP.SHOP,OTHER_SHOP.UPDATE_DATE ",param:["ITEM_GUID:string|50"]},e}return(0,s.Z)(D,[{key:"componentDidMount",value:(u=(0,n.Z)(h().mark((function e(){return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.core.util.waitUntil(0);case 2:this.init();case 3:case"end":return e.stop()}}),e,this)}))),function(){return u.apply(this,arguments)})},{key:"init",value:(i=(0,n.Z)(h().mark((function e(){return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.txtBarcode.focus(),this.otherShopObj.clear(),e.next=4,this.grdOtherShop.dataRefresh({source:this.otherShopObj});case 4:case"end":return e.stop()}}),e,this)}))),function(){return i.apply(this,arguments)})},{key:"barcodeScan",value:(r=(0,n.Z)(h().mark((function e(){return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:cordova.plugins.barcodeScanner.scan(function(){var e=(0,n.Z)(h().mark((function e(t){var r,i,n;return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(0!=t.cancelled){e.next=32;break}return r={query:"SELECT ITEM_CODE AS CODE,ITEM_NAME AS NAME,ITEM_GUID AS GUID,BARCODE,[dbo].[FN_PRICE_SALE](ITEM_GUID,1,GETDATE(),'00000000-0000-0000-0000-000000000000') AS PRICE FROM ITEM_BARCODE_VW_01  WHERE BARCODE = @BARCODE OR ITEM_CODE = @BARCODE ",param:["BARCODE:string|50"],value:[t.text]},e.next=4,this.core.sql.execute(r);case 4:if(!((i=e.sent).result.recordset.length>0)){e.next=27;break}return this.barcode={name:i.result.recordset[0].NAME,code:i.result.recordset[0].CODE,barcode:i.result.recordset[0].BARCODE,price:i.result.recordset[0].PRICE,guid:i.result.recordset[0].GUID},e.next=9,this.itemsPriceObj.load({ITEM_GUID:i.result.recordset[0].GUID,TYPE:0});case 9:if(!(this.itemsPriceObj.dt().length>0)){e.next=14;break}return e.next=12,this.setState({Grid:"visible"});case 12:return e.next=14,this.grdSalePrice.dataRefresh({source:this.itemsPriceObj.dt("ITEM_PRICE")});case 14:return e.next=16,this.itemsPurcPriceObj.load({ITEM_GUID:i.result.recordset[0].GUID,TYPE:1});case 16:if(!(this.itemsPurcPriceObj.dt().length>0)){e.next=21;break}return e.next=19,this.setState({Grid:"visible"});case 19:return e.next=21,this.grdPurcPrice.dataRefresh({source:this.itemsPurcPriceObj.dt("ITEM_PRICE")});case 21:return this.setState({tbBarcode:"visible"}),this.otherShopObj.selectCmd.value=[i.result.recordset[0].GUID],e.next=25,this.otherShopObj.refresh();case 25:e.next=32;break;case 27:return document.getElementById("Sound").play(),n={id:"msgBarcodeNotFound",showTitle:!0,title:this.t("msgBarcodeNotFound.title"),showCloseButton:!0,width:"350px",height:"200px",button:[{id:"btn02",caption:this.t("msgBarcodeNotFound.btn02"),location:"after"}],content:p.createElement("div",{style:{textAlign:"center",fontSize:"20px"}},this.t("msgBarcodeNotFound.msg"))},e.next=31,(0,y.W)(n);case 31:this.txtBarcode.value="";case 32:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}().bind(this),(function(e){}),{prompt:"Scan",orientation:"portrait"});case 1:case"end":return e.stop()}}),e,this)}))),function(){return r.apply(this,arguments)})},{key:"notBarcode",value:(t=(0,n.Z)(h().mark((function e(){var t,r=this;return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return document.getElementById("Sound").play(),console.log(111111),t={id:"msgBarcodeNotFound",showTitle:!0,title:this.t("msgBarcodeNotFound.title"),showCloseButton:!0,width:"350px",height:"200px",button:[{id:"btn01",caption:this.t("msgBarcodeNotFound.btn01"),location:"before"},{id:"btn02",caption:this.t("msgBarcodeNotFound.btn02"),location:"after"}],content:p.createElement("div",{style:{textAlign:"center",fontSize:"20px"}},this.t("msgBarcodeNotFound.msg"))},e.next=5,(0,y.W)(t);case 5:"btn01"==e.sent?(this.barcode={name:"",price:0,barcode:"",code:"",guid:"00000000-0000-0000-0000-000000000000"},this.popBarcodeAdd.show(),this.txtNewBarcode.value=this.txtBarcode.value,this.txtOldBarcode.readOnly=!1,this.txtOldBarcode.value="",this.setState({tbBarcode:"visible"}),setTimeout((function(){r.txtOldBarcode.focus()}),500)):(this.txtBarcode.value="",this.barcode={name:"",price:0,barcode:"",code:"",guid:"00000000-0000-0000-0000-000000000000"});case 7:case"end":return e.stop()}}),e,this)}))),function(){return t.apply(this,arguments)})},{key:"render",value:function(){var e,t,r=this;return p.createElement(b(),null,p.createElement("div",{className:"row px-1 pt-1"},p.createElement(I(),{colCount:2},p.createElement(g.Item,null,p.createElement("div",{className:"col-12"},p.createElement(P.ZP,{id:"txtBarcode",parent:this,placeholder:this.t("txtBarcodePlace"),button:[{id:"01",icon:"more",onClick:(t=(0,n.Z)(h().mark((function e(){return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:r.popItemCode.show(),r.popItemCode.onClick=function(){var e=(0,n.Z)(h().mark((function e(t){return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(t.length>0)){e.next=21;break}return r.txtBarcode.value=t[0].CODE,r.barcode={name:t[0].NAME,code:t[0].CODE,barcode:t[0].BARCODE,price:t[0].PRICE,guid:t[0].GUID},e.next=5,r.itemsPriceObj.load({ITEM_GUID:tmpData.result.recordset[0].GUID,TYPE:0});case 5:if(!(r.itemsPriceObj.dt().length>0)){e.next=10;break}return e.next=8,r.setState({Grid:"visible"});case 8:return e.next=10,r.grdSalePrice.dataRefresh({source:r.itemsPriceObj.dt("ITEM_PRICE")});case 10:return e.next=12,r.itemsPurcPriceObj.load({ITEM_GUID:tmpData.result.recordset[0].GUID,TYPE:1});case 12:if(!(r.itemsPurcPriceObj.dt().length>0)){e.next=17;break}return e.next=15,r.setState({Grid:"visible"});case 15:return e.next=17,r.grdPurcPrice.dataRefresh({source:r.itemsPurcPriceObj.dt("ITEM_PRICE")});case 17:return r.setState({tbBarcode:"visible"}),r.otherShopObj.selectCmd.value=[t[0].GUID],e.next=21,r.otherShopObj.refresh();case 21:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();case 2:case"end":return e.stop()}}),e)}))),function(){return t.apply(this,arguments)})},{id:"02",icon:"photo",onClick:(e=(0,n.Z)(h().mark((function e(){return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:r.barcodeScan();case 1:case"end":return e.stop()}}),e)}))),function(){return e.apply(this,arguments)})}],onEnterKey:function(){var e=(0,n.Z)(h().mark((function e(t){var i,n;return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(""!=t.component._changedValue){e.next=2;break}return e.abrupt("return");case 2:return i={query:"SELECT ITEM_CODE AS CODE,ITEM_NAME AS NAME,ITEM_GUID AS GUID,BARCODE,[dbo].[FN_PRICE_SALE](ITEM_GUID,1,GETDATE(),'00000000-0000-0000-0000-000000000000') AS PRICE FROM ITEM_BARCODE_VW_01  WHERE BARCODE = @BARCODE OR ITEM_CODE = @BARCODE ",param:["BARCODE:string|50"],value:[t.component._changedValue]},e.next=5,r.core.sql.execute(i);case 5:if(!((n=e.sent).result.recordset.length>0)){e.next=35;break}return r.barcode.name=n.result.recordset[0].NAME,r.barcode.barcode=n.result.recordset[0].BARCODE,r.barcode.code=n.result.recordset[0].CODE,r.barcode.price=n.result.recordset[0].PRICE,r.barcode.guid=n.result.recordset[0].GUID,e.next=14,r.itemsPriceObj.load({ITEM_GUID:n.result.recordset[0].GUID});case 14:return r.txtBarcode.value="",e.next=17,r.itemsPriceObj.load({ITEM_GUID:n.result.recordset[0].GUID,TYPE:0});case 17:if(!(r.itemsPriceObj.dt().length>0)){e.next=22;break}return e.next=20,r.setState({Grid:"visible"});case 20:return e.next=22,r.grdSalePrice.dataRefresh({source:r.itemsPriceObj.dt("ITEM_PRICE")});case 22:return e.next=24,r.itemsPurcPriceObj.load({ITEM_GUID:n.result.recordset[0].GUID,TYPE:1});case 24:if(!(r.itemsPurcPriceObj.dt().length>0)){e.next=29;break}return e.next=27,r.setState({Grid:"visible"});case 27:return e.next=29,r.grdPurcPrice.dataRefresh({source:r.itemsPurcPriceObj.dt("ITEM_PRICE")});case 29:return r.setState({tbBarcode:"visible"}),r.otherShopObj.selectCmd.value=[n.result.recordset[0].GUID],e.next=33,r.otherShopObj.refresh();case 33:e.next=37;break;case 35:document.getElementById("Sound").play(),r.notBarcode();case 37:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}().bind(this)}))),p.createElement(g.Item,null,p.createElement("h5",{className:"text-center"},this.barcode.name)),p.createElement(g.Item,null,p.createElement("h5",{className:"text-center"},this.barcode.price," €"))),p.createElement("div",{style:{visibility:this.state.Grid}},p.createElement("div",{className:"p-1"},p.createElement(I(),null,p.createElement(g.Item,null,p.createElement(_.ZP,{parent:this,id:"grdSalePrice",showBorders:!0,columnsAutoWidth:!0,allowColumnReordering:!0,allowColumnResizing:!0,height:"100%",width:"100%",dbApply:!1},p.createElement(_.Po,{defaultPageSize:5}),p.createElement(_.LO,{mode:"cell",allowUpdating:!1,allowDeleting:!1}),p.createElement(_.sg,{dataField:"FINISH_DATE",caption:this.t("grdSalePrice.clmStartDate"),dataType:"date",editorOptions:{value:null},cellRender:function(e){if("1970-01-01"!=O()(e.value).format("YYYY-MM-DD"))return e.text}}),p.createElement(_.sg,{dataField:"QUANTITY",caption:this.t("grdSalePrice.clmQuantity"),width:50}),p.createElement(_.sg,{dataField:"PRICE",caption:this.t("grdSalePrice.clmPrice"),dataType:"number",width:100,format:{style:"currency",currency:"EUR",precision:2}}))))),p.createElement("div",{className:"p-1"},p.createElement(I(),null,p.createElement(g.Item,null,p.createElement(_.ZP,{parent:this,id:"grdOtherShop",showBorders:!0,columnsAutoWidth:!0,allowColumnReordering:!0,allowColumnResizing:!0,height:"100%",width:"100%",dbApply:!1},p.createElement(_.Po,{defaultPageSize:5}),p.createElement(_.LO,{mode:"cell",allowUpdating:!1,allowDeleting:!1}),p.createElement(_.sg,{dataField:"SHOP",caption:this.t("grdOtherShop.clmShop")}),p.createElement(_.sg,{dataField:"QUANTITY",caption:this.t("grdOtherShop.clmQuantity"),width:50}),p.createElement(_.sg,{dataField:"SALE_PRICE",caption:this.t("grdOtherShop.clmPrice"),dataType:"number",width:100,format:{style:"currency",currency:"EUR",precision:2}}))))),p.createElement("div",{className:"p-1"},p.createElement(I(),null,p.createElement(g.Item,null,p.createElement(_.ZP,{parent:this,id:"grdPurcPrice",showBorders:!0,columnsAutoWidth:!0,allowColumnReordering:!0,allowColumnResizing:!0,height:"100%",width:"100%",dbApply:!1},p.createElement(_.Po,{defaultPageSize:5}),p.createElement(_.LO,{mode:"cell",allowUpdating:!1,allowDeleting:!1}),p.createElement(_.sg,{dataField:"CUSTOMER_NAME",caption:this.t("grdPurcPrice.clmCustomer")}),p.createElement(_.sg,{dataField:"LDATE",caption:this.t("grdPurcPrice.clmStartDate"),dataType:"date",width:75,editorOptions:{value:null},cellRender:function(e){if("1970-01-01"!=O()(e.value).format("YYYY-MM-DD"))return e.text}}),p.createElement(_.sg,{dataField:"QUANTITY",caption:this.t("grdPurcPrice.clmQuantity"),width:50}),p.createElement(_.sg,{dataField:"PRICE",caption:this.t("grdPurcPrice.clmPrice"),dataType:"number",width:100,format:{style:"currency",currency:"EUR",precision:2}})))))),p.createElement(C.Z,{id:"popItemCode",parent:this,container:"#root",visible:!1,position:{of:"#root"},showTitle:!0,showBorders:!0,width:"90%",height:"90%",title:this.t("popItemCode.title"),selection:{mode:"single"},search:!0,data:{source:{select:{query:"SELECT  *,  CASE WHEN UNDER_UNIT_VALUE =0  THEN 0 ELSE ROUND((PRICE * UNDER_UNIT_VALUE),2) END AS UNDER_UNIT_PRICE FROM  (  SELECT GUID,   CODE,   NAME,   ISNULL((SELECT TOP 1 BARCODE FROM ITEM_BARCODE WHERE ITEM = ITEMS_VW_01.GUID ORDER BY CDATE DESC),'') AS BARCODE,   MAIN_GRP AS ITEM_GRP,   MAIN_GRP_NAME AS ITEM_GRP_NAME,   (SELECT [dbo].[FN_PRICE_SALE](GUID,1,GETDATE(),'00000000-0000-0000-0000-000000000000')) AS PRICE  , ISNULL((SELECT TOP 1 FACTOR FROM ITEM_UNIT WHERE TYPE = 1 AND ITEM_UNIT.ITEM = ITEMS_VW_01.GUID),0) AS UNDER_UNIT_VALUE FROM ITEMS_VW_01 WHERE ISNULL((SELECT TOP 1 BARCODE FROM ITEM_BARCODE WHERE ITEM = ITEMS_VW_01.GUID),'') <> '') AS TMP WHERE UPPER(CODE) LIKE UPPER(@VAL) OR UPPER(NAME) LIKE UPPER(@VAL) ",param:["VAL:string|50"]},sql:this.core.sql}}},p.createElement(_.sg,{dataField:"CODE",caption:this.t("popItemCode.clmCode"),width:100}),p.createElement(_.sg,{dataField:"NAME",caption:this.t("popItemCode.clmName"),defaultSortOrder:"asc"})),p.createElement(R.ZP,{parent:this,id:"popBarcodeAdd",visible:!1,showCloseButton:!0,showTitle:!0,title:this.t("popBarcodeAdd.title"),container:"#root",width:"90%",height:"300",position:{of:"#root"}},p.createElement(I(),{colCount:1,height:"fit-content",id:"frmPrice"+this.tabIndex},p.createElement(g.Item,null,p.createElement(g.Label,{text:this.t("txtNewBarcode"),alignment:"right"}),p.createElement(P.ZP,{id:"txtNewBarcode",parent:this,simple:!0,validationGroup:"frmBarcode"+this.tabIndex,readOnly:!0,upper:this.sysParam.filter({ID:"onlyBigChar",USERS:this.user.CODE}).getValue().value},p.createElement(P.cX,{validationGroup:"frmBarcode"+this.tabIndex},p.createElement(P.n2,{message:this.t("validCode")})))),p.createElement(g.Item,null,p.createElement(g.Label,{text:this.t("txtOldBarcode"),alignment:"right"}),p.createElement(P.ZP,{id:"txtOldBarcode",parent:this,simple:!0,validationGroup:"frmBarcode"+this.tabIndex,readOnly:!1,upper:this.sysParam.filter({ID:"onlyBigChar",USERS:this.user.CODE}).getValue().value,onEnterKey:function(){var e=(0,n.Z)(h().mark((function e(t){var i,n,a;return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(""!=t.component._changedValue){e.next=2;break}return e.abrupt("return");case 2:return i={query:"SELECT ITEM_CODE AS CODE,ITEM_NAME AS NAME,ITEM_GUID AS GUID,BARCODE,[dbo].[FN_PRICE_SALE](ITEM_GUID,1,GETDATE(),'00000000-0000-0000-0000-000000000000') AS PRICE FROM ITEM_BARCODE_VW_01  WHERE BARCODE = @BARCODE OR ITEM_CODE = @BARCODE ",param:["BARCODE:string|50"],value:[t.component._changedValue]},e.next=5,r.core.sql.execute(i);case 5:if(!((n=e.sent).result.recordset.length>0)){e.next=36;break}return r.txtOldBarcode.readOnly=!0,r.barcode.name=n.result.recordset[0].NAME,r.barcode.barcode=n.result.recordset[0].BARCODE,r.barcode.code=n.result.recordset[0].CODE,r.barcode.price=n.result.recordset[0].PRICE,r.barcode.guid=n.result.recordset[0].GUID,e.next=15,r.itemsPriceObj.load({ITEM_GUID:n.result.recordset[0].GUID});case 15:return r.txtBarcode.value="",e.next=18,r.itemsPriceObj.load({ITEM_GUID:n.result.recordset[0].GUID,TYPE:0});case 18:if(!(r.itemsPriceObj.dt().length>0)){e.next=23;break}return e.next=21,r.setState({Grid:"visible"});case 21:return e.next=23,r.grdSalePrice.dataRefresh({source:r.itemsPriceObj.dt("ITEM_PRICE")});case 23:return e.next=25,r.itemsPurcPriceObj.load({ITEM_GUID:n.result.recordset[0].GUID,TYPE:1});case 25:if(!(r.itemsPurcPriceObj.dt().length>0)){e.next=30;break}return e.next=28,r.setState({Grid:"visible"});case 28:return e.next=30,r.grdPurcPrice.dataRefresh({source:r.itemsPurcPriceObj.dt("ITEM_PRICE")});case 30:return r.setState({tbBarcode:"visible"}),r.otherShopObj.selectCmd.value=[n.result.recordset[0].GUID],e.next=34,r.otherShopObj.refresh();case 34:e.next=41;break;case 36:return r.txtOldBarcode.readOnly=!1,document.getElementById("Sound").play(),a={id:"msgBarcodeNotFound",showTitle:!0,title:r.t("msgBarcodeNotFound.title"),showCloseButton:!0,width:"350px",height:"200px",button:[{id:"btn02",caption:r.t("msgBarcodeNotFound.btn02"),location:"after"}],content:p.createElement("div",{style:{textAlign:"center",fontSize:"20px"}},r.t("msgBarcodeNotFound.msg"))},e.next=41,(0,y.W)(a);case 41:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}().bind(this)},p.createElement(P.cX,{validationGroup:"frmBarcode"+this.tabIndex},p.createElement(P.n2,{message:this.t("validCode")})))),p.createElement(g.Item,null,p.createElement("div",null,p.createElement("h5",{className:"text-center"},this.barcode.name))),p.createElement(g.Item,null,p.createElement("div",{className:"row"},p.createElement("div",{className:"col-12 px-4 pt-4"},p.createElement(T.Z,{text:this.t("btnAddBarcode"),type:"default",width:"100%",validationGroup:"frmBarcode"+this.tabIndex,onClick:function(){var e=(0,n.Z)(h().mark((function e(t){var i,n;return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(""!=r.barcode.name){e.next=2;break}return e.abrupt("return");case 2:"valid"==t.validationGroup.validate().status&&(0,i=8==r.txtNewBarcode.value.length?"0":13==r.txtNewBarcode.value.length?"1":"2",(n=S({},r.barcodeObj.empty)).ITEM_GUID=r.barcode.guid,n.BARCODE=r.txtNewBarcode.value,n.TYPE=i,r.barcodeObj.addEmpty(n),r.barcodeObj.save(),r.popBarcodeAdd.hide());case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()}))))))))}}]),D}(p.Component)}}]);