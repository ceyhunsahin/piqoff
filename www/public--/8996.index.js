"use strict";(self.webpackChunkwww=self.webpackChunkwww||[]).push([[8996],{28996:(E,t,e)=>{e.d(t,{Ni:()=>d,Ns:()=>S,Q1:()=>N,_7:()=>c,gn:()=>R,oQ:()=>A,p6:()=>u,r7:()=>h,sD:()=>o,xo:()=>G});var I=e(15861),T=e(4942),n=e(71002),r=e(15671),s=e(43144),i=e(64687),a=e.n(i),D=e(17276),C=e(30381),_=e.n(C);function U(E,t){var e=Object.keys(E);if(Object.getOwnPropertySymbols){var I=Object.getOwnPropertySymbols(E);t&&(I=I.filter((function(t){return Object.getOwnPropertyDescriptor(E,t).enumerable}))),e.push.apply(e,I)}return e}function P(E){for(var t=1;t<arguments.length;t++){var e=null!=arguments[t]?arguments[t]:{};t%2?U(Object(e),!0).forEach((function(t){(0,T.Z)(E,t,e[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(E,Object.getOwnPropertyDescriptors(e)):U(Object(e)).forEach((function(t){Object.defineProperty(E,t,Object.getOwnPropertyDescriptor(e,t))}))}return E}var R=function(){function E(){(0,r.Z)(this,E),this.core=D.vE.instance,this.ds=new D.gx,this.empty={GUID:"00000000-0000-0000-0000-000000000000",CUSER:null==this.core.auth.data?"":this.core.auth.data.CODE,TYPE:"0",SPECIAL:"",CODE:"",NAME:"",SNAME:"",VAT:5.5,COST_PRICE:0,MIN_PRICE:0,MAX_PRICE:0,STATUS:!0,MAIN_GRP:"",MAIN_GRP_NAME:"",SUB_GRP:"",ORGINS:"",ORGINS_NAME:"",SECTOR:"",RAYON:"",SHELF:"",WEIGHING:!1,SALE_JOIN_LINE:!1,TICKET_REST:!1,SUGAR_RATE:0},this.itemUnit=new M,this.itemPrice=new A,this.itemBarcode=new S,this.itemMultiCode=new u,this.itemImage=new O,this.itemPriceLog=new c,this._initDs()}return(0,s.Z)(E,[{key:"_initDs",value:function(){var E=new D.$A("ITEMS");E.selectCmd={query:"SELECT * FROM [dbo].[ITEMS_VW_01] WHERE ((CODE = @CODE) OR (@CODE = ''))",param:["CODE:string|25"],local:{type:"select",from:"ITEMS",where:{CODE:""}}},E.insertCmd={query:"EXEC [dbo].[PRD_ITEMS_INSERT] @GUID = @PGUID, @CUSER = @PCUSER, @TYPE = @PTYPE, @SPECIAL = @PSPECIAL, @CODE = @PCODE, @NAME = @PNAME, @SNAME = @PSNAME, @VAT = @PVAT, @COST_PRICE = @PCOST_PRICE, @MIN_PRICE = @PMIN_PRICE, @MAX_PRICE = @PMAX_PRICE, @STATUS = @PSTATUS, @MAIN = @PMAIN, @SUB = @PSUB, @ORGINS = @PORGINS, @SECTOR = @PSECTOR, @RAYON = @PRAYON, @SHELF = @PSHELF, @WEIGHING = @PWEIGHING, @SALE_JOIN_LINE = @PSALE_JOIN_LINE, @TICKET_REST = @PTICKET_REST, @SUGAR_RATE = @PSUGAR_RATE ",param:["PGUID:string|50","PCUSER:string|25","PTYPE:string|25","PSPECIAL:string|50","PCODE:string|25","PNAME:string|250","PSNAME:string|50","PVAT:float","PCOST_PRICE:float","PMIN_PRICE:float","PMAX_PRICE:float","PSTATUS:bit","PMAIN:string|50","PSUB:string|50","PORGINS:string|50","PSECTOR:string|50","PRAYON:string|50","PSHELF:string|50","PWEIGHING:bit","PSALE_JOIN_LINE:bit","PTICKET_REST:bit","PSUGAR_RATE:float"],dataprm:["GUID","CUSER","TYPE","SPECIAL","CODE","NAME","SNAME","VAT","COST_PRICE","MIN_PRICE","MAX_PRICE","STATUS","MAIN_GRP","SUB_GRP","ORGINS","SECTOR","RAYON","SHELF","WEIGHING","SALE_JOIN_LINE","TICKET_REST","SUGAR_RATE"],local:{type:"insert",into:"ITEMS",values:[{GUID:{map:"GUID"},CUSER:{map:"CUSER"},TYPE:{map:"TYPE"},SPECIAL:{map:"SPECIAL"},CODE:{map:"CODE"},NAME:{map:"NAME"},SNAME:{map:"SNAME"},VAT:{map:"VAT"},COST_PRICE:{map:"COST_PRICE"},MIN_PRICE:{map:"MIN_PRICE"},MAX_PRICE:{map:"MAX_PRICE"},STATUS:{map:"STATUS"},MAIN_GRP:{map:"MAIN_GRP"},SUB_GRP:{map:"SUB_GRP"},ORGINS:{map:"ORGINS"},SECTOR:{map:"SECTOR"},RAYON:{map:"RAYON"},SHELF:{map:"SHELF"},WEIGHING:{map:"WEIGHING"},SALE_JOIN_LINE:{map:"SALE_JOIN_LINE"},TICKET_REST:{map:"TICKET_REST"}}]}},E.updateCmd={query:"EXEC [dbo].[PRD_ITEMS_UPDATE] @GUID = @PGUID, @CUSER = @PCUSER, @TYPE = @PTYPE, @SPECIAL = @PSPECIAL, @CODE = @PCODE, @NAME = @PNAME, @SNAME = @PSNAME, @VAT = @PVAT, @COST_PRICE = @PCOST_PRICE, @MIN_PRICE = @PMIN_PRICE, @MAX_PRICE = @PMAX_PRICE, @STATUS = @PSTATUS, @MAIN = @PMAIN, @SUB = @PSUB, @ORGINS = @PORGINS, @SECTOR = @PSECTOR, @RAYON = @PRAYON, @SHELF = @PSHELF, @WEIGHING = @PWEIGHING, @SALE_JOIN_LINE = @PSALE_JOIN_LINE, @TICKET_REST = @PTICKET_REST, @SUGAR_RATE = @PSUGAR_RATE ",param:["PGUID:string|50","PCUSER:string|25","PTYPE:string|25","PSPECIAL:string|50","PCODE:string|25","PNAME:string|250","PSNAME:string|50","PVAT:float","PCOST_PRICE:float","PMIN_PRICE:float","PMAX_PRICE:float","PSTATUS:bit","PMAIN:string|50","PSUB:string|50","PORGINS:string|50","PSECTOR:string|50","PRAYON:string|50","PSHELF:string|50","PWEIGHING:bit","PSALE_JOIN_LINE:bit","PTICKET_REST:bit","PSUGAR_RATE:float"],dataprm:["GUID","CUSER","TYPE","SPECIAL","CODE","NAME","SNAME","VAT","COST_PRICE","MIN_PRICE","MAX_PRICE","STATUS","MAIN_GRP","SUB_GRP","ORGINS","SECTOR","RAYON","SHELF","WEIGHING","SALE_JOIN_LINE","TICKET_REST","SUGAR_RATE"],local:{type:"update",in:"ITEMS",set:{CUSER:{map:"CUSER"},TYPE:{map:"TYPE"},SPECIAL:{map:"SPECIAL"},CODE:{map:"CODE"},NAME:{map:"NAME"},SNAME:{map:"SNAME"},VAT:{map:"VAT"},COST_PRICE:{map:"COST_PRICE"},MIN_PRICE:{map:"MIN_PRICE"},MAX_PRICE:{map:"MAX_PRICE"},STATUS:{map:"STATUS"},MAIN:{map:"MAIN"},SUB:{map:"SUB"},ORGINS:{map:"ORGINS"},SECTOR:{map:"SECTOR"},RAYON:{map:"RAYON"},SHELF:{map:"SHELF"},WEIGHING:{map:"WEIGHING"},SALE_JOIN_LINE:{map:"SALE_JOIN_LINE"},TICKET_REST:{map:"TICKET_REST"}},where:{GUID:{map:"GUID"}}}},E.deleteCmd={query:"EXEC [dbo].[PRD_ITEMS_DELETE] @CUSER = @PCUSER, @UPDATE = 1, @GUID = @PGUID ",param:["PCUSER:string|25","PGUID:string|50"],dataprm:["CUSER","GUID"],local:{type:"delete",from:"ITEMS",where:{GUID:{map:"GUID"}}}},this.ds.add(E),this.ds.add(this.itemUnit.dt("ITEM_UNIT")),this.ds.add(this.itemPrice.dt("ITEM_PRICE")),this.ds.add(this.itemBarcode.dt("ITEM_BARCODE")),this.ds.add(this.itemMultiCode.dt("ITEM_MULTICODE")),this.ds.add(this.itemImage.dt("ITEM_IMAGE")),this.ds.get("ITEMS").noColumnEdit=["GROSS_MARGIN","SNAME","CUSER","MAIN_GRP_NAME","VAT_EXT","GROSS_MARGIN_RATE","NET_MARGIN","NET_MARGIN_RATE"]}},{key:"dt",value:function(){return arguments.length>0?this.ds.get(arguments[0]):this.ds.get(0)}},{key:"addEmpty",value:function(){if(void 0!==this.dt("ITEMS")){var E={};(E=(0,n.Z)(arguments.length)>0?P({},arguments[0]):P({},this.empty)).GUID=D.$A.uuidv4(),this.dt("ITEMS").push(E)}}},{key:"clearAll",value:function(){for(var E=0;E<this.ds.length;E++)this.dt(E).clear()}},{key:"load",value:function(){var E=arguments,t=this;return new Promise(function(){var e=(0,I.Z)(a().mark((function e(I){var T;return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return T={CODE:""},E.length>0&&(T.CODE=void 0===E[0].CODE?"":E[0].CODE),void 0!==t.ds.get("ITEMS").selectCmd.local&&(t.ds.get("ITEMS").selectCmd.local.where.CODE=T.CODE),t.ds.get("ITEMS").selectCmd.value=Object.values(T),e.next=6,t.ds.get("ITEMS").refresh();case 6:if(!(t.ds.get("ITEMS").length>0)){e.next=19;break}return e.next=9,t.itemUnit.load({ITEM_GUID:t.ds.get("ITEMS")[0].GUID});case 9:return e.next=11,t.itemPrice.load({ITEM_GUID:t.ds.get("ITEMS")[0].GUID,TYPE:0});case 11:return e.next=13,t.itemBarcode.load({ITEM_GUID:t.ds.get("ITEMS")[0].GUID});case 13:return e.next=15,t.itemMultiCode.load({ITEM_GUID:t.ds.get("ITEMS")[0].GUID});case 15:return e.next=17,t.itemImage.load({ITEM_GUID:t.ds.get("ITEMS")[0].GUID});case 17:return e.next=19,t.itemPriceLog.load({ITEM_GUID:t.ds.get("ITEMS")[0].GUID});case 19:I(t.ds.get("ITEMS"));case 20:case"end":return e.stop()}}),e)})));return function(E){return e.apply(this,arguments)}}())}},{key:"save",value:function(){var E=this;return new Promise(function(){var t=(0,I.Z)(a().mark((function t(e){return a().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return E.ds.delete(),t.t0=e,t.next=4,E.ds.update();case 4:t.t1=t.sent,(0,t.t0)(t.t1);case 6:case"end":return t.stop()}}),t)})));return function(E){return t.apply(this,arguments)}}())}}]),E}(),M=function(){function E(){(0,r.Z)(this,E),this.core=D.vE.instance,this.ds=new D.gx,this.empty={GUID:"00000000-0000-0000-0000-000000000000",CUSER:null==this.core.auth.data?"":this.core.auth.data.CODE,CUSER_NAME:null==this.core.auth.data?"":this.core.auth.data.NAME,TYPE:0,TYPE_NAME:"",ID:"0",NAME:"UnitÃ©",FACTOR:1,WEIGHT:"0",VOLUME:"0",WIDTH:"0",HEIGHT:"0",SIZE:"0",ITEM_GUID:"00000000-0000-0000-0000-000000000000",ITEM_CODE:"",ITEM_NAME:""},this._initDs()}return(0,s.Z)(E,[{key:"_initDs",value:function(){var E=new D.$A("ITEM_UNIT");E.selectCmd={query:"SELECT * FROM [dbo].[ITEM_UNIT_VW_01] WHERE ((NAME = @NAME) OR (@NAME = '')) AND ((ITEM_GUID = @ITEM_GUID) OR (@ITEM_GUID = '00000000-0000-0000-0000-000000000000')) AND ((ITEM_CODE = @ITEM_CODE) OR (@ITEM_CODE = ''))",param:["NAME:string|50","ITEM_GUID:string|50","ITEM_CODE:string|25"]},E.insertCmd={query:"EXEC [dbo].[PRD_ITEM_UNIT_INSERT] @GUID = @PGUID, @CUSER = @PCUSER, @TYPE = @PTYPE, @ITEM = @PITEM, @ID = @PID, @FACTOR = @PFACTOR, @WEIGHT = @PWEIGHT, @VOLUME = @PVOLUME, @WIDTH = @PWIDTH, @HEIGHT = @PHEIGHT, @SIZE = @PSIZE ",param:["PGUID:string|50","PCUSER:string|25","PTYPE:int","PITEM:string|50","PID:string|25","PFACTOR:float","PWEIGHT:float","PVOLUME:float","PWIDTH:float","PHEIGHT:float","PSIZE:float"],dataprm:["GUID","CUSER","TYPE","ITEM_GUID","ID","FACTOR","WEIGHT","VOLUME","WIDTH","HEIGHT","SIZE"]},E.updateCmd={query:"EXEC [dbo].[PRD_ITEM_UNIT_UPDATE] @GUID = @PGUID, @CUSER = @PCUSER, @TYPE = @PTYPE, @ITEM = @PITEM, @ID = @PID, @FACTOR = @PFACTOR, @WEIGHT = @PWEIGHT, @VOLUME = @PVOLUME, @WIDTH = @PWIDTH, @HEIGHT = @PHEIGHT, @SIZE = @PSIZE ",param:["PGUID:string|50","PCUSER:string|25","PTYPE:int","PITEM:string|50","PID:string|25","PFACTOR:float","PWEIGHT:float","PVOLUME:float","PWIDTH:float","PHEIGHT:float","PSIZE:float"],dataprm:["GUID","CUSER","TYPE","ITEM_GUID","ID","FACTOR","WEIGHT","VOLUME","WIDTH","HEIGHT","SIZE"]},E.deleteCmd={query:"EXEC [dbo].[PRD_ITEM_UNIT_DELETE] @CUSER = @PCUSER, @UPDATE = 1, @GUID = @PGUID ",param:["PCUSER:string|25","PGUID:string|50"],dataprm:["CUSER","GUID"]},this.ds.add(E)}},{key:"dt",value:function(){return arguments.length>0?this.ds.get(arguments[0]):this.ds.get(0)}},{key:"addEmpty",value:function(){if(void 0!==this.dt("ITEM_UNIT")){var E={};(E=P({},arguments.length>0?arguments[0]:this.empty)).GUID=D.$A.uuidv4(),this.dt("ITEM_UNIT").push(E)}}},{key:"clearAll",value:function(){for(var E=0;E<this.ds.length;E++)this.dt(E).clear()}},{key:"load",value:function(){var E=arguments,t=this;return new Promise(function(){var e=(0,I.Z)(a().mark((function e(I){var T;return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return T={NAME:"",ITEM_GUID:"00000000-0000-0000-0000-000000000000",ITEM_CODE:""},E.length>0&&(T.NAME=void 0===E[0].NAME?"":E[0].NAME,T.ITEM_GUID=void 0===E[0].ITEM_GUID?"00000000-0000-0000-0000-000000000000":E[0].ITEM_GUID,T.ITEM_CODE=void 0===E[0].ITEM_CODE?"":E[0].ITEM_CODE),t.ds.get("ITEM_UNIT").selectCmd.value=Object.values(T),e.next=5,t.ds.get("ITEM_UNIT").refresh();case 5:I(t.ds.get("ITEM_UNIT"));case 6:case"end":return e.stop()}}),e)})));return function(E){return e.apply(this,arguments)}}())}},{key:"save",value:function(){var E=this;return new Promise(function(){var t=(0,I.Z)(a().mark((function t(e){return a().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.t0=e,t.next=3,E.ds.update();case 3:t.t1=t.sent,(0,t.t0)(t.t1);case 5:case"end":return t.stop()}}),t)})));return function(E){return t.apply(this,arguments)}}())}}]),E}(),A=function(){function E(){(0,r.Z)(this,E),this.core=D.vE.instance,this.ds=new D.gx,this.empty={GUID:"00000000-0000-0000-0000-000000000000",CUSER:null==this.core.auth.data?"":this.core.auth.data.CODE,CUSER_NAME:null==this.core.auth.data?"":this.core.auth.data.NAME,TYPE:0,TYPE_NAME:"",ITEM_GUID:"00000000-0000-0000-0000-000000000000",ITEM_CODE:"",ITEM_NAME:"",DEPOT:"00000000-0000-0000-0000-000000000000",DEPOT_CODE:"",DEPOT_NAME:"",START_DATE:_()(new Date(0)).format("YYYY-MM-DD"),FINISH_DATE:_()(new Date(0)).format("YYYY-MM-DD"),PRICE:0,QUANTITY:0,CUSTOMER_GUID:"00000000-0000-0000-0000-000000000000",CUSTOMER_CODE:"",CUSTOMER_NAME:"",CHANGE_DATE:_()(new Date(0)).format("DD/MM/YYYY HH:mm:ss"),CDATE_FORMAT:""},this._initDs()}return(0,s.Z)(E,[{key:"_initDs",value:function(){var E=new D.$A("ITEM_PRICE");E.selectCmd={query:"SELECT * FROM [dbo].[ITEM_PRICE_VW_01] WHERE ((ITEM_GUID = @ITEM_GUID) OR (@ITEM_GUID = '00000000-0000-0000-0000-000000000000')) AND ((ITEM_CODE = @ITEM_CODE) OR (@ITEM_CODE = '')) AND ((TYPE = @TYPE) OR (@TYPE = -1)) AND ((DEPOT = @DEPOT) OR (@DEPOT = '00000000-0000-0000-0000-000000000000')) AND ((START_DATE >= @START_DATE) OR (CONVERT(NVARCHAR(10),@START_DATE,112) = '19700101')) AND ((FINISH_DATE <= @FINISH_DATE) OR (CONVERT(NVARCHAR(10),@FINISH_DATE,112) = '19700101')) AND (FINISH_DATE > GETDATE()-2 OR FINISH_DATE = '19700101') AND((QUANTITY = @QUANTITY) OR (@QUANTITY = -1)) AND ((CUSTOMER_CODE = @CUSTOMER_CODE) OR (@CUSTOMER_CODE = '')) AND ((CUSTOMER_GUID = @CUSTOMER_GUID) OR (@CUSTOMER_GUID = '00000000-0000-0000-0000-000000000000')) ORDER BY CDATE DESC",param:["ITEM_GUID:string|36","ITEM_CODE:string|25","TYPE:int","DEPOT:string|36","START_DATE:date","FINISH_DATE:date","QUANTITY:float","CUSTOMER_CODE:string|25","CUSTOMER_GUID:string|36"]},E.insertCmd={query:"EXEC [dbo].[PRD_ITEM_PRICE_INSERT] @GUID = @PGUID, @CUSER = @PCUSER, @TYPE = @PTYPE, @ITEM = @PITEM, @DEPOT = @PDEPOT, @START_DATE = @PSTART_DATE, @FINISH_DATE = @PFINISH_DATE, @PRICE = @PPRICE, @QUANTITY = @PQUANTITY, @CUSTOMER = @PCUSTOMER ",param:["PGUID:string|50","PCUSER:string|25","PTYPE:int","PITEM:string|50","PDEPOT:string|50","PSTART_DATE:date","PFINISH_DATE:date","PPRICE:float","PQUANTITY:float","PCUSTOMER:string|50"],dataprm:["GUID","CUSER","TYPE","ITEM_GUID","DEPOT","START_DATE","FINISH_DATE","PRICE","QUANTITY","CUSTOMER_GUID"]},E.updateCmd={query:"EXEC [dbo].[PRD_ITEM_PRICE_UPDATE] @GUID = @PGUID, @CUSER = @PCUSER, @TYPE = @PTYPE, @ITEM = @PITEM, @DEPOT = @PDEPOT, @START_DATE = @PSTART_DATE, @FINISH_DATE = @PFINISH_DATE, @PRICE = @PPRICE, @QUANTITY = @PQUANTITY, @CUSTOMER = @PCUSTOMER ",param:["PGUID:string|50","PCUSER:string|25","PTYPE:int","PITEM:string|50","PDEPOT:string|50","PSTART_DATE:date","PFINISH_DATE:date","PPRICE:float","PQUANTITY:float","PCUSTOMER:string|50"],dataprm:["GUID","CUSER","TYPE","ITEM_GUID","DEPOT","START_DATE","FINISH_DATE","PRICE","QUANTITY","CUSTOMER_GUID"]},E.deleteCmd={query:"EXEC [dbo].[PRD_ITEM_PRICE_DELETE] @CUSER = @PCUSER, @UPDATE = 1, @GUID = @PGUID ",param:["PCUSER:string|25","PGUID:string|50"],dataprm:["CUSER","GUID"]},E.noColumnEdit=["VAT_EXT","GROSS_MARGIN","GROSS_MARGIN_RATE","NET_MARGIN","NET_MARGIN_RATE"],this.ds.add(E)}},{key:"dt",value:function(){return arguments.length>0?this.ds.get(arguments[0]):this.ds.get(0)}},{key:"addEmpty",value:function(){if(void 0!==this.dt("ITEM_PRICE")){var E={};(E=P({},arguments.length>0?arguments[0]:this.empty)).GUID=D.$A.uuidv4(),this.dt("ITEM_PRICE").push(E)}}},{key:"clearAll",value:function(){for(var E=0;E<this.ds.length;E++)this.dt(E).clear()}},{key:"load",value:function(){var E=arguments,t=this;return new Promise(function(){var e=(0,I.Z)(a().mark((function e(I){var T;return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return T={ITEM_GUID:"00000000-0000-0000-0000-000000000000",ITEM_CODE:"",TYPE:-1,DEPOT:"00000000-0000-0000-0000-000000000000",START_DATE:_()(new Date(0)).format("YYYY-MM-DD"),FINISH_DATE:_()(new Date(0)).format("YYYY-MM-DD"),QUANTITY:-1,CUSTOMER_CODE:"",CUSTOMER_GUID:"00000000-0000-0000-0000-000000000000"},E.length>0&&(T.ITEM_GUID=void 0===E[0].ITEM_GUID?"00000000-0000-0000-0000-000000000000":E[0].ITEM_GUID,T.ITEM_CODE=void 0===E[0].ITEM_CODE?"":E[0].ITEM_CODE,T.TYPE=void 0===E[0].TYPE?-1:E[0].TYPE,T.DEPOT=void 0===E[0].DEPOT?"00000000-0000-0000-0000-000000000000":E[0].DEPOT,T.START_DATE=void 0===E[0].START_DATE?_()(new Date(0)).format("YYYY-MM-DD"):E[0].START_DATE,T.FINISH_DATE=void 0===E[0].FINISH_DATE?_()(new Date(0)).format("YYYY-MM-DD"):E[0].FINISH_DATE,T.QUANTITY=void 0===E[0].QUANTITY?-1:E[0].QUANTITY,T.CUSTOMER_CODE=void 0===E[0].CUSTOMER_CODE?"":E[0].CUSTOMER_CODE,T.CUSTOMER_GUID=void 0===E[0].CUSTOMER_GUID?"00000000-0000-0000-0000-000000000000":E[0].CUSTOMER_GUID),t.ds.get("ITEM_PRICE").selectCmd.value=Object.values(T),e.next=5,t.ds.get("ITEM_PRICE").refresh();case 5:I(t.ds.get("ITEM_PRICE"));case 6:case"end":return e.stop()}}),e)})));return function(E){return e.apply(this,arguments)}}())}},{key:"save",value:function(){var E=this;return new Promise(function(){var t=(0,I.Z)(a().mark((function t(e){return a().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return E.ds.delete(),t.t0=e,t.next=4,E.ds.update();case 4:t.t1=t.sent,(0,t.t0)(t.t1);case 6:case"end":return t.stop()}}),t)})));return function(E){return t.apply(this,arguments)}}())}}]),E}(),S=function(){function E(){(0,r.Z)(this,E),this.core=D.vE.instance,this.ds=new D.gx,this.empty={GUID:"00000000-0000-0000-0000-000000000000",CUSER:null==this.core.auth.data?"":this.core.auth.data.CODE,CUSER_NAME:null==this.core.auth.data?"":this.core.auth.data.NAME,BARCODE:"",TYPE:0,TYPE_NAME:"EAN13",ITEM_GUID:"00000000-0000-0000-0000-000000000000",ITEM_CODE:"",ITEM_NAME:"",UNIT_GUID:"00000000-0000-0000-0000-000000000000",UNIT_ID:"001",UNIT_TYPE:0,UNIT_NAME:"UNIT",UNIT_FACTOR:"0",UNIT_SYMBOL:""},this._initDs()}return(0,s.Z)(E,[{key:"_initDs",value:function(){var E=new D.$A("ITEM_BARCODE");E.selectCmd={query:"SELECT * FROM [dbo].[ITEM_BARCODE_VW_01] WHERE ((BARCODE = @BARCODE) OR (@BARCODE = '')) AND ((TYPE = @TYPE) OR (@TYPE = -1)) AND ((ITEM_GUID = @ITEM_GUID) OR (@ITEM_GUID = '00000000-0000-0000-0000-000000000000')) AND ((ITEM_CODE = @ITEM_CODE) OR (@ITEM_CODE = ''))",param:["BARCODE:string|50","TYPE:int","ITEM_GUID:string|50","ITEM_CODE:string|25"]},E.insertCmd={query:"EXEC [dbo].[PRD_ITEM_BARCODE_INSERT] @GUID = @PGUID, @CUSER = @PCUSER, @TYPE = @PTYPE, @ITEM = @PITEM, @BARCODE = @PBARCODE, @UNIT = @PUNIT ",param:["PGUID:string|50","PCUSER:string|25","PTYPE:int","PITEM:string|50","PBARCODE:string|50","PUNIT:string|50"],dataprm:["GUID","CUSER","TYPE","ITEM_GUID","BARCODE","UNIT_GUID"]},E.updateCmd={query:"EXEC [dbo].[PRD_ITEM_BARCODE_UPDATE] @GUID = @PGUID, @CUSER = @PCUSER, @TYPE = @PTYPE, @ITEM = @PITEM, @BARCODE = @PBARCODE, @UNIT = @PUNIT ",param:["PGUID:string|50","PCUSER:string|25","PTYPE:int","PITEM:string|50","PBARCODE:string|50","PUNIT:string|50"],dataprm:["GUID","CUSER","TYPE","ITEM_GUID","BARCODE","UNIT_GUID"]},E.deleteCmd={query:"EXEC [dbo].[PRD_ITEM_BARCODE_DELETE] @CUSER = @PCUSER, @UPDATE = 1, @GUID = @PGUID ",param:["PCUSER:string|25","PGUID:string|50"],dataprm:["CUSER","GUID"]},this.ds.add(E)}},{key:"dt",value:function(){return arguments.length>0?this.ds.get(arguments[0]):this.ds.get(0)}},{key:"addEmpty",value:function(){if(void 0!==this.dt("ITEM_BARCODE")){var E={};(E=P({},arguments.length>0?arguments[0]:this.empty)).GUID=D.$A.uuidv4(),this.dt("ITEM_BARCODE").push(E)}}},{key:"clearAll",value:function(){for(var E=0;E<this.ds.length;E++)this.dt(E).clear()}},{key:"load",value:function(){var E=arguments,t=this;return new Promise(function(){var e=(0,I.Z)(a().mark((function e(I){var T;return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return T={BARCODE:"",TYPE:-1,ITEM_GUID:"00000000-0000-0000-0000-000000000000",ITEM_CODE:""},E.length>0&&(T.BARCODE=void 0===E[0].BARCODE?"":E[0].BARCODE,T.TYPE=void 0===E[0].TYPE?-1:E[0].TYPE,T.ITEM_GUID=void 0===E[0].ITEM_GUID?"00000000-0000-0000-0000-000000000000":E[0].ITEM_GUID,T.ITEM_CODE=void 0===E[0].ITEM_CODE?"":E[0].ITEM_CODE),t.ds.get("ITEM_BARCODE").selectCmd.value=Object.values(T),e.next=5,t.ds.get("ITEM_BARCODE").refresh();case 5:I(t.ds.get("ITEM_BARCODE"));case 6:case"end":return e.stop()}}),e)})));return function(E){return e.apply(this,arguments)}}())}},{key:"save",value:function(){var E=this;return new Promise(function(){var t=(0,I.Z)(a().mark((function t(e){return a().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return E.ds.delete(),t.t0=e,t.next=4,E.ds.update();case 4:t.t1=t.sent,(0,t.t0)(t.t1);case 6:case"end":return t.stop()}}),t)})));return function(E){return t.apply(this,arguments)}}())}}]),E}(),u=function(){function E(){(0,r.Z)(this,E),this.core=D.vE.instance,this.ds=new D.gx,this.empty={GUID:"00000000-0000-0000-0000-000000000000",CUSER:null==this.core.auth.data?"":this.core.auth.data.CODE,LUSER:null==this.core.auth.data?"":this.core.auth.data.CODE,ITEM_GUID:"00000000-0000-0000-0000-000000000000",ITEM_CODE:"",ITEM_NAME:"",CUSTOMER_GUID:"00000000-0000-0000-0000-000000000000",CUSTOMER_CODE:"",CUSTOMER_NAME:"",MULTICODE:"",CUSTOMER_PRICE_GUID:"00000000-0000-0000-0000-000000000000",CUSTOMER_PRICE:"0",CUSTOMER_PRICE_DATE:"",CUSTOMER_PRICE_USER_NAME:null==this.core.auth.data?"":this.core.auth.data.NAME},this._initDs()}return(0,s.Z)(E,[{key:"_initDs",value:function(){var E=new D.$A("ITEM_MULTICODE");E.selectCmd={query:"SELECT * FROM [dbo].[ITEM_MULTICODE_VW_01] WHERE ((ITEM_GUID = @ITEM_GUID) OR (@ITEM_GUID = '00000000-0000-0000-0000-000000000000')) AND ((ITEM_CODE = @ITEM_CODE) OR (@ITEM_CODE = '')) AND ((ITEM_NAME = @ITEM_NAME) OR (@ITEM_NAME = '')) AND ((CUSTOMER_GUID = @CUSTOMER_GUID) OR (@CUSTOMER_GUID = '00000000-0000-0000-0000-000000000000')) AND ((CUSTOMER_CODE = @CUSTOMER_CODE) OR (@CUSTOMER_CODE = '')) AND ((CUSTOMER_NAME = @CUSTOMER_NAME) OR (@CUSTOMER_NAME = '')) AND ((MULTICODE = @MULTICODE) OR (@MULTICODE = '')) ORDER BY CHANGE_PRICE_DATE DESC",param:["ITEM_GUID:string|50","ITEM_CODE:string|25","ITEM_NAME:string|250","CUSTOMER_GUID:string|50","CUSTOMER_CODE:string|25","CUSTOMER_NAME:string|250","MULTICODE:string|25"]},E.insertCmd={query:"EXEC [dbo].[PRD_ITEM_MULTICODE_INSERT] @GUID = @PGUID, @CUSER = @PCUSER, @ITEM = @PITEM, @CUSTOMER = @PCUSTOMER, @CODE = @PCODE, @PRICE_GUID = @PPRICE_GUID, @PRICE = @PPRICE ",param:["PGUID:string|50","PCUSER:string|25","PITEM:string|50","PCUSTOMER:string|50","PCODE:string|25","PPRICE_GUID:string|50","PPRICE:float"],dataprm:["GUID","CUSER","ITEM_GUID","CUSTOMER_GUID","MULTICODE","CUSTOMER_PRICE_GUID","CUSTOMER_PRICE"]},E.updateCmd={query:"EXEC [dbo].[PRD_ITEM_MULTICODE_UPDATE] @GUID = @PGUID, @CUSER = @PCUSER, @ITEM = @PITEM, @CUSTOMER = @PCUSTOMER, @CODE = @PCODE, @PRICE_GUID = @PPRICE_GUID, @PRICE = @PPRICE ",param:["PGUID:string|50","PCUSER:string|25","PITEM:string|50","PCUSTOMER:string|50","PCODE:string|25","PPRICE_GUID:string|50","PPRICE:float"],dataprm:["GUID","CUSER","ITEM_GUID","CUSTOMER_GUID","MULTICODE","CUSTOMER_PRICE_GUID","CUSTOMER_PRICE"]},E.deleteCmd={query:"EXEC [dbo].[PRD_ITEM_MULTICODE_DELETE] @CUSER = @PCUSER, @UPDATE = 1, @GUID = @PGUID ",param:["PCUSER:string|25","PGUID:string|50"],dataprm:["CUSER","GUID"]},this.ds.add(E)}},{key:"dt",value:function(){return arguments.length>0?this.ds.get(arguments[0]):this.ds.get(0)}},{key:"addEmpty",value:function(){if(void 0!==this.dt("ITEM_MULTICODE")){var E={};(E=P({},arguments.length>0?arguments[0]:this.empty)).GUID=D.$A.uuidv4(),E.CUSTOMER_PRICE_GUID=D.$A.uuidv4(),this.dt("ITEM_MULTICODE").push(E)}}},{key:"clearAll",value:function(){for(var E=0;E<this.ds.length;E++)this.dt(E).clear()}},{key:"load",value:function(){var E=arguments,t=this;return new Promise(function(){var e=(0,I.Z)(a().mark((function e(I){var T;return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return T={ITEM_GUID:"00000000-0000-0000-0000-000000000000",ITEM_CODE:"",ITEM_NAME:"",CUSTOMER_GUID:"00000000-0000-0000-0000-000000000000",CUSTOMER_CODE:"",CUSTOMER_NAME:"",MULTICODE:""},E.length>0&&(T.ITEM_GUID=void 0===E[0].ITEM_GUID?"00000000-0000-0000-0000-000000000000":E[0].ITEM_GUID,T.ITEM_CODE=void 0===E[0].ITEM_CODE?"":E[0].ITEM_CODE,T.ITEM_NAME=void 0===E[0].ITEM_NAME?"":E[0].ITEM_NAME,T.CUSTOMER_GUID=void 0===E[0].CUSTOMER_GUID?"00000000-0000-0000-0000-000000000000":E[0].CUSTOMER_GUID,T.CUSTOMER_CODE=void 0===E[0].CUSTOMER_CODE?"":E[0].CUSTOMER_CODE,T.CUSTOMER_NAME=void 0===E[0].CUSTOMER_NAME?"":E[0].CUSTOMER_NAME,T.MULTICODE=void 0===E[0].MULTICODE?"":E[0].MULTICODE),t.ds.get("ITEM_MULTICODE").selectCmd.value=Object.values(T),e.next=5,t.ds.get("ITEM_MULTICODE").refresh();case 5:I(t.ds.get("ITEM_MULTICODE"));case 6:case"end":return e.stop()}}),e)})));return function(E){return e.apply(this,arguments)}}())}},{key:"save",value:function(){var E=this;return new Promise(function(){var t=(0,I.Z)(a().mark((function t(e){return a().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.t0=e,t.next=3,E.ds.update();case 3:t.t1=t.sent,(0,t.t0)(t.t1);case 5:case"end":return t.stop()}}),t)})));return function(E){return t.apply(this,arguments)}}())}}]),E}(),O=function(){function E(){(0,r.Z)(this,E),this.core=D.vE.instance,this.ds=new D.gx,this.empty={GUID:"00000000-0000-0000-0000-000000000000",CUSER:null==this.core.auth.data?"":this.core.auth.data.CODE,ITEM_GUID:"00000000-0000-0000-0000-000000000000",ITEM_CODE:"",ITEM_NAME:"",IMAGE:""},this._initDs()}return(0,s.Z)(E,[{key:"_initDs",value:function(){var E=new D.$A("ITEM_IMAGE");E.selectCmd={query:"SELECT * FROM [dbo].[ITEM_IMAGE_VW_01] WHERE ((ITEM_GUID = @ITEM_GUID) OR (@ITEM_GUID = '00000000-0000-0000-0000-000000000000')) AND ((ITEM_CODE = @ITEM_CODE) OR (@ITEM_CODE = '')) AND ((ITEM_NAME = @ITEM_NAME) OR (@ITEM_NAME = '')) ",param:["ITEM_GUID:string|50","ITEM_CODE:string|25","ITEM_NAME:string|250"]},E.insertCmd={query:"EXEC [dbo].[PRD_ITEM_IMAGE_INSERT] @GUID = @PGUID, @CUSER = @PCUSER, @ITEM = @PITEM, @IMAGE = @PIMAGE ",param:["PGUID:string|50","PCUSER:string|25","PITEM:string|50","PIMAGE:string|max"],dataprm:["GUID","CUSER","ITEM_GUID","IMAGE"]},E.updateCmd={query:"EXEC [dbo].[PRD_ITEM_IMAGE_UPDATE] @GUID = @PGUID, @CUSER = @PCUSER, @ITEM = @PITEM, @IMAGE = @PIMAGE ",param:["PGUID:string|50","PCUSER:string|25","PITEM:string|50","PIMAGE:string|max"],dataprm:["GUID","CUSER","ITEM_GUID","IMAGE"]},E.deleteCmd={query:"EXEC [dbo].[PRD_ITEM_IMAGE_DELETE] @CUSER = @PCUSER, @GUID = @PGUID ",param:["PCUSER:string|25","PGUID:string|50"],dataprm:["CUSER","GUID"]},this.ds.add(E)}},{key:"dt",value:function(){return arguments.length>0?this.ds.get(arguments[0]):this.ds.get(0)}},{key:"addEmpty",value:function(){if(void 0!==this.dt("ITEM_IMAGE")){var E={};(E=P({},arguments.length>0?arguments[0]:this.empty)).GUID=D.$A.uuidv4(),this.dt("ITEM_IMAGE").push(E)}}},{key:"clearAll",value:function(){for(var E=0;E<this.ds.length;E++)this.dt(E).clear()}},{key:"load",value:function(){var E=arguments,t=this;return new Promise(function(){var e=(0,I.Z)(a().mark((function e(I){var T;return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return T={ITEM_GUID:"00000000-0000-0000-0000-000000000000",ITEM_CODE:"",ITEM_NAME:""},E.length>0&&(T.ITEM_GUID=void 0===E[0].ITEM_GUID?"00000000-0000-0000-0000-000000000000":E[0].ITEM_GUID,T.ITEM_CODE=void 0===E[0].ITEM_CODE?"":E[0].ITEM_CODE,T.ITEM_NAME=void 0===E[0].ITEM_NAME?"":E[0].ITEM_NAME),t.ds.get("ITEM_IMAGE").selectCmd.value=Object.values(T),e.next=5,t.ds.get("ITEM_IMAGE").refresh();case 5:I(t.ds.get("ITEM_IMAGE"));case 6:case"end":return e.stop()}}),e)})));return function(E){return e.apply(this,arguments)}}())}},{key:"save",value:function(){var E=this;return new Promise(function(){var t=(0,I.Z)(a().mark((function t(e){return a().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.t0=e,t.next=3,E.ds.update();case 3:t.t1=t.sent,(0,t.t0)(t.t1);case 5:case"end":return t.stop()}}),t)})));return function(E){return t.apply(this,arguments)}}())}}]),E}(),d=function(){function E(){(0,r.Z)(this,E),this.core=D.vE.instance,this.ds=new D.gx,this.empty={GUID:"00000000-0000-0000-0000-000000000000",ID:"",NAME:"",SYMBOL:""},this._initDs()}return(0,s.Z)(E,[{key:"_initDs",value:function(){var E=new D.$A("UNIT");E.selectCmd={query:"SELECT * FROM UNIT WHERE ((ID = @ID) OR (@ID = '')) AND ((NAME = @NAME) OR (@NAME = '')) AND ((SYMBOL = @SYMBOL) OR (@SYMBOL = '')) ORDER BY ID ASC ",param:["ID:string|25","NAME:string|50","SYMBOL:string|10"]},this.ds.add(E)}},{key:"dt",value:function(){return arguments.length>0?this.ds.get(arguments[0]):this.ds.get(0)}},{key:"addEmpty",value:function(){if(void 0!==this.dt("UNIT")){var E={};(E=P({},arguments.length>0?arguments[0]:this.empty)).GUID=D.$A.uuidv4(),this.dt("UNIT").push(E)}}},{key:"clearAll",value:function(){for(var E=0;E<this.ds.length;E++)this.dt(E).clear()}},{key:"load",value:function(){var E=arguments,t=this;return new Promise(function(){var e=(0,I.Z)(a().mark((function e(I){var T;return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return T={ID:"",NAME:"",SYMBOL:""},E.length>0&&(T.ID=void 0===E[0].ID?"":E[0].ID,T.NAME=void 0===E[0].NAME?"":E[0].NAME,T.SYMBOL=void 0===E[0].SYMBOL?"":E[0].SYMBOL),t.ds.get("UNIT").selectCmd.value=Object.values(T),e.next=5,t.ds.get("UNIT").refresh();case 5:I(t.ds.get("UNIT"));case 6:case"end":return e.stop()}}),e)})));return function(E){return e.apply(this,arguments)}}())}},{key:"save",value:function(){var E=this;return new Promise(function(){var t=(0,I.Z)(a().mark((function t(e){return a().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.t0=e,t.next=3,E.ds.update();case 3:t.t1=t.sent,(0,t.t0)(t.t1);case 5:case"end":return t.stop()}}),t)})));return function(E){return t.apply(this,arguments)}}())}}]),E}(),o=function(){function E(){(0,r.Z)(this,E),this.core=D.vE.instance,this.ds=new D.gx,this.empty=(0,T.Z)({GUID:"00000000-0000-0000-0000-000000000000",CUSER:null==this.core.auth.data?"":this.core.auth.data.CODE,TYPE:"0",SPECIAL:"",CODE:"",NAME:"",SNAME:"",VAT:5.5,COST_PRICE:0,MIN_PRICE:0,MAX_PRICE:0,STATUS:!0,MAIN_GRP:"",MAIN_GRP_NAME:"",SUB_GRP:"",ORGINS:"",ORGINS_NAME:"",SECTOR:"",RAYON:"",SHELF:"",WEIGHING:!1,SALE_JOIN_LINE:!0,TICKET_REST:!1,BARCODE:"",UNIT_NAME:"",UNIT_FACTOR:"",CUSTOMER:"00000000-0000-0000-0000-000000000000",CUSTOMER_CODE:"",CUSTOMER_NAME:""},"WEIGHING",!1),this._initDs()}return(0,s.Z)(E,[{key:"_initDs",value:function(){var E=new D.$A("ITEM_EDIT");E.selectCmd={query:"SELECT *,MAIN_UNIT_NAME AS UNIT_NAME,CASE WHEN PRICE_SALE <> 0 THEN CONVERT(nvarchar,ROUND((PRICE_SALE / ((VAT / 100) + 1)) - COST_PRICE,2)) + '/ %' + CONVERT(nvarchar,ROUND((((PRICE_SALE / ((VAT / 100) + 1)) - COST_PRICE) / (PRICE_SALE / ((VAT / 100) + 1))) * 100,2)) ELSE '0'  END AS MARGIN, CASE WHEN PRICE_SALE <> 0 THEN CONVERT(nvarchar,ROUND(((PRICE_SALE / ((VAT / 100) + 1)) - COST_PRICE) / 1.12,2)) + '/ %' + CONVERT(nvarchar,ROUND(((((PRICE_SALE / ((VAT / 100) + 1)) - COST_PRICE) / 1.12) / (PRICE_SALE / ((VAT / 100) + 1))) * 100,2)) ELSE '0' END AS NETMARGIN FROM ITEMS_EDIT_VW_01 WHERE {0} ((NAME LIKE @NAME +'%') OR (@NAME = '')) AND ((MAIN_GRP = @MAIN_GRP) OR (@MAIN_GRP = '')) AND ((CUSTOMER_CODE = @CUSTOMER_CODE) OR (@CUSTOMER_CODE = '')) ORDER BY NAME",param:["NAME:string|250","MAIN_GRP:string|25","CUSTOMER_CODE:string|25"]},E.updateCmd={query:"EXEC [dbo].[PRD_COLLECTIVE_ITEMS_EDIT] @GUID = @PGUID, @CUSER = @PCUSER, @CODE = @PCODE, @NAME = @PNAME, @VAT = @PVAT, @COST_PRICE = @PCOST_PRICE, @WEIGHING = @PWEIGHING, @STATUS = @PSTATUS, @ORGINS = @PORGINS, @BARCODE = @PBARCODE, @BARCODE_GUID = @PBARCODE_GUID, @MULTICODE = @PMULTICODE, @CUSTOMER_PRICE = @PCUSTOMER_PRICE, @PRICE_SALE = @PPRICE_SALE, @CUSTOMER_GUID = @PCUSTOMER_GUID, @CUSTOMER_PRICE_GUID = @PCUSTOMER_PRICE_GUID, @PRICE_SALE_GUID = @PPRICE_SALE_GUID, @UNDER_UNIT_GUID = @PUNDER_UNIT_GUID, @MAIN_UNIT_ID = @PMAIN_UNIT_ID, @UNDER_FACTOR = @PUNDER_FACTOR, @UNDER_UNIT_ID = @PUNDER_UNIT_ID, @UNDER_UNIT_NAME = @PUNDER_UNIT_NAME ",param:["PGUID:string|50","PCUSER:string|25","PCODE:string|25","PNAME:string|250","PVAT:float","PCOST_PRICE:float","PWEIGHING:bit","PSTATUS:bit","PORGINS:string|50","PBARCODE:string|50","PBARCODE_GUID:string|50","PMULTICODE:string|50","PCUSTOMER_PRICE:string|50","PPRICE_SALE:float","PCUSTOMER_GUID:string|50","PCUSTOMER_PRICE_GUID:string|50","PPRICE_SALE_GUID:string|50","PUNDER_UNIT_GUID:string|50","PMAIN_UNIT_ID:string|25","PUNDER_FACTOR:float","PUNDER_UNIT_ID:string|50","PUNDER_UNIT_NAME:string|25"],dataprm:["GUID","CUSER","CODE","NAME","VAT","COST_PRICE","WEIGHING","STATUS","ORGINS","BARCODE","BARCODE_GUID","MULTICODE","CUSTOMER_PRICE","PRICE_SALE","CUSTOMER_GUID","CUSTOMER_PRICE_GUID","PRICE_SALE_GUID","UNDER_UNIT_GUID","MAIN_UNIT_ID","UNDER_FACTOR","UNDER_UNIT_ID","UNDER_UNIT_NAME"]},this.ds.add(E),this.ds.get("ITEM_EDIT").noColumnEdit=["NET_MARGIN","NET_MARGIN_RATE","GROSS_MARGIN","GROSS_MARGIN_RATE"]}},{key:"dt",value:function(){return arguments.length>0?this.ds.get(arguments[0]):this.ds.get(0)}},{key:"addEmpty",value:function(){if(void 0!==this.dt("ITEM_EDIT")){var E={};(E=P({},arguments.length>0?arguments[0]:this.empty)).GUID=D.$A.uuidv4(),this.dt("ITEM_EDIT").push(E)}}},{key:"clearAll",value:function(){for(var E=0;E<this.ds.length;E++)this.dt(E).clear()}},{key:"load",value:function(){var E=arguments,t=this;return new Promise(function(){var e=(0,I.Z)(a().mark((function e(I){var T;return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(T={NAME:"%",MAIN_GRP:"",CUSTOMER_CODE:"",QUERY:""},!(E.length>0)){e.next=11;break}return T.NAME=void 0===E[0].NAME?"%":E[0].NAME,T.MAIN_GRP=void 0===E[0].MAIN_GRP?"":E[0].MAIN_GRP,T.CUSTOMER_CODE=void 0===E[0].CUSTOMER_CODE?"":E[0].CUSTOMER_CODE,t.ds.get("ITEM_EDIT").selectCmd={query:"SELECT *,MAIN_UNIT_NAME AS UNIT_NAME,CASE WHEN PRICE_SALE <> 0 THEN CONVERT(nvarchar,ROUND((PRICE_SALE / ((VAT / 100) + 1)) - COST_PRICE,2)) + '/ %' + CONVERT(nvarchar,ROUND((((PRICE_SALE / ((VAT / 100) + 1)) - COST_PRICE) / (PRICE_SALE / ((VAT / 100) + 1))) * 100,2)) ELSE '0'  END AS MARGIN, CASE WHEN PRICE_SALE <> 0 THEN CONVERT(nvarchar,ROUND(((PRICE_SALE / ((VAT / 100) + 1)) - COST_PRICE) / 1.12,2)) + '/ %' + CONVERT(nvarchar,ROUND(((((PRICE_SALE / ((VAT / 100) + 1)) - COST_PRICE) / 1.12) / (PRICE_SALE / ((VAT / 100) + 1))) * 100,2)) ELSE '0' END AS NETMARGIN FROM ITEMS_EDIT_VW_01 WHERE {0} ((NAME LIKE @NAME +'%') OR (@NAME = '')) AND ((MAIN_GRP = @MAIN_GRP) OR (@MAIN_GRP = '')) AND ((CUSTOMER_CODE = @CUSTOMER_CODE) OR (@CUSTOMER_CODE = ''))",param:["NAME:string|250","MAIN_GRP:string|25","CUSTOMER_CODE:string|25"]},void 0===E[0].QUERY||void 0!==E[0].QUERY&&""==E[0].QUERY?t.ds.get("ITEM_EDIT").selectCmd.query=t.ds.get("ITEM_EDIT").selectCmd.query.replaceAll("{0}",""):t.ds.get("ITEM_EDIT").selectCmd.query=t.ds.get("ITEM_EDIT").selectCmd.query.replaceAll("{0}",E[0].QUERY),t.ds.get("ITEM_EDIT").selectCmd.value=Object.values(T),e.next=10,t.ds.get("ITEM_EDIT").refresh();case 10:I(t.ds.get("ITEM_EDIT"));case 11:case"end":return e.stop()}}),e)})));return function(E){return e.apply(this,arguments)}}())}},{key:"save",value:function(){var E=this;return new Promise(function(){var t=(0,I.Z)(a().mark((function t(e){return a().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.t0=e,t.next=3,E.ds.update();case 3:t.t1=t.sent,(0,t.t0)(t.t1);case 5:case"end":return t.stop()}}),t)})));return function(E){return t.apply(this,arguments)}}())}}]),E}(),N=function(){function E(){(0,r.Z)(this,E),this.core=D.vE.instance,this.ds=new D.gx,this.empty={GUID:"00000000-0000-0000-0000-000000000000",CDATE:_()(new Date).format("YYYY-MM-DD"),CUSER:this.core.auth.data.CODE,CUSER_NAME:"",LDATE:_()(new Date).format("YYYY-MM-DD"),LUSER:this.core.auth.data.CODE,LUSER_NAME:"",CODE:"",NAME:"",TYPE:0,STATUS:!0},this._initDs()}return(0,s.Z)(E,[{key:"_initDs",value:function(){var E=new D.$A("DEPOT");E.selectCmd={query:"SELECT * FROM [dbo].[DEPOT_VW_01] WHERE ((GUID = @GUID) OR (@GUID = '00000000-0000-0000-0000-000000000000')) AND ((CODE = @CODE) OR (@CODE = ''))",param:["GUID:string|50","CODE:string|25"]},E.insertCmd={query:"EXEC [dbo].[PRD_DEPOT_INSERT] @GUID = @PGUID, @CUSER = @PCUSER, @CODE = @PCODE, @NAME = @PNAME, @TYPE = @PTYPE, @STATUS = @PSTATUS ",param:["PGUID:string|50","PCUSER:string|25","PCODE:string|50","PNAME:string|50","PTYPE:int","PSTATUS:bit"],dataprm:["GUID","CUSER","CODE","NAME","TYPE","STATUS"]},E.updateCmd={query:"EXEC [dbo].[PRD_DEPOT_UPDATE] @GUID = @PGUID, @CUSER = @PCUSER, @CODE = @PCODE, @NAME = @PNAME, @TYPE = @PTYPE, @STATUS = @PSTATUS ",param:["PGUID:string|50","PCUSER:string|25","PCODE:string|50","PNAME:string|50","PTYPE:int","PSTATUS:bit"],dataprm:["GUID","CUSER","CODE","NAME","TYPE","STATUS"]},E.deleteCmd={query:"EXEC [dbo].[PRD_DEPOT_DELETE] @CUSER = @PCUSER, @UPDATE = 1, @GUID = @PGUID ",param:["PCUSER:string|25","PGUID:string|50"],dataprm:["CUSER","GUID"]},this.ds.add(E)}},{key:"dt",value:function(){return arguments.length>0?this.ds.get(arguments[0]):this.ds.get(0)}},{key:"addEmpty",value:function(){if(void 0!==this.dt("DEPOT")){var E={};(E=P({},arguments.length>0?arguments[0]:this.empty)).GUID=D.$A.uuidv4(),this.dt("DEPOT").push(E)}}},{key:"clearAll",value:function(){for(var E=0;E<this.ds.length;E++)this.dt(E).clear()}},{key:"load",value:function(){var E=arguments,t=this;return new Promise(function(){var e=(0,I.Z)(a().mark((function e(I){var T;return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return T={GUID:"00000000-0000-0000-0000-000000000000",CODE:""},E.length>0&&(T.GUID=void 0===E[0].GUID?"00000000-0000-0000-0000-000000000000":E[0].GUID,T.CODE=void 0===E[0].CODE?"":E[0].CODE),t.ds.get("DEPOT").selectCmd.value=Object.values(T),e.next=5,t.ds.get("DEPOT").refresh();case 5:I(t.ds.get("DEPOT"));case 6:case"end":return e.stop()}}),e)})));return function(E){return e.apply(this,arguments)}}())}},{key:"save",value:function(){var E=this;return new Promise(function(){var t=(0,I.Z)(a().mark((function t(e){return a().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return E.ds.delete(),t.t0=e,t.next=4,E.ds.update();case 4:t.t1=t.sent,(0,t.t0)(t.t1);case 6:case"end":return t.stop()}}),t)})));return function(E){return t.apply(this,arguments)}}())}}]),E}(),c=function(){function E(){(0,r.Z)(this,E),this.core=D.vE.instance,this.ds=new D.gx,this.empty={GUID:"00000000-0000-0000-0000-000000000000",CUSER:null==this.core.auth.data?"":this.core.auth.data.CODE,CUSER_NAME:null==this.core.auth.data?"":this.core.auth.data.NAME,ITEM_GUID:"00000000-0000-0000-0000-000000000000",ITEM_CODE:"",ITEM_NAME:"",PRICE:0,CUSTOMER_GUID:"00000000-0000-0000-0000-000000000000",CUSTOMER_CODE:"",CUSTOMER_NAME:"",CHANGE_DATE:_()(new Date(0)).format("DD/MM/YYYY HH:mm:ss"),CDATE_FORMAT:"",MULTICODE:""},this._initDs()}return(0,s.Z)(E,[{key:"_initDs",value:function(){var E=new D.$A("ITEM_PRICE_LOG");E.selectCmd={query:"SELECT * FROM [ITEM_PRICE_LOG_VW_01] WHERE ITEM_GUID = @ITEM_GUID AND TYPE = 1 ORDER BY LDATE DESC",param:["ITEM_GUID:string|50"]},this.ds.add(E)}},{key:"dt",value:function(){return arguments.length>0?this.ds.get(arguments[0]):this.ds.get(0)}},{key:"clearAll",value:function(){for(var E=0;E<this.ds.length;E++)this.dt(E).clear()}},{key:"load",value:function(){var E=arguments,t=this;return new Promise(function(){var e=(0,I.Z)(a().mark((function e(I){var T;return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return T={ITEM_GUID:"00000000-0000-0000-0000-000000000000"},E.length>0&&(T.ITEM_GUID=void 0===E[0].ITEM_GUID?"00000000-0000-0000-0000-000000000000":E[0].ITEM_GUID),t.ds.get("ITEM_PRICE_LOG").selectCmd.value=Object.values(T),e.next=5,t.ds.get("ITEM_PRICE_LOG").refresh();case 5:I(t.ds.get("ITEM_PRICE_LOG"));case 6:case"end":return e.stop()}}),e)})));return function(E){return e.apply(this,arguments)}}())}},{key:"save",value:function(){var E=this;return new Promise(function(){var t=(0,I.Z)(a().mark((function t(e){return a().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return E.ds.delete(),t.t0=e,t.next=4,E.ds.update();case 4:t.t1=t.sent,(0,t.t0)(t.t1);case 6:case"end":return t.stop()}}),t)})));return function(E){return t.apply(this,arguments)}}())}}]),E}(),G=function(){function E(){(0,r.Z)(this,E),this.core=D.vE.instance,this.ds=new D.gx,this.empty={GUID:"00000000-0000-0000-0000-000000000000",CUSER:null==this.core.auth.data?"":this.core.auth.data.CODE,ITEM_GUID:"00000000-0000-0000-0000-000000000000",ITEM_CODE:"",ITEM_NAME:"",QUANTITY:0,EXP_DATE:_()(new Date(0)).format("DD/MM/YYYY HH:mm:ss")},this._initDs()}return(0,s.Z)(E,[{key:"_initDs",value:function(){var E=new D.$A("ITEM_EXPDATE");E.insertCmd={query:"EXEC [dbo].[PRD_EXPDATE_INSERT] @GUID = @PGUID, @CUSER = @PCUSER, @ITEM_GUID = @PITEM_GUID, @QUANTITY = @PQUANTITY, @EXP_DATE = @PEXP_DATE ",param:["PGUID:string|50","PCUSER:string|25","PITEM_GUID:string|50","PQUANTITY:float","PEXP_DATE:date"],dataprm:["GUID","CUSER","ITEM_GUID","QUANTITY","EXP_DATE"]},this.ds.add(E)}},{key:"dt",value:function(){return arguments.length>0?this.ds.get(arguments[0]):this.ds.get(0)}},{key:"addEmpty",value:function(){if(void 0!==this.dt("ITEM_EXPDATE")){var E={};(E=P({},arguments.length>0?arguments[0]:this.empty)).GUID=D.$A.uuidv4(),this.dt("ITEM_EXPDATE").push(E)}}},{key:"clearAll",value:function(){for(var E=0;E<this.ds.length;E++)this.dt(E).clear()}},{key:"save",value:function(){var E=this;return new Promise(function(){var t=(0,I.Z)(a().mark((function t(e){return a().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.t0=e,t.next=3,E.ds.update();case 3:t.t1=t.sent,(0,t.t0)(t.t1);case 5:case"end":return t.stop()}}),t)})));return function(E){return t.apply(this,arguments)}}())}}]),E}(),h=function(){function E(){(0,r.Z)(this,E),this.core=D.vE.instance,this.ds=new D.gx,this.empty={GUID:"00000000-0000-0000-0000-000000000000",CDATE:_()(new Date).format("YYYY-MM-DD"),CUSER:this.core.auth.data.CODE,CUSER_NAME:"",LDATE:_()(new Date).format("YYYY-MM-DD"),LUSER:this.core.auth.data.CODE,LUSER_NAME:"",CODE:"",NAME:"",VAT:0,STATUS:1},this._initDs()}return(0,s.Z)(E,[{key:"_initDs",value:function(){var E=new D.$A("SERVICE_ITEMS");E.selectCmd={query:"SELECT * FROM [dbo].[SERVICE_ITEMS_VW_01] WHERE ((GUID = @GUID) OR (@GUID = '00000000-0000-0000-0000-000000000000')) AND ((CODE = @CODE) OR (@CODE = ''))",param:["GUID:string|50","CODE:string|25"]},E.insertCmd={query:"EXEC [dbo].[PRD_SERVICE_ITEMS_INSERT] @GUID = @PGUID, @CUSER = @PCUSER, @CODE = @PCODE, @NAME = @PNAME, @VAT = @PVAT, @STATUS = @PSTATUS ",param:["PGUID:string|50","PCUSER:string|25","PCODE:string|50","PNAME:string|50","PVAT:float","PSTATUS:bit"],dataprm:["GUID","CUSER","CODE","NAME","VAT","STATUS"]},E.updateCmd={query:"EXEC [dbo].[PRD_SERVICE_ITEMS_UPDATE] @GUID = @PGUID, @CUSER = @PCUSER, @CODE = @PCODE, @NAME = @PNAME, @VAT = @PVAT, @STATUS = @PSTATUS ",param:["PGUID:string|50","PCUSER:string|25","PCODE:string|50","PNAME:string|50","PVAT:float","PSTATUS:bit"],dataprm:["GUID","CUSER","CODE","NAME","VAT","STATUS"]},E.deleteCmd={query:"EXEC [dbo].[PRD_SERVICE_ITEMS_DELETE] @CUSER = @PCUSER, @UPDATE = 1, @GUID = @PGUID ",param:["PCUSER:string|25","PGUID:string|50"],dataprm:["CUSER","GUID"]},this.ds.add(E)}},{key:"dt",value:function(){return arguments.length>0?this.ds.get(arguments[0]):this.ds.get(0)}},{key:"addEmpty",value:function(){if(void 0!==this.dt("SERVICE_ITEMS")){var E={};(E=P({},arguments.length>0?arguments[0]:this.empty)).GUID=D.$A.uuidv4(),this.dt("SERVICE_ITEMS").push(E)}}},{key:"clearAll",value:function(){for(var E=0;E<this.ds.length;E++)this.dt(E).clear()}},{key:"load",value:function(){var E=arguments,t=this;return new Promise(function(){var e=(0,I.Z)(a().mark((function e(I){var T;return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return T={GUID:"00000000-0000-0000-0000-000000000000",CODE:""},E.length>0&&(T.GUID=void 0===E[0].GUID?"00000000-0000-0000-0000-000000000000":E[0].GUID,T.CODE=void 0===E[0].CODE?"":E[0].CODE),t.ds.get("SERVICE_ITEMS").selectCmd.value=Object.values(T),e.next=5,t.ds.get("SERVICE_ITEMS").refresh();case 5:I(t.ds.get("SERVICE_ITEMS"));case 6:case"end":return e.stop()}}),e)})));return function(E){return e.apply(this,arguments)}}())}},{key:"save",value:function(){var E=this;return new Promise(function(){var t=(0,I.Z)(a().mark((function t(e){return a().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return E.ds.delete(),t.t0=e,t.next=4,E.ds.update();case 4:t.t1=t.sent,(0,t.t0)(t.t1);case 6:case"end":return t.stop()}}),t)})));return function(E){return t.apply(this,arguments)}}())}}]),E}()}}]);