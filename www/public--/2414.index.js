"use strict";(self.webpackChunkwww=self.webpackChunkwww||[]).push([[2414],{55585:(t,e,n)=>{n.d(e,{ZP:()=>d});var a=n(15671),r=n(43144),i=n(97326),o=n(60136),s=n(82963),l=n(61120),c=n(67294),u=n(60250),p=n.n(u);var d=function(t){(0,o.Z)(d,t);var e,n,u=(e=d,n=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}(),function(){var t,a=(0,l.Z)(e);if(n){var r=(0,l.Z)(this).constructor;t=Reflect.construct(a,arguments,r)}else t=a.apply(this,arguments);return(0,s.Z)(this,t)});function d(t){var e;return(0,a.Z)(this,d),(e=u.call(this,t)).state.value=void 0!==t.value&&t.value,e._onValueChanged=e._onValueChanged.bind((0,i.Z)(e)),e}return(0,r.Z)(d,[{key:"_onValueChanged",value:function(t){this.value=t.value,void 0!==this.props.onValueChanged&&this.props.onValueChanged(t)}},{key:"value",get:function(){return this.state.value},set:function(t){var e=this;if(void 0!==t){if(void 0!==this.props.dt&&void 0!==this.props.dt.data&&this.props.dt.data.length>0&&void 0!==this.props.dt.field)if(void 0===this.props.dt.filter)void 0!==this.props.dt.row&&void 0!==this.props.dt.data.find((function(t){return t===e.props.dt.row}))?this.props.dt.data.find((function(t){return t===e.props.dt.row}))[this.props.dt.field]=t:this.props.dt.data[this.props.dt.data.length-1][this.props.dt.field]=t;else{var n=this.props.dt.data.where(this.props.dt.filter);n.length>0&&(void 0!==this.props.dt.row&&void 0!==n.find((function(t){return t===e.props.dt.row}))?n.find((function(t){return t===e.props.dt.row}))[this.props.dt.field]=t:n[n.length-1][this.props.dt.field]=t)}this.setState({value:t})}}},{key:"render",value:function(){return c.createElement(p(),{id:this.props.id,defaultValue:this.props.defaultValue,value:this.state.value,text:this.props.text,onValueChanged:this._onValueChanged},this.props.children,this.validationView())}}]),d}(n(20819).ZP)},62414:(t,e,n)=>{n.r(e),n.d(e,{default:()=>j});var a=n(4942),r=n(15861),i=n(15671),o=n(43144),s=n(60136),l=n(82963),c=n(61120),u=n(64687),p=n.n(u),d=n(67294),h=n(73364),m=n(28996),f=n(30381),b=n.n(f),x=n(42866),E=n.n(x),g=n(53221),v=n.n(g),w=n(25552),I=n.n(w),C=(n(41226),n(91686),n(30886)),D=n(99846),y=(n(5083),n(99077),n(55585),n(417)),P=n(32175),O=n(18405),S=n(73682),k=n(90428),Z=(n(57941),n(60547));function A(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);e&&(a=a.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,a)}return n}function R(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?A(Object(n),!0).forEach((function(e){(0,a.Z)(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):A(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}n(17276);var j=function(t){(0,s.Z)(g,t);var e,n,a,u,f,x=(u=g,f=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}(),function(){var t,e=(0,c.Z)(u);if(f){var n=(0,c.Z)(this).constructor;t=Reflect.construct(e,arguments,n)}else t=e.apply(this,arguments);return(0,l.Z)(this,t)});function g(){var t;return(0,i.Z)(this,g),(t=x.call(this)).core=h.Z.instance.core,t.prmObj=t.param.filter({TYPE:1,USERS:t.user.CODE}),t.acsobj=t.access.filter({TYPE:1,USERS:t.user.CODE}),t.expObj=new m.xo,t}return(0,o.Z)(g,[{key:"componentDidMount",value:(a=(0,r.Z)(p().mark((function t(){return p().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,this.core.util.waitUntil(0);case 2:this.init();case 3:case"end":return t.stop()}}),t,this)}))),function(){return a.apply(this,arguments)})},{key:"init",value:(n=(0,r.Z)(p().mark((function t(){var e=this;return p().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return this.expObj.clearAll(),this.expObj.ds.on("onAddRow",(function(t,n){"new"==n.stat&&(e.btnNew.setState({disabled:!1}),e.btnSave.setState({disabled:!1}),e.btnPrint.setState({disabled:!1}),e.btnDelete.setState({disabled:!1}))})),this.expObj.ds.on("onEdit",(function(t,n){"edit"==n.rowData.stat&&(e.btnNew.setState({disabled:!0}),e.btnSave.setState({disabled:!1}),e.btnPrint.setState({disabled:!1}),e.btnDelete.setState({disabled:!1}),n.rowData.CUSER=e.user.CODE)})),this.expObj.ds.on("onRefresh",(function(t){e.btnNew.setState({disabled:!1}),e.btnSave.setState({disabled:!0}),e.btnPrint.setState({disabled:!1}),e.btnDelete.setState({disabled:!1})})),this.expObj.ds.on("onDelete",(function(t){e.btnNew.setState({disabled:!1}),e.btnSave.setState({disabled:!1}),e.btnPrint.setState({disabled:!1}),e.btnDelete.setState({disabled:!0})})),this.btnSave.setState({disabled:!0}),this.btnNew.setState({disabled:!1}),this.txtPopQuantity.value=1,this.dtPopDate.value=b()(new Date).format("DD/MM/YYYY HH:mm:ss"),t.next=11,this.grdExpDate.dataRefresh({source:this.expObj.dt("ITEM_EXPDATE")});case 11:case"end":return t.stop()}}),t,this)}))),function(){return n.apply(this,arguments)})},{key:"addItem",value:(e=(0,r.Z)(p().mark((function t(e,n){var a,r,i;return p().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(""!=e.CODE){t.next=2;break}return t.abrupt("return");case 2:if(0!=this.txtPopQuantity.value){t.next=8;break}return a={id:"msgZeroQuantity",showTitle:!0,title:this.t("msgZeroQuantity.title"),showCloseButton:!0,width:"350px",height:"200px",button:[{id:"btn01",caption:this.t("msgZeroQuantity.btn01"),location:"after"}],content:d.createElement("div",{style:{textAlign:"center",fontSize:"20px"}},this.t("msgZeroQuantity.msg"))},t.next=6,(0,Z.W)(a);case 6:return this.txtPopQuantity.focus(),t.abrupt("return");case 8:r=0;case 9:if(!(r<this.expObj.dt().length)){t.next=25;break}if(this.expObj.dt()[r].ITEM_CODE!=e.CODE){t.next=22;break}return i={id:"msgCombineItem",showTitle:!0,title:this.t("msgCombineItem.title"),showCloseButton:!0,width:"350px",height:"200px",button:[{id:"btn01",caption:this.t("msgCombineItem.btn01"),location:"before"},{id:"btn02",caption:this.t("msgCombineItem.btn02"),location:"after"}],content:d.createElement("div",{style:{textAlign:"center",fontSize:"20px"}},this.t("msgCombineItem.msg"))},t.next=14,(0,Z.W)(i);case 14:if("btn01"!=t.sent){t.next=21;break}return t.next=18,this.grdExpDate.devGrid.deleteRow(n);case 18:return t.abrupt("return");case 21:return t.abrupt("break",25);case 22:r++,t.next=9;break;case 25:this.expObj.dt()[n].ITEM_GUID=e.GUID,this.expObj.dt()[n].ITEM_CODE=e.CODE,this.expObj.dt()[n].ITEM_NAME=e.NAME,this.expObj.dt()[n].QUANTITY=this.txtPopQuantity.value,this.expObj.dt()[n].EXP_DATE=this.dtPopDate.value;case 30:case"end":return t.stop()}}),t,this)}))),function(t,n){return e.apply(this,arguments)})},{key:"render",value:function(){var t,e=this;return d.createElement(E(),null,d.createElement("div",{className:"row px-2 pt-2"},d.createElement("div",{className:"col-12"},d.createElement(v(),null,d.createElement(w.Item,{location:"after",locateInMenu:"auto"},d.createElement(S.Z,{id:"btnNew",parent:this,icon:"file",type:"default",onClick:function(){e.init()}})),d.createElement(w.Item,{location:"after",locateInMenu:"auto"},d.createElement(S.Z,{id:"btnSave",parent:this,icon:"floppy",type:"default",onClick:function(){var t=(0,r.Z)(p().mark((function t(n){var a,r;return p().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(""!=e.expObj.dt()[e.expObj.dt().length-1].CODE){t.next=3;break}return t.next=3,e.grdExpDate.devGrid.deleteRow(e.expObj.dt().length-1);case 3:return a={id:"msgSave",showTitle:!0,title:e.t("msgSave.title"),showCloseButton:!0,width:"500px",height:"200px",button:[{id:"btn01",caption:e.t("msgSave.btn01"),location:"before"},{id:"btn02",caption:e.t("msgSave.btn02"),location:"after"}],content:d.createElement("div",{style:{textAlign:"center",fontSize:"20px"}},e.t("msgSave.msg"))},t.next=6,(0,Z.W)(a);case 6:if("btn01"!=t.sent){t.next=23;break}return r={id:"msgSaveResult",showTitle:!0,title:e.t("msgSave.title"),showCloseButton:!0,width:"500px",height:"200px",button:[{id:"btn01",caption:e.t("msgSave.btn01"),location:"after"}]},t.next=11,e.expObj.save();case 11:if(t.t0=t.sent,0!=t.t0){t.next=20;break}return r.content=d.createElement("div",{style:{textAlign:"center",fontSize:"20px",color:"green"}},e.t("msgSaveResult.msgSuccess")),t.next=16,(0,Z.W)(r);case 16:e.btnSave.setState({disabled:!0}),e.btnNew.setState({disabled:!1}),t.next=23;break;case 20:return r.content=d.createElement("div",{style:{textAlign:"center",fontSize:"20px",color:"red"}},e.t("msgSaveResult.msgFailed")),t.next=23,(0,Z.W)(r);case 23:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()})),d.createElement(w.Item,{location:"after",locateInMenu:"auto"},d.createElement(S.Z,{id:"btnPrint",parent:this,icon:"print",type:"default",onClick:function(){e.popDesign.show()}})),d.createElement(w.Item,{location:"after",locateInMenu:"auto"},d.createElement(S.Z,{id:"btnDelete",parent:this,icon:"trash",type:"default",onClick:(0,r.Z)(p().mark((function t(){var n;return p().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n={id:"msgDelete",showTitle:!0,title:e.t("msgDelete.title"),showCloseButton:!0,width:"500px",height:"200px",button:[{id:"btn01",caption:e.t("msgDelete.btn01"),location:"before"},{id:"btn02",caption:e.t("msgDelete.btn02"),location:"after"}],content:d.createElement("div",{style:{textAlign:"center",fontSize:"20px"}},e.t("msgDelete.msg"))},t.next=3,(0,Z.W)(n);case 3:if("btn01"!=t.sent){t.next=9;break}return e.expObj.dt("ITEM_EXPDATE").removeAt(0),t.next=8,e.expObj.dt("ITEM_EXPDATE").delete();case 8:e.init();case 9:case"end":return t.stop()}}),t)})))})),d.createElement(w.Item,{location:"after",locateInMenu:"auto",widget:"dxButton",options:{type:"default",icon:"clear",onClick:(t=(0,r.Z)(p().mark((function t(){var n;return p().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n={id:"msgClose",showTitle:!0,title:e.lang.t("msgWarning"),showCloseButton:!0,width:"500px",height:"200px",button:[{id:"btn01",caption:e.lang.t("btnYes"),location:"before"},{id:"btn02",caption:e.lang.t("btnNo"),location:"after"}],content:d.createElement("div",{style:{textAlign:"center",fontSize:"20px"}},e.lang.t("msgClose"))},t.next=3,(0,Z.W)(n);case 3:"btn01"==t.sent&&h.Z.instance.panel.closePage();case 5:case"end":return t.stop()}}),t)}))),function(){return t.apply(this,arguments)})}})))),d.createElement("div",{className:"row px-2 pt-2"},d.createElement(I(),{colCount:2},d.createElement(w.Item,null,d.createElement(w.Label,{text:this.t("txtBarcode"),alignment:"right"}),d.createElement(D.ZP,{id:"txtBarcode",simple:!0,parent:this,placeholder:this.t("txtBarcodePlace"),onEnterKey:function(){var t=(0,r.Z)(p().mark((function t(n){var a,r,i;return p().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(""!=n.component._changedValue){t.next=2;break}return t.abrupt("return");case 2:return a={query:"SELECT ITEM_CODE AS CODE,ITEM_NAME AS NAME,ITEM_GUID AS GUID,BARCODE FROM ITEM_BARCODE_VW_01  WHERE BARCODE = @BARCODE OR ITEM_CODE = @BARCODE ",param:["BARCODE:string|50"],value:[n.component._changedValue]},t.next=5,e.core.sql.execute(a);case 5:if(!((r=t.sent).result.recordset.length>0)){t.next=17;break}return e.PopGrdItemData=r.result.recordset,e.txtPopItemsCode.GUID=r.result.recordset[0].GUID,e.txtPopItemsCode.value=r.result.recordset[0].CODE,e.txtPopItemsName.value=r.result.recordset[0].NAME,e.popItems.show(),t.next=14,e.core.util.waitUntil(500);case 14:e.txtPopQuantity.focus(),t.next=21;break;case 17:return document.getElementById("Sound").play(),i={id:"msgBarcodeNotFound",showTitle:!0,title:e.t("msgBarcodeNotFound.title"),showCloseButton:!0,width:"350px",height:"200px",button:[{id:"btn01",caption:e.t("msgBarcodeNotFound.btn01"),location:"after"}],content:d.createElement("div",{style:{textAlign:"center",fontSize:"20px"}},e.t("msgBarcodeNotFound.msg"))},t.next=21,(0,Z.W)(i);case 21:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}().bind(this)}))),d.createElement(I(),{colCount:1},d.createElement(w.Item,{location:"after"},d.createElement(C.Button,{icon:"add",onClick:function(){var t=(0,r.Z)(p().mark((function t(n){return p().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.core.util.waitUntil(100);case 2:e.popItems.show();case 3:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()})),d.createElement(w.Item,null,d.createElement(O.ZP,{parent:this,id:"grdExpDate",showBorders:!0,columnsAutoWidth:!0,allowColumnReordering:!0,allowColumnResizing:!0,height:"400",width:"100%",dbApply:!1,onRowUpdated:function(){var t=(0,r.Z)(p().mark((function t(e){return p().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),onRowRemoved:function(){var t=(0,r.Z)(p().mark((function t(e){return p().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()},d.createElement(O.PY,{mode:"standart"}),d.createElement(O.LO,{mode:"cell",allowUpdating:!0,allowDeleting:!0,confirmDelete:!1}),d.createElement(O.sg,{dataField:"ITEM_NAME",caption:this.t("grdExpDate.clmName"),width:250}),d.createElement(O.sg,{dataField:"ITEM_CODE",caption:this.t("grdExpDate.clmCode"),width:150}),d.createElement(O.sg,{dataField:"EXP_DATE",caption:this.t("grdExpDate.clmDate"),width:250})))),d.createElement("div",null,d.createElement(P.ZP,{parent:this,id:"popItems",visible:!1,showCloseButton:!0,showTitle:!0,title:this.t("popItems.title"),container:"#root",width:"500",height:"450",position:{of:"#root"}},d.createElement(I(),{colCount:1,height:"fit-content"},d.createElement(w.Item,null,d.createElement(w.Label,{text:this.t("popItems.txtPopItemsCode"),alignment:"right"}),d.createElement(D.ZP,{id:"txtPopItemsCode",parent:this,simple:!0,upper:this.sysParam.filter({ID:"onlyBigChar",USERS:this.user.CODE}).getValue().value,onEnterKey:(0,r.Z)(p().mark((function t(){return p().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.popItemsCode.setVal(e.txtPopItemsCode.value);case 2:e.popItemsCode.show(),e.popItemsCode.onClick=function(t){console.log(t),t.length>0&&(e.PopGrdItemData=t,e.txtPopQuantity.focus(),e.txtPopItemsCode.GUID=t[0].GUID,e.txtPopItemsCode.value=t[0].CODE,e.txtPopItemsName.value=t[0].NAME)};case 4:case"end":return t.stop()}}),t)}))).bind(this),button:[{id:"01",icon:"more",onClick:function(){e.popItemsCode.show(),e.popItemsCode.onClick=function(t){t.length>0&&(e.PopGrdItemData=t,e.txtPopQuantity.focus(),e.txtPopItemsCode.GUID=t[0].GUID,e.txtPopItemsCode.value=t[0].CODE,e.txtPopItemsName.value=t[0].NAME)}}}]},d.createElement(D.cX,{validationGroup:"frmPurcContItems"+this.tabIndex},d.createElement(D.n2,{message:this.t("validItemsCode")})))),d.createElement(w.Item,null,d.createElement(w.Label,{text:this.t("popItems.txtPopItemsName"),alignment:"right"}),d.createElement(D.ZP,{id:"txtPopItemsName",parent:this,simple:!0,editable:!0,upper:this.sysParam.filter({ID:"onlyBigChar",USERS:this.user.CODE}).getValue().value})),d.createElement(w.Item,null,d.createElement(w.Label,{text:this.t("popItems.txtPopItemsQuantity"),alignment:"right"}),d.createElement(D.ZP,{id:"txtPopQuantity",parent:this,simple:!0})),d.createElement(w.Item,null,d.createElement(w.Label,{text:this.t("popItems.dtPopDate"),alignment:"right"}),d.createElement(k.ZP,{simple:!0,parent:this,id:"dtPopDate"})),d.createElement(w.Item,null,d.createElement("div",{className:"row"},d.createElement("div",{className:"col-6"},d.createElement(S.Z,{text:this.lang.t("btnSave"),type:"normal",stylingMode:"contained",width:"100%",validationGroup:"frmPurcContItems"+this.tabIndex,onClick:function(){var t=(0,r.Z)(p().mark((function t(n){var a,i;return p().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if("valid"!=n.validationGroup.validate().status){t.next=18;break}if(e.txtPopQuantity.value=1,e.txtPopItemsCode.value="",e.txtPopItemsName.value="",void 0===e.expObj.dt()[0]){t.next=9;break}if(""!=e.expObj.dt()[e.expObj.dt().length-1].CODE){t.next=9;break}return e.pg_txtItemsCode.show(),e.pg_txtItemsCode.onClick=function(){var t=(0,r.Z)(p().mark((function t(n){return p().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:1==n.length&&e.addItem(n[0],e.expObj.dt().length-1);case 1:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),t.abrupt("return");case 9:return console.log(e.PopGrdItemData[0].CODE),a=R({},e.expObj.empty),e.expObj.addEmpty(a),t.next=14,e.addItem(e.PopGrdItemData[0],e.expObj.dt().length-1);case 14:e.PopGrdItemData=[],e.popItems.hide(),t.next=21;break;case 18:return i={id:"msgSaveValid",showTitle:!0,title:e.t("msgSaveValid.title"),showCloseButton:!0,width:"500px",height:"200px",button:[{id:"btn01",caption:e.t("msgSaveValid.btn01"),location:"after"}],content:d.createElement("div",{style:{textAlign:"center",fontSize:"20px"}},e.t("msgSaveValid.msg"))},t.next=21,(0,Z.W)(i);case 21:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()})),d.createElement("div",{className:"col-6"},d.createElement(S.Z,{text:this.lang.t("btnCancel"),type:"normal",stylingMode:"contained",width:"100%",onClick:function(){e.popItems.hide()}}))))))),d.createElement(y.Z,{id:"popItemsCode",parent:this,container:"#root",visible:!1,position:{of:"#root"},showTitle:!0,showBoffers:!0,width:"90%",height:"90%",title:this.t("popItemsCode.title"),search:!0,data:{source:{select:{query:"SELECT GUID,CODE,NAME,VAT,COST_PRICE FROM ITEMS_VW_01 WHERE STATUS = 1 AND UPPER(CODE) LIKE UPPER(@VAL) OR UPPER(NAME) LIKE UPPER(@VAL)",param:["VAL:string|50"]},sql:this.core.sql}}},d.createElement(O.sg,{dataField:"CODE",caption:this.t("popItemsCode.clmCode"),width:150}),d.createElement(O.sg,{dataField:"NAME",caption:this.t("popItemsCode.clmName"),width:300,defaultSortoffer:"asc"}))))}}]),g}(d.Component)}}]);