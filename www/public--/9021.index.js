"use strict";(self.webpackChunkwww=self.webpackChunkwww||[]).push([[9021],{59021:(e,t,r)=>{r.r(t),r.d(t,{default:()=>L});var a=r(4942),s=r(15861),n=r(15671),i=r(43144),l=r(97326),c=r(60136),o=r(82963),u=r(61120),m=r(64687),E=r.n(m),h=r(67294),p=r(73364),d=r(37400),O=r(42866),C=r.n(O),f=r(53221),b=r.n(f),S=r(25552),x=r.n(S),g=(r(91686),r(30886),r(99846)),P=(r(5083),r(99077)),v=r(55585),y=(r(417),r(32175)),R=(r(18405),r(73682)),D=(r(90428),r(57941),r(60547));function I(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,a)}return r}function T(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?I(Object(r),!0).forEach((function(t){(0,a.Z)(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):I(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}r(17276);var L=function(e){(0,c.Z)(A,e);var t,r,a,m,O,f,I,L=(f=A,I=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,t=(0,u.Z)(f);if(I){var r=(0,u.Z)(this).constructor;e=Reflect.construct(t,arguments,r)}else e=t.apply(this,arguments);return(0,o.Z)(this,e)});function A(e){var t;return(0,n.Z)(this,A),(t=L.call(this,e)).core=p.Z.instance.core,t.prmObj=t.param.filter({TYPE:1,USERS:t.user.CODE}),t.customerObj=new d.an,t.prevCode="",t.state={officalVisible:!0},t.tabIndex=e.data.tabkey,t.sysPrmObj=t.param.filter({TYPE:0,USERS:t.user.CODE}),t.btnRun=t.btnRun.bind((0,l.Z)(t)),t}return(0,i.Z)(A,[{key:"componentDidMount",value:(O=(0,s.Z)(E().mark((function e(){return E().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.core.util.waitUntil(0);case 2:this.init();case 3:case"end":return e.stop()}}),e,this)}))),function(){return O.apply(this,arguments)})},{key:"init",value:(m=(0,s.Z)(E().mark((function e(){return E().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:this.customerObj.clearAll();case 1:case"end":return e.stop()}}),e,this)}))),function(){return m.apply(this,arguments)})},{key:"checkZipcode",value:(a=(0,s.Z)(E().mark((function e(t){var r=this;return E().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",new Promise(function(){var e=(0,s.Z)(E().mark((function e(a){var s,n;return E().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(""===t){e.next=8;break}return s={query:"SELECT COUNTRY_CODE,PLACE FROM ZIPCODE WHERE ZIPCODE = @ZIPCODE ",param:["ZIPCODE:string|50"],value:[t]},e.next=4,r.core.sql.execute(s);case 4:(n=e.sent).result.recordset.length>0?(r.cmbPopCity.value=n.result.recordset[0].PLACE,r.cmbPopCountry.value=n.result.recordset[0].COUNTRY_CODE,a(1)):a(1),e.next=9;break;case 8:a(0);case 9:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()));case 1:case"end":return e.stop()}}),e)}))),function(e){return a.apply(this,arguments)})},{key:"_onCustomerRendered",value:(r=(0,s.Z)(E().mark((function e(t){return E().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.core.util.waitUntil(10);case 2:case"end":return e.stop()}}),e,this)}))),function(e){return r.apply(this,arguments)})},{key:"btnRun",value:(t=(0,s.Z)(E().mark((function e(){return E().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:console.log(this),this.popSettingCustomer.show();case 2:case"end":return e.stop()}}),e,this)}))),function(){return t.apply(this,arguments)})},{key:"render",value:function(){var e,t=this;return h.createElement("div",null,h.createElement(C(),null,h.createElement("div",{className:"row px-2 pt-2"},h.createElement("div",{className:"col-12"},h.createElement(b(),null,h.createElement(S.Item,{location:"after",locateInMenu:"auto"},h.createElement(R.Z,{id:"btnNew",parent:this,icon:"file",type:"default",onClick:function(){t.init()}})),h.createElement(S.Item,{location:"after",locateInMenu:"auto",widget:"dxButton",options:{type:"default",icon:"clear",onClick:(e=(0,s.Z)(E().mark((function e(){var r;return E().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r={id:"msgClose",showTitle:!0,title:t.lang.t("msgWarning"),showCloseButton:!0,width:"500px",height:"200px",button:[{id:"btn01",caption:t.lang.t("btnYes"),location:"before"},{id:"btn02",caption:t.lang.t("btnNo"),location:"after"}],content:h.createElement("div",{style:{textAlign:"center",fontSize:"20px"}},t.lang.t("msgClose"))},e.next=3,(0,D.W)(r);case 3:"btn01"==e.sent&&p.Z.instance.panel.closePage();case 5:case"end":return e.stop()}}),e)}))),function(){return e.apply(this,arguments)})}})))),h.createElement("div",{className:"row px-2 pt-2"},h.createElement("div",{className:"col-12"},h.createElement(x(),{colCount:2,id:"frmCustomers"+this.tabIndex},h.createElement(S.Item,null,h.createElement(S.Label,{text:this.t("cmbType"),alignment:"right"}),h.createElement(P.ZP,{simple:!0,parent:this,id:"cmbType",height:"fit-content",dt:{data:this.customerObj.dt("CUSTOMERS"),field:"TYPE"},displayExpr:"VALUE",valueExpr:"ID",data:{source:[{ID:0,VALUE:this.t("cmbTypeData.individual")},{ID:1,VALUE:this.t("cmbTypeData.company")}]},onValueChanged:function(){var e=(0,s.Z)(E().mark((function e(t){return E().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}().bind(this),param:this.param.filter({ELEMENT:"cmbType",USERS:this.user.CODE}),access:this.access.filter({ELEMENT:"cmbType",USERS:this.user.CODE})})),h.createElement(S.Item,null,h.createElement(S.Label,{text:this.t("cmbGenus"),alignment:"right"}),h.createElement(P.ZP,{simple:!0,parent:this,id:"cmbGenus",height:"fit-content",dt:{data:this.customerObj.dt("CUSTOMERS"),field:"GENUS"},displayExpr:"VALUE",valueExpr:"ID",data:{source:[{ID:0,VALUE:this.t("cmbGenusData.Customer")},{ID:1,VALUE:this.t("cmbGenusData.supplier")},{ID:2,VALUE:this.t("cmbGenusData.both")}]},param:this.param.filter({ELEMENT:"cmbType",USERS:this.user.CODE}),access:this.access.filter({ELEMENT:"cmbType",USERS:this.user.CODE})})),h.createElement(S.Item,null,h.createElement(S.Label,{text:this.t("txtCustomerName"),alignment:"right"}),h.createElement(g.ZP,{id:"txtCustomerName",parent:this,simple:!0,tabIndex:this.tabIndex,dt:{data:this.customerObj.dt("CUSTOMER_OFFICAL"),field:"NAME",filter:{TYPE:0}},upper:this.sysParam.filter({ID:"onlyBigChar",USERS:this.user.CODE}).getValue().value,maxLength:32,param:this.param.filter({ELEMENT:"txtCustomerName",USERS:this.user.CODE}),access:this.access.filter({ELEMENT:"txtCustomerName",USERS:this.user.CODE})})),h.createElement(S.Item,null,h.createElement(S.Label,{text:this.t("txtCustomerLastname"),alignment:"right"}),h.createElement(g.ZP,{id:"txtCustomerLastname",parent:this,simple:!0,tabIndex:this.tabIndex,upper:this.sysParam.filter({ID:"onlyBigChar",USERS:this.user.CODE}).getValue().value,dt:{data:this.customerObj.dt("CUSTOMER_OFFICAL"),field:"LAST_NAME",filter:{TYPE:0}},maxLength:32,param:this.param.filter({ELEMENT:"txtCustomerLastname",USERS:this.user.CODE}),access:this.access.filter({ELEMENT:"txtCustomerLastname",USERS:this.user.CODE})})),h.createElement(S.Item,null,h.createElement(S.Label,{text:this.t("txtPhone1"),alignment:"right"}),h.createElement(g.ZP,{id:"txtPhone1",parent:this,simple:!0,dt:{data:this.customerObj.dt("CUSTOMER_OFFICAL"),field:"PHONE1",filter:{TYPE:0}},upper:this.sysParam.filter({ID:"onlyBigChar",USERS:this.user.CODE}).getValue().value,maxLength:32,access:this.access.filter({ELEMENT:"txtPhone1",USERS:this.user.CODE})})),h.createElement(S.Item,null,h.createElement(S.Label,{text:this.t("txtPhone2"),alignment:"right"}),h.createElement(g.ZP,{id:"txtPhone2",parent:this,simple:!0,dt:{data:this.customerObj.dt("CUSTOMER_OFFICAL"),field:"PHONE2",filter:{TYPE:0}},upper:this.sysParam.filter({ID:"onlyBigChar",USERS:this.user.CODE}).getValue().value,maxLength:32,access:this.access.filter({ELEMENT:"txtPhone2",USERS:this.user.CODE})})),h.createElement(S.Item,null,h.createElement(S.Label,{text:this.t("txtGsmPhone"),alignment:"right"}),h.createElement(g.ZP,{id:"txtGsmPhone",parent:this,simple:!0,dt:{data:this.customerObj.dt("CUSTOMER_OFFICAL"),field:"GSM_PHONE",filter:{TYPE:0}},upper:this.sysParam.filter({ID:"onlyBigChar",USERS:this.user.CODE}).getValue().value,maxLength:32,access:this.access.filter({ELEMENT:"txtGsmPhone",USERS:this.user.CODE})})),h.createElement(S.Item,null,h.createElement(S.Label,{text:this.t("txtOtherPhone"),alignment:"right"}),h.createElement(g.ZP,{id:"txtOtherPhone",parent:this,simple:!0,dt:{data:this.customerObj.dt("CUSTOMER_OFFICAL"),field:"OTHER_PHONE",filter:{TYPE:0}},upper:this.sysParam.filter({ID:"onlyBigChar",USERS:this.user.CODE}).getValue().value,maxLength:32,access:this.access.filter({ELEMENT:"txtOtherPhone",USERS:this.user.CODE})})),h.createElement(S.Item,null,h.createElement(S.Label,{text:this.t("txtEmail"),alignment:"right"}),h.createElement(g.ZP,{id:"txtEmail",parent:this,simple:!0,dt:{data:this.customerObj.dt("CUSTOMER_OFFICAL"),field:"EMAIL",filter:{TYPE:0}},upper:this.sysParam.filter({ID:"onlyBigChar",USERS:this.user.CODE}).getValue().value,maxLength:32,access:this.access.filter({ELEMENT:"txtEmail",USERS:this.user.CODE})})),h.createElement(S.Item,null,h.createElement(S.Label,{text:this.t("txtWeb"),alignment:"right"}),h.createElement(g.ZP,{id:"txtWeb",parent:this,simple:!0,dt:{data:this.customerObj.dt("CUSTOMERS"),field:"WEB"},upper:this.sysParam.filter({ID:"onlyBigChar",USERS:this.user.CODE}).getValue().value,maxLength:32,access:this.access.filter({ELEMENT:"txtWeb",USERS:this.user.CODE})})),h.createElement(S.Item,null,h.createElement(S.Label,{text:this.t("popAdress.txtPopAdress"),alignment:"right"}),h.createElement(g.ZP,{id:"txtPopAdress",parent:this,simple:!0,upper:this.sysParam.filter({ID:"onlyBigChar",USERS:this.user.CODE}).getValue().value})),h.createElement(S.Item,null,h.createElement(S.Label,{text:this.t("popAdress.cmbPopZipcode"),alignment:"right"}),h.createElement(P.ZP,{simple:!0,parent:this,id:"cmbPopZipcode",acceptCustomValue:!0,displayExpr:"ZIPNAME",valueExpr:"ZIPCODE",value:"",searchEnabled:!0,showClearButton:!0,pageSize:50,notRefresh:!0,data:{source:{select:{query:"SELECT [COUNTRY_CODE],[ZIPCODE],[PLACE],ZIPCODE + ' ' + PLACE AS ZIPNAME  FROM [dbo].[ZIPCODE]"},sql:this.core.sql}}})),h.createElement(S.Item,null,h.createElement(S.Label,{text:this.t("popAdress.cmbPopCity"),alignment:"right"}),h.createElement(P.ZP,{simple:!0,parent:this,id:"cmbPopCity",displayExpr:"CITYNAME",valueExpr:"PLACE",value:"",searchEnabled:!0,showClearButton:!0,pageSize:50,notRefresh:!0,data:{source:{select:{query:"SELECT COUNTRY_CODE,ZIPCODE,PLACE,PLACE + ' ' + ZIPCODE AS CITYNAME  FROM [dbo].[ZIPCODE]"},sql:this.core.sql}}})),h.createElement(S.Item,null,h.createElement(S.Label,{text:this.t("popAdress.cmbPopCountry"),alignment:"right"}),h.createElement(P.ZP,{simple:!0,parent:this,id:"cmbPopCountry",displayExpr:"NAME",valueExpr:"CODE",value:"FR",searchEnabled:!0,showClearButton:!0,data:{source:{select:{query:"SELECT CODE,NAME FROM COUNTRY ORDER BY NAME ASC"},sql:this.core.sql}}}))))),h.createElement("div",{className:"row px-2 pt-2"},h.createElement("div",{className:"col-3"}),h.createElement("div",{className:"col-3"}),h.createElement("div",{className:"col-3"}),h.createElement("div",{className:"col-3"},h.createElement(R.Z,{text:this.t("btnGet"),type:"success",width:"100%",onClick:this.btnRun}))),h.createElement("div",null,h.createElement(y.ZP,{parent:this,id:"popSettingCustomer",visible:!1,showCloseButton:!0,showTitle:!0,title:this.t("popSettingCustomer.title"),container:"#root",width:"500",height:"350",position:{of:"#root"}},h.createElement(x(),{colCount:1,height:"fit-content"},h.createElement(S.Item,null,h.createElement(S.Label,{text:this.t("popSettingCustomer.txtStartRef"),alignment:"right"}),h.createElement(g.ZP,{id:"txtStartRef",parent:this,simple:!0,upper:this.sysParam.filter({ID:"onlyBigChar",USERS:this.user.CODE}).getValue().value})),h.createElement(S.Item,null,h.createElement(S.Label,{text:this.t("popSettingCustomer.txtFinishRef"),alignment:"right"}),h.createElement(g.ZP,{id:"txtFinishRef",parent:this,simple:!0,upper:this.sysParam.filter({ID:"onlyBigChar",USERS:this.user.CODE}).getValue().value})),h.createElement(S.Item,null,h.createElement(S.Label,{text:this.t("popSettingCustomer.txtTotal"),alignment:"right"}),h.createElement(g.ZP,{id:"txtTotal",parent:this,simple:!0,upper:this.sysParam.filter({ID:"onlyBigChar",USERS:this.user.CODE}).getValue().value})),h.createElement(S.Item,null,h.createElement(S.Label,{text:this.t("popSettingCustomer.chkDigit"),alignment:"right"}),h.createElement(v.ZP,{id:"chkDigit",parent:this,value:!1})),h.createElement(S.Item,null,h.createElement("div",{className:"row"},h.createElement("div",{className:"col-6"},h.createElement(R.Z,{text:this.lang.t("btnSave"),type:"normal",stylingMode:"contained",width:"100%",onClick:(0,s.Z)(E().mark((function e(){var r,a,s,n,i,l,c,o,u,m,d,O,C;return E().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:p.Z.instance.setState({isExecute:!0}),r=""==t.txtTotal.value?Number(t.txtFinishRef.value)-Number(t.txtStartRef.value):Number(t.txtTotal.value),a=0;case 3:if(!(a<r)){e.next=39;break}if(t.customerObj.clearAll(),t.customerObj.addEmpty(),(s=T({},t.customerObj.customerOffical.empty)).CUSTOMER=t.customerObj.dt()[0].GUID,t.customerObj.customerOffical.addEmpty(s),(n=T({},t.customerObj.customerAdress.empty)).TYPE=0,n.ADRESS=t.txtPopAdress.value,n.ZIPCODE=t.cmbPopZipcode.value,n.CIYT=t.cmbPopCity.value,n.COUNTRY=t.cmbPopCountry.value,n.CUSTOMER=t.customerObj.dt()[0].GUID,t.customerObj.customerAdress.addEmpty(n),i=(i=Number(t.txtStartRef.value)+a).toString(),1==t.chkDigit.value){for(console.log(i.length),l=[],c=0,o=i.length;c<o;c+=1)l.push(+i.charAt(c));u=l[0]+l[2]+l[4]+l[6]+l[8]+l[10],m=3*(l[1]+l[3]+l[5]+l[7]+l[9]+l[11]),d=u+m,console.log(d),10==(O=10-(d%=10))&&(O=0),t.customerObj.dt()[0].CODE=i.toString()+O.toString()}else t.customerObj.dt()[0].CODE=Number(t.txtStartRef.value)+a;return t.customerObj.dt()[0].GENUS=t.cmbGenus.value,t.customerObj.dt()[0].TYPE=t.cmbType.value,t.customerObj.customerOffical.dt("CUSTOMER_OFFICAL")[0].NAME=t.txtCustomerName.value,t.customerObj.customerOffical.dt("CUSTOMER_OFFICAL")[0].LAST_NAME=t.txtCustomerLastname.value,t.customerObj.customerOffical.dt("CUSTOMER_OFFICAL")[0].PHONE1=t.txtPhone1.value,t.customerObj.customerOffical.dt("CUSTOMER_OFFICAL")[0].PHONE2=t.txtPhone2.value,t.customerObj.customerOffical.dt("CUSTOMER_OFFICAL")[0].GSM_PHONE=t.txtGsmPhone.value,t.customerObj.customerOffical.dt("CUSTOMER_OFFICAL")[0].OTHER_PHONE=t.txtOtherPhone.value,t.customerObj.customerOffical.dt("CUSTOMER_OFFICAL")[0].EMAIL=t.txtEmail.value,t.customerObj.customerOffical.dt("CUSTOMER_OFFICAL")[0].WEB=t.customerObj.value,t.customerObj.customerAdress.dt("CUSTOMER_ADRESS").ADRESS=t.txtPopAdress.value,t.customerObj.customerAdress.dt("CUSTOMER_ADRESS")[0].ZIPCODE=t.cmbPopZipcode.value,t.customerObj.customerAdress.dt("CUSTOMER_ADRESS")[0].CIYT=t.cmbPopCity.value,t.customerObj.customerAdress.dt("CUSTOMER_ADRESS")[0].COUNTRY=t.cmbPopCountry.value,e.next=36,t.customerObj.save();case 36:a++,e.next=3;break;case 39:return p.Z.instance.setState({isExecute:!1}),(C={id:"msgSaveResult",showTitle:!0,title:t.t("msgSave.title"),showCloseButton:!0,width:"500px",height:"200px",button:[{id:"btn01",caption:t.t("msgSave.btn01"),location:"after"}]}).content=h.createElement("div",{style:{textAlign:"center",fontSize:"20px",color:"green"}},t.t("msgSaveResult.msgSuccess")),e.next=44,(0,D.W)(C);case 44:t.popSettingCustomer.hide();case 45:case"end":return e.stop()}}),e)})))})),h.createElement("div",{className:"col-6"},h.createElement(R.Z,{text:this.lang.t("btnCancel"),type:"normal",stylingMode:"contained",width:"100%",onClick:function(){t.popSettingCustomer.hide()}})))))))))}}]),A}(h.PureComponent)}}]);