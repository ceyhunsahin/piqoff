"use strict";(self.webpackChunkwww=self.webpackChunkwww||[]).push([[9474],{39474:(t,e,a)=>{a.r(e),a.d(e,{default:()=>L});var n=a(4942),i=a(15861),s=a(15671),c=a(43144),r=a(97326),o=a(60136),l=a(82963),d=a(61120),h=a(64687),u=a.n(h),E=a(67294),m=a(73364),p=a(4598),f=a(30381),C=a.n(f),O=a(42866),b=a.n(O),T=a(53221),D=a.n(T),v=a(25552),g=a.n(v),S=a(65580),x=a.n(S),N=(a(91686),a(30886)),P=a(99846),R=a(5083),I=a(99077),U=(a(55585),a(417)),y=a(32175),_=a(18405),w=a(73682),A=a(90428),k=(a(57941),a(60547));function M(t,e){var a=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),a.push.apply(a,n)}return a}function j(t){for(var e=1;e<arguments.length;e++){var a=null!=arguments[e]?arguments[e]:{};e%2?M(Object(a),!0).forEach((function(e){(0,n.Z)(t,e,a[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(a)):M(Object(a)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(a,e))}))}return t}a(17276),a(51166);var L=function(t){(0,o.Z)(F,t);var e,a,n,h,f,O,T,S,M,L=(S=F,M=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}(),function(){var t,e=(0,d.Z)(S);if(M){var a=(0,d.Z)(this).constructor;t=Reflect.construct(e,arguments,a)}else t=e.apply(this,arguments);return(0,l.Z)(this,t)});function F(t){var e;return(0,s.Z)(this,F),(e=L.call(this,t)).core=m.Z.instance.core,e.prmObj=e.param.filter({TYPE:1,USERS:e.user.CODE}),e.acsobj=e.access.filter({TYPE:1,USERS:e.user.CODE}),e.docObj=new p.Ch,e.tabIndex=t.data.tabkey,e._calculateTotal=e._calculateTotal.bind((0,r.Z)(e)),e._addPayment=e._addPayment.bind((0,r.Z)(e)),e.invoices=[],e.docLocked=!1,e}return(0,c.Z)(F,[{key:"componentDidMount",value:(T=(0,i.Z)(u().mark((function t(){return u().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,this.core.util.waitUntil(0);case 2:this.init();case 3:case"end":return t.stop()}}),t,this)}))),function(){return T.apply(this,arguments)})},{key:"init",value:(O=(0,i.Z)(u().mark((function t(){var e,a=this;return u().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return this.docObj.clearAll(),this.docObj.ds.on("onAddRow",(function(t,e){"new"==e.stat&&(a.btnNew.setState({disabled:!1}),a.btnBack.setState({disabled:!1}),a.btnNew.setState({disabled:!1}),a.btnBack.setState({disabled:!0}),a.btnSave.setState({disabled:!1}),a.btnDelete.setState({disabled:!1}),a.btnCopy.setState({disabled:!1}),a.btnPrint.setState({disabled:!1}))})),this.docObj.ds.on("onEdit",(function(t,e){"edit"==e.rowData.stat&&(a.btnBack.setState({disabled:!1}),a.btnNew.setState({disabled:!0}),a.btnSave.setState({disabled:!1}),a.btnDelete.setState({disabled:!1}),a.btnCopy.setState({disabled:!1}),a.btnPrint.setState({disabled:!1}),e.rowData.CUSER=a.user.CODE)})),this.docObj.ds.on("onRefresh",(function(t){a.btnBack.setState({disabled:!0}),a.btnNew.setState({disabled:!1}),a.btnSave.setState({disabled:!1}),a.btnDelete.setState({disabled:!1}),a.btnCopy.setState({disabled:!1}),a.btnPrint.setState({disabled:!1})})),this.docObj.ds.on("onDelete",(function(t){a.btnBack.setState({disabled:!1}),a.btnNew.setState({disabled:!1}),a.btnSave.setState({disabled:!1}),a.btnDelete.setState({disabled:!1}),a.btnCopy.setState({disabled:!1}),a.btnPrint.setState({disabled:!1})})),this.dtDocDate.value=C()(new Date),(e=j({},this.docObj.empty)).TYPE=0,e.DOC_TYPE=200,e.INPUT="00000000-0000-0000-0000-000000000000",this.docObj.addEmpty(e),this.invoices=[],this.txtRef.readOnly=!1,this.txtRefno.readOnly=!1,this.docLocked=!1,this.frmCollection.option("disabled",!1),t.next=18,this.grdDocPayments.dataRefresh({source:this.docObj.docCustomer.dt("DOC_CUSTOMER")});case 18:case"end":return t.stop()}}),t,this)}))),function(){return O.apply(this,arguments)})},{key:"getDoc",value:(f=(0,i.Z)(u().mark((function t(e,a,n){var i;return u().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return this.docObj.clearAll(),m.Z.instance.setState({isExecute:!0}),t.next=4,this.docObj.load({GUID:e,REF:a,REF_NO:n,TYPE:0,DOC_TYPE:200});case 4:if(m.Z.instance.setState({isExecute:!1}),this.txtRef.readOnly=!0,this.txtRefno.readOnly=!0,0==this.docObj.dt()[0].LOCKED){t.next=15;break}return this.docLocked=!0,i={id:"msgGetLocked",showTitle:!0,title:this.t("msgGetLocked.title"),showCloseButton:!0,width:"500px",height:"200px",button:[{id:"btn01",caption:this.t("msgGetLocked.btn01"),location:"after"}],content:E.createElement("div",{style:{textAlign:"center",fontSize:"20px"}},this.t("msgGetLocked.msg"))},t.next=12,(0,k.W)(i);case 12:this.frmCollection.option("disabled",!0),t.next=17;break;case 15:this.docLocked=!1,this.frmCollection.option("disabled",!1);case 17:case"end":return t.stop()}}),t,this)}))),function(t,e,a){return f.apply(this,arguments)})},{key:"checkDoc",value:(h=(0,i.Z)(u().mark((function t(e,a,n){var s=this;return u().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",new Promise(function(){var t=(0,i.Z)(u().mark((function t(i){var c;return u().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(""===a){t.next=15;break}return t.next=3,(new p.Ch).load({GUID:e,REF:a,REF_NO:n});case 3:if(!(t.sent.length>0)){t.next=12;break}return c={id:"msgCode",showTitle:!0,title:"Dikkat",showCloseButton:!0,width:"500px",height:"200px",button:[{id:"btn01",caption:"EvraÄŸa Git",location:"before"}],content:E.createElement("div",{style:{textAlign:"center",fontSize:"20px"}},"Evrak Bulundu")},t.next=8,(0,k.W)(c);case 8:"btn01"==t.sent?(s.getDoc(e,a,n),i(2)):i(3),t.next=13;break;case 12:i(1);case 13:t.next=16;break;case 15:i(0);case 16:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()));case 1:case"end":return t.stop()}}),t)}))),function(t,e,a){return h.apply(this,arguments)})},{key:"_calculateTotal",value:(n=(0,i.Z)(u().mark((function t(){return u().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:this.docObj.dt()[0].AMOUNT=this.docObj.docCustomer.dt().sum("AMOUNT",2),this.docObj.dt()[0].TOTAL=this.docObj.docCustomer.dt().sum("AMOUNT",2);case 2:case"end":return t.stop()}}),t,this)}))),function(){return n.apply(this,arguments)})},{key:"_addPayment",value:(a=(0,i.Z)(u().mark((function t(e,a){var n,i,s,c,r,o,l,d,h,E;return u().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(this.invoices.length>0){for(n=a,i=0;i<this.invoices.length;i++)n>this.invoices[i].REMAINING?((s=j({},this.docObj.docCustomer.empty)).DOC_GUID=this.docObj.dt()[0].GUID,s.TYPE=this.docObj.dt()[0].TYPE,s.REF=this.docObj.dt()[0].REF,s.REF_NO=this.docObj.dt()[0].REF_NO,s.DOC_TYPE=this.docObj.dt()[0].DOC_TYPE,s.DOC_DATE=this.docObj.dt()[0].DOC_DATE,s.OUTPUT=this.docObj.dt()[0].OUTPUT,s.INVOICE_GUID=this.invoices[i].GUID,s.INVOICE_REF=this.invoices[i].REFERANS,0==e?(s.INPUT=this.cmbCashSafe.value,s.INPUT_NAME=this.cmbCashSafe.displayValue,s.PAY_TYPE=0,s.AMOUNT=this.invoices[i].REMAINING,s.DESCRIPTION=this.cashDescription.value):1==e?(s.INPUT=this.cmbCashSafe.value,s.INPUT_NAME=this.cmbCashSafe.displayValue,s.PAY_TYPE=1,s.AMOUNT=this.invoices[i].REMAINING,s.DESCRIPTION=this.cashDescription.value,(c=j({},this.docObj.checkCls.empty)).DOC_GUID=this.docObj.dt()[0].GUID,c.REF=this.checkReference.value,c.DOC_DATE=this.docObj.dt()[0].DOC_DATE,c.CHECK_DATE=this.docObj.dt()[0].DOC_DATE,c.CUSTOMER=this.docObj.dt()[0].INPUT,c.AMOUNT=this.invoices[i].REMAINING,c.SAFE=this.cmbCheckSafe.value,this.docObj.checkCls.addEmpty(c)):2==e&&(s.INPUT=this.cmbCashSafe.value,s.INPUT_NAME=this.cmbCashSafe.displayValue,s.PAY_TYPE=2,s.AMOUNT=this.invoices[i].REMAINING,s.DESCRIPTION=this.cashDescription.value),this.docObj.docCustomer.addEmpty(s),this._calculateTotal(),n=parseFloat((n-this.invoices[i].REMAINING).toFixed(2))):n<this.invoices[i].REMAINING&&0!=n&&((r=j({},this.docObj.docCustomer.empty)).DOC_GUID=this.docObj.dt()[0].GUID,r.TYPE=this.docObj.dt()[0].TYPE,r.REF=this.docObj.dt()[0].REF,r.REF_NO=this.docObj.dt()[0].REF_NO,r.DOC_TYPE=this.docObj.dt()[0].DOC_TYPE,r.DOC_DATE=this.docObj.dt()[0].DOC_DATE,r.OUTPUT=this.docObj.dt()[0].OUTPUT,r.INVOICE_GUID=this.invoices[i].GUID,r.INVOICE_REF=this.invoices[i].REFERANS,0==e?(r.INPUT=this.cmbCashSafe.value,r.INPUT_NAME=this.cmbCashSafe.displayValue,r.PAY_TYPE=0,r.AMOUNT=n,r.DESCRIPTION=this.cashDescription.value):1==e?(r.INPUT=this.cmbCashSafe.value,r.INPUT_NAME=this.cmbCashSafe.displayValue,r.PAY_TYPE=1,r.AMOUNT=n,r.DESCRIPTION=this.cashDescription.value,(o=j({},this.docObj.checkCls.empty)).DOC_GUID=this.docObj.dt()[0].GUID,o.REF=this.checkReference.value,o.DOC_DATE=this.docObj.dt()[0].DOC_DATE,o.CHECK_DATE=this.docObj.dt()[0].DOC_DATE,o.CUSTOMER=this.docObj.dt()[0].OUTPUT,o.AMOUNT=n,o.SAFE=this.cmbCashSafe.value,this.docObj.checkCls.addEmpty(o)):2==e&&(r.INPUT=this.cmbCashSafe.value,r.INPUT_NAME=this.cmbCashSafe.displayValue,r.PAY_TYPE=2,r.AMOUNT=n,r.DESCRIPTION=this.cashDescription.value),this.docObj.docCustomer.addEmpty(r),this._calculateTotal(),n=0);console.log(n),n>0&&((l=j({},this.docObj.docCustomer.empty)).DOC_GUID=this.docObj.dt()[0].GUID,l.TYPE=this.docObj.dt()[0].TYPE,l.REF=this.docObj.dt()[0].REF,l.REF_NO=this.docObj.dt()[0].REF_NO,l.DOC_TYPE=this.docObj.dt()[0].DOC_TYPE,l.DOC_DATE=this.docObj.dt()[0].DOC_DATE,l.OUTPUT=this.docObj.dt()[0].OUTPUT,0==e?(l.INPUT=this.cmbCashSafe.value,l.INPUT_NAME=this.cmbCashSafe.displayValue,l.PAY_TYPE=0,l.AMOUNT=n,l.DESCRIPTION=this.cashDescription.value):1==e?(l.INPUT=this.cmbCashSafe.value,l.INPUT_NAME=this.cmbCashSafe.displayValue,l.PAY_TYPE=1,l.AMOUNT=n,l.DESCRIPTION=this.cashDescription.value,(d=j({},this.docObj.checkCls.empty)).DOC_GUID=this.docObj.dt()[0].GUID,d.REF=this.checkReference.value,d.DOC_DATE=this.docObj.dt()[0].DOC_DATE,d.CHECK_DATE=this.docObj.dt()[0].DOC_DATE,d.CUSTOMER=this.docObj.dt()[0].OUTPUT,d.AMOUNT=n,d.SAFE=this.cmbCashSafe.value,this.docObj.checkCls.addEmpty(d)):2==e&&(l.INPUT=this.cmbCashSafe.value,l.INPUT_NAME=this.cmbCashSafe.displayValue,l.PAY_TYPE=2,l.AMOUNT=n,l.DESCRIPTION=this.cashDescription.value),this.docObj.docCustomer.addEmpty(l),this._calculateTotal())}else(h=j({},this.docObj.docCustomer.empty)).DOC_GUID=this.docObj.dt()[0].GUID,h.TYPE=this.docObj.dt()[0].TYPE,h.REF=this.docObj.dt()[0].REF,h.REF_NO=this.docObj.dt()[0].REF_NO,h.DOC_TYPE=this.docObj.dt()[0].DOC_TYPE,h.DOC_DATE=this.docObj.dt()[0].DOC_DATE,h.OUTPUT=this.docObj.dt()[0].OUTPUT,0==e?(h.INPUT=this.cmbCashSafe.value,h.INPUT_NAME=this.cmbCashSafe.displayValue,h.PAY_TYPE=0,h.AMOUNT=a,h.DESCRIPTION=this.cashDescription.value):1==e?(h.INPUT=this.cmbCashSafe.value,h.INPUT_NAME=this.cmbCashSafe.displayValue,h.PAY_TYPE=1,h.AMOUNT=a,h.DESCRIPTION=this.cashDescription.value,(E=j({},this.docObj.checkCls.empty)).DOC_GUID=this.docObj.dt()[0].GUID,E.REF=this.checkReference.value,E.DOC_DATE=this.docObj.dt()[0].DOC_DATE,E.CHECK_DATE=this.docObj.dt()[0].DOC_DATE,E.CUSTOMER=this.docObj.dt()[0].OUTPUT,E.AMOUNT=a,E.SAFE=this.cmbCashSafe.value,this.docObj.checkCls.addEmpty(E)):2==e&&(h.INPUT=this.cmbCashSafe.value,h.INPUT_NAME=this.cmbCashSafe.displayValue,h.PAY_TYPE=2,h.AMOUNT=a,h.DESCRIPTION=this.cashDescription.value),this.docObj.docCustomer.addEmpty(h),this._calculateTotal();case 1:case"end":return t.stop()}}),t,this)}))),function(t,e){return a.apply(this,arguments)})},{key:"getInvoices",value:(e=(0,i.Z)(u().mark((function t(){var e,a,n=this;return u().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return this.invoices=[],e={query:"SELECT *,REF + '-' + CONVERT(VARCHAR,REF_NO) AS REFERANS,TOTAL - ISNULL((SELECT SUM(AMOUNT) FROM DOC_CUSTOMER_VW_01 WHERE DOC_CUSTOMER_VW_01.INVOICE_GUID = DOC_VW_01.GUID),0) AS REMAINING FROM DOC_VW_01 WHERE INPUT = @OUTPUT AND DOC_TYPE IN(20,21) AND TYPE = 1 AND  TOTAL - ISNULL((SELECT SUM(AMOUNT) FROM DOC_CUSTOMER_VW_01 WHERE DOC_CUSTOMER_VW_01.INVOICE_GUID = DOC_VW_01.GUID),0) > 0 ",param:["OUTPUT:string|50"],value:[this.docObj.dt()[0].OUTPUT]},t.next=4,this.core.sql.execute(e);case 4:if(!((a=t.sent).result.recordset.length>0)){t.next=10;break}return t.next=8,this.pg_invoices.setData(a.result.recordset);case 8:t.next=12;break;case 10:return t.next=12,this.pg_invoices.setData([]);case 12:this.pg_invoices.show(),this.pg_invoices.onClick=function(){var t=(0,i.Z)(u().mark((function t(e){return u().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:n.invoices=e;case 1:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}();case 14:case"end":return t.stop()}}),t,this)}))),function(){return e.apply(this,arguments)})},{key:"render",value:function(){var t,e=this;return E.createElement("div",null,E.createElement(b(),null,E.createElement("div",{className:"row px-2 pt-2"},E.createElement("div",{className:"col-12"},E.createElement(D(),null,E.createElement(v.Item,{location:"after",locateInMenu:"auto"},E.createElement(w.Z,{id:"btnBack",parent:this,icon:"revert",type:"default",onClick:function(){e.getDoc(e.docObj.dt()[0].GUID,e.docObj.dt()[0].REF,e.docObj.dt()[0].REF_NO)}})),E.createElement(v.Item,{location:"after",locateInMenu:"auto"},E.createElement(w.Z,{id:"btnNew",parent:this,icon:"file",type:"default",onClick:function(){e.init()}})),E.createElement(v.Item,{location:"after",locateInMenu:"auto"},E.createElement(w.Z,{id:"btnSave",parent:this,icon:"floppy",type:"default",validationGroup:"frmCollection"+this.tabIndex,onClick:function(){var t=(0,i.Z)(u().mark((function t(a){var n,i,s,c;return u().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(1!=e.docLocked){t.next=5;break}return n={id:"msgDocLocked",showTitle:!0,title:e.t("msgDocLocked.title"),showCloseButton:!0,width:"500px",height:"200px",button:[{id:"btn01",caption:e.t("msgDocLocked.btn01"),location:"after"}],content:E.createElement("div",{style:{textAlign:"center",fontSize:"20px"}},e.t("msgDocLocked.msg"))},t.next=4,(0,k.W)(n);case 4:return t.abrupt("return");case 5:if("valid"!=a.validationGroup.validate().status){t.next=28;break}return i={id:"msgSave",showTitle:!0,title:e.t("msgSave.title"),showCloseButton:!0,width:"500px",height:"200px",button:[{id:"btn01",caption:e.t("msgSave.btn01"),location:"before"},{id:"btn02",caption:e.t("msgSave.btn02"),location:"after"}],content:E.createElement("div",{style:{textAlign:"center",fontSize:"20px"}},e.t("msgSave.msg"))},t.next=9,(0,k.W)(i);case 9:if("btn01"!=t.sent){t.next=26;break}return s={id:"msgSaveResult",showTitle:!0,title:e.t("msgSave.title"),showCloseButton:!0,width:"500px",height:"200px",button:[{id:"btn01",caption:e.t("msgSave.btn01"),location:"after"}]},t.next=14,e.docObj.save();case 14:if(t.t0=t.sent,0!=t.t0){t.next=23;break}return s.content=E.createElement("div",{style:{textAlign:"center",fontSize:"20px",color:"green"}},e.t("msgSaveResult.msgSuccess")),t.next=19,(0,k.W)(s);case 19:e.btnSave.setState({disabled:!0}),e.btnNew.setState({disabled:!1}),t.next=26;break;case 23:return s.content=E.createElement("div",{style:{textAlign:"center",fontSize:"20px",color:"red"}},e.t("msgSaveResult.msgFailed")),t.next=26,(0,k.W)(s);case 26:t.next=31;break;case 28:return c={id:"msgSaveValid",showTitle:!0,title:e.t("msgSaveValid.title"),showCloseButton:!0,width:"500px",height:"200px",button:[{id:"btn01",caption:e.t("msgSaveValid.btn01"),location:"after"}],content:E.createElement("div",{style:{textAlign:"center",fontSize:"20px"}},e.t("msgSaveValid.msg"))},t.next=31,(0,k.W)(c);case 31:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()})),E.createElement(v.Item,{location:"after",locateInMenu:"auto"},E.createElement(w.Z,{id:"btnDelete",parent:this,icon:"trash",type:"default",onClick:(0,i.Z)(u().mark((function t(){var a;return u().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return a={id:"msgDelete",showTitle:!0,title:e.t("msgDelete.title"),showCloseButton:!0,width:"500px",height:"200px",button:[{id:"btn01",caption:e.t("msgDelete.btn01"),location:"before"},{id:"btn02",caption:e.t("msgDelete.btn02"),location:"after"}],content:E.createElement("div",{style:{textAlign:"center",fontSize:"20px"}},e.t("msgDelete.msg"))},t.next=3,(0,k.W)(a);case 3:if("btn01"!=t.sent){t.next=9;break}return e.docObj.dt("DOC").removeAt(0),t.next=8,e.docObj.dt("DOC").delete();case 8:e.init();case 9:case"end":return t.stop()}}),t)})))})),E.createElement(v.Item,{location:"after",locateInMenu:"auto"},E.createElement(w.Z,{id:"btnLock",parent:this,icon:"key",type:"default",onClick:(0,i.Z)(u().mark((function t(){var a;return u().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(0!=e.docObj.dt()[0].LOCKED){t.next=18;break}return e.docObj.dt()[0].LOCKED=1,t.next=4,e.docObj.save();case 4:return t.next=6,e.docObj.save();case 6:if(t.t0=t.sent,0!=t.t0){t.next=13;break}return a={id:"msgLocked",showTitle:!0,title:e.t("msgLocked.title"),showCloseButton:!0,width:"500px",height:"200px",button:[{id:"btn01",caption:e.t("msgLocked.btn01"),location:"after"}],content:E.createElement("div",{style:{textAlign:"center",fontSize:"20px"}},e.t("msgLocked.msg"))},t.next=11,(0,k.W)(a);case 11:t.next=16;break;case 13:return tmpConfObj1.content=E.createElement("div",{style:{textAlign:"center",fontSize:"20px",color:"red"}},e.t("msgSaveResult.msgFailed")),t.next=16,(0,k.W)(tmpConfObj1);case 16:t.next=20;break;case 18:e.popPassword.show(),e.txtPassword.value="";case 20:case"end":return t.stop()}}),t)})))})),E.createElement(v.Item,{location:"after",locateInMenu:"auto"},E.createElement(w.Z,{id:"btnCopy",parent:this,icon:"copy",type:"default",onClick:function(){}})),E.createElement(v.Item,{location:"after",locateInMenu:"auto"},E.createElement(w.Z,{id:"btnPrint",parent:this,icon:"print",type:"default",onClick:function(){e.popDesign.show()}})),E.createElement(v.Item,{location:"after",locateInMenu:"auto",widget:"dxButton",options:{type:"default",icon:"clear",onClick:(t=(0,i.Z)(u().mark((function t(){var a;return u().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return a={id:"msgClose",showTitle:!0,title:e.lang.t("msgWarning"),showCloseButton:!0,width:"500px",height:"200px",button:[{id:"btn01",caption:e.lang.t("btnYes"),location:"before"},{id:"btn02",caption:e.lang.t("btnNo"),location:"after"}],content:E.createElement("div",{style:{textAlign:"center",fontSize:"20px"}},e.lang.t("msgClose"))},t.next=3,(0,k.W)(a);case 3:"btn01"==t.sent&&m.Z.instance.panel.closePage();case 5:case"end":return t.stop()}}),t)}))),function(){return t.apply(this,arguments)})}})))),E.createElement("div",{className:"row px-2 pt-2"},E.createElement("div",{className:"col-12"},E.createElement(g(),{colCount:3,id:"frmCollection"+this.tabIndex},E.createElement(v.Item,null,E.createElement(v.Label,{text:this.t("txtRefRefno"),alignment:"right"}),E.createElement("div",{className:"row"},E.createElement("div",{className:"col-4 pe-0"},E.createElement(P.ZP,{id:"txtRef",parent:this,simple:!0,dt:{data:this.docObj.dt("DOC"),field:"REF"},upper:this.sysParam.filter({ID:"onlyBigChar",USERS:this.user.CODE}).getValue().value,readOnly:!0,maxLength:32,onChange:function(){var t=(0,i.Z)(u().mark((function t(a){var n,i;return u().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n={query:"SELECT ISNULL(MAX(REF_NO) + 1,1) AS REF_NO FROM DOC WHERE TYPE = 0 AND DOC_TYPE = 200 AND REF = @REF ",param:["REF:string|25"],value:[e.txtRef.value]},t.next=3,e.core.sql.execute(n);case 3:(i=t.sent).result.recordset.length>0&&(e.txtRefno.value=i.result.recordset[0].REF_NO);case 5:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}().bind(this),param:this.param.filter({ELEMENT:"txtRef",USERS:this.user.CODE}),access:this.access.filter({ELEMENT:"txtRef",USERS:this.user.CODE})},E.createElement(P.cX,{validationGroup:"frmCollection"+this.tabIndex},E.createElement(P.n2,{message:this.t("validRef")})))),E.createElement("div",{className:"col-5 ps-0"},E.createElement(P.ZP,{id:"txtRefno",parent:this,simple:!0,dt:{data:this.docObj.dt("DOC"),field:"REF_NO"},readOnly:!0,button:[{id:"01",icon:"more",onClick:function(){e.pg_Docs.show(),e.pg_Docs.onClick=function(t){t.length>0&&e.getDoc(t[0].GUID,t[0].REF,t[0].REF_NO)}}},{id:"02",icon:"arrowdown",onClick:function(){e.txtRefno.value=Math.floor(Date.now()/1e3)}}],onChange:(0,i.Z)(u().mark((function t(){return u().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.checkDoc("00000000-0000-0000-0000-000000000000",e.txtRef.value,e.txtRefno.value);case 2:3==t.sent&&(e.txtRefno.value="");case 4:case"end":return t.stop()}}),t)}))).bind(this),param:this.param.filter({ELEMENT:"txtRefno",USERS:this.user.CODE}),access:this.access.filter({ELEMENT:"txtRefno",USERS:this.user.CODE})},E.createElement(P.cX,{validationGroup:"frmCollection"+this.tabIndex},E.createElement(P.n2,{message:this.t("validRefNo")}))))),E.createElement(U.Z,{id:"pg_Docs",parent:this,container:"#root",visible:!1,position:{of:"#root"},showTitle:!0,showBorders:!0,width:"90%",height:"90%",title:this.t("pg_Docs.title"),data:{source:{select:{query:"SELECT GUID,REF,REF_NO,OUTPUT_CODE,OUTPUT_NAME FROM DOC_VW_01 WHERE TYPE = 0 AND DOC_TYPE = 200"},sql:this.core.sql}},button:[{id:"01",icon:"more",onClick:function(){}}]},E.createElement(_.sg,{dataField:"REF",caption:this.t("pg_Docs.clmRef"),width:150,defaultSortOrder:"asc"}),E.createElement(_.sg,{dataField:"REF_NO",caption:this.t("pg_Docs.clmRefNo"),width:300,defaultSortOrder:"asc"}),E.createElement(_.sg,{dataField:"OUTPUT_NAME",caption:this.t("pg_Docs.clmOutputName"),width:300,defaultSortOrder:"asc"}),E.createElement(_.sg,{dataField:"OUTPUT_CODE",caption:this.t("pg_Docs.clmOutputCode"),width:300,defaultSortOrder:"asc"}))),E.createElement(v.Item,null,E.createElement(v.Label,{text:this.t("dtDocDate"),alignment:"right"}),E.createElement(A.ZP,{simple:!0,parent:this,id:"dtDocDate",dt:{data:this.docObj.dt("DOC"),field:"DOC_DATE"},onValueChanged:(0,i.Z)(u().mark((function t(){return u().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:case"end":return t.stop()}}),t)}))).bind(this)},E.createElement(P.cX,{validationGroup:"frmCollection"+this.tabIndex},E.createElement(P.n2,{message:this.t("validDocDate")})))),E.createElement(v.EmptyItem,null),E.createElement(v.Item,null,E.createElement(v.Label,{text:this.t("txtCustomerCode"),alignment:"right"}),E.createElement(P.ZP,{id:"txtCustomerCode",parent:this,simple:!0,upper:this.sysParam.filter({ID:"onlyBigChar",USERS:this.user.CODE}).getValue().value,dt:{data:this.docObj.dt("DOC"),field:"OUTPUT_CODE"},onEnterKey:(0,i.Z)(u().mark((function t(){return u().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.pg_txtCustomerCode.setVal(e.txtCustomerCode.value);case 2:e.pg_txtCustomerCode.show(),e.pg_txtCustomerCode.onClick=function(t){if(t.length>0){e.docObj.dt()[0].OUTPUT=t[0].GUID,e.docObj.dt()[0].OUTPUT_CODE=t[0].CODE,e.docObj.dt()[0].OUTPUT_NAME=t[0].TITLE;var a=e.sysParam.filter({ID:"refForCustomerCode",USERS:e.user.CODE}).getValue();void 0!==a&&1==a.value&&(e.txtRef.value=t[0].CODE,e.txtRef.props.onChange())}};case 4:case"end":return t.stop()}}),t)}))).bind(this),button:[{id:"01",icon:"more",onClick:function(){e.pg_txtCustomerCode.show(),e.pg_txtCustomerCode.onClick=function(t){if(t.length>0){e.docObj.dt()[0].OUTPUT=t[0].GUID,e.docObj.dt()[0].OUTPUT_CODE=t[0].CODE,e.docObj.dt()[0].OUTPUT_NAME=t[0].TITLE;var a=e.sysParam.filter({ID:"refForCustomerCode",USERS:e.user.CODE}).getValue();void 0!==a&&1==a.value&&(e.txtRef.valuedata[0].CODE,e.txtRef.props.onChange())}}}}],param:this.param.filter({ELEMENT:"txtCustomerCode",USERS:this.user.CODE}),access:this.access.filter({ELEMENT:"txtCustomerCode",USERS:this.user.CODE})},E.createElement(P.cX,{validationGroup:"frmCollection"+this.tabIndex},E.createElement(P.n2,{message:this.t("validCustomerCode")}))),E.createElement(U.Z,{id:"pg_txtCustomerCode",parent:this,container:"#root",visible:!1,position:{of:"#root"},showTitle:!0,showBorders:!0,width:"90%",height:"90%",title:this.t("pg_txtCustomerCode.title"),search:!0,data:{source:{select:{query:"SELECT GUID,CODE,TITLE,NAME,LAST_NAME,[TYPE_NAME],[GENUS_NAME] FROM CUSTOMER_VW_01 WHERE UPPER(CODE) LIKE UPPER(@VAL) OR UPPER(TITLE) LIKE UPPER(@VAL)",param:["VAL:string|50"]},sql:this.core.sql}},button:{id:"01",icon:"more",onClick:function(){console.log(1111)}}},E.createElement(_.sg,{dataField:"CODE",caption:this.t("pg_txtCustomerCode.clmCode"),width:150}),E.createElement(_.sg,{dataField:"TITLE",caption:this.t("pg_txtCustomerCode.clmTitle"),width:500,defaultSortOrder:"asc"}),E.createElement(_.sg,{dataField:"TYPE_NAME",caption:this.t("pg_txtCustomerCode.clmTypeName"),width:150}),E.createElement(_.sg,{dataField:"GENUS_NAME",caption:this.t("pg_txtCustomerCode.clmGenusName"),width:150}))),E.createElement(v.Item,null,E.createElement(v.Label,{text:this.t("txtCustomerName"),alignment:"right"}),E.createElement(P.ZP,{id:"txtCustomerName",parent:this,simple:!0,upper:this.sysParam.filter({ID:"onlyBigChar",USERS:this.user.CODE}).getValue().value,dt:{data:this.docObj.dt("DOC"),field:"OUTPUT_NAME"},readOnly:!0,param:this.param.filter({ELEMENT:"txtCustomerName",USERS:this.user.CODE}),access:this.access.filter({ELEMENT:"txtCustomerName",USERS:this.user.CODE})})),E.createElement(v.EmptyItem,null),E.createElement(v.EmptyItem,null)))),E.createElement("div",{className:"row px-2 pt-2"},E.createElement("div",{className:"col-12"},E.createElement(g(),{colCount:1,onInitialized:function(t){e.frmCollection=t.component}},E.createElement(v.Item,{location:"after"},E.createElement(N.Button,{icon:"add",text:this.t("btnCash"),validationGroup:"frmCollection"+this.tabIndex,onClick:function(){var t=(0,i.Z)(u().mark((function t(a){var n;return u().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if("valid"!=a.validationGroup.validate().status){t.next=6;break}e.numCash.setState({value:0}),e.cashDescription.setState({value:""}),e.popCash.show(),t.next=9;break;case 6:return n={id:"msgDocValid",showTitle:!0,title:e.t("msgDocValid.title"),showCloseButton:!0,width:"500px",height:"200px",button:[{id:"btn01",caption:e.t("msgDocValid.btn01"),location:"after"}],content:E.createElement("div",{style:{textAlign:"center",fontSize:"20px"}},e.t("msgDocValid.msg"))},t.next=9,(0,k.W)(n);case 9:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()})),E.createElement(v.Item,{colSpan:1},E.createElement(E.Fragment,null,E.createElement(_.ZP,{parent:this,id:"grdDocPayments",showBorders:!0,columnsAutoWidth:!0,allowColumnReordering:!0,allowColumnResizing:!0,height:"500",width:"100%",dbApply:!1,onRowUpdated:function(){var t=(0,i.Z)(u().mark((function t(a){return u().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:a.component.getRowIndexByKey(a.key),e._calculateTotal();case 2:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),onRowRemoved:function(){var t=(0,i.Z)(u().mark((function t(a){return u().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return e._calculateTotal(),t.next=3,e.docObj.save();case 3:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()},E.createElement(_.Po,{defaultPageSize:10}),E.createElement(_.uE,{visible:!0,allowedPageSizes:[5,10,20,50,100],showPageSizeSelector:!0}),E.createElement(_.m_,{editOnKeyPress:!0,enterKeyAction:"moveFocus",enterKeyDirection:"column"}),E.createElement(_.PY,{mode:"infinite"}),E.createElement(_.LO,{mode:"cell",allowUpdating:!0,allowDeleting:!0}),E.createElement(_.D7,{fileName:this.lang.t("menu.fns_02_002"),enabled:!0,allowExportSelectedData:!0}),E.createElement(_.sg,{dataField:"CDATE_FORMAT",caption:this.t("grdDocPayments.clmCreateDate"),width:200,allowEditing:!1}),E.createElement(_.sg,{dataField:"INPUT_NAME",caption:this.t("grdDocPayments.clmInputName"),allowEditing:!1}),E.createElement(_.sg,{dataField:"AMOUNT",caption:this.t("grdDocPayments.clmAmount"),format:{style:"currency",currency:"EUR",precision:2}}),E.createElement(_.sg,{dataField:"DESCRIPTION",caption:this.t("grdDocPayments.clmDescription")})),E.createElement(x(),{dataSource:this.rightItems,width:200,target:"#grdDocPayments",onItemClick:function(){var t=(0,i.Z)(u().mark((function t(e){return u().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}().bind(this)})))))),E.createElement("div",{className:"row px-2 pt-2"},E.createElement("div",{className:"col-12"},E.createElement(g(),{colCount:4,parent:this,id:"frmCollection"+this.tabIndex},E.createElement(v.EmptyItem,{colSpan:3}),E.createElement(v.Item,null,E.createElement(v.Label,{text:this.t("txtTotal"),alignment:"right"}),E.createElement(P.ZP,{id:"txtTotal",parent:this,simple:!0,readOnly:!0,dt:{data:this.docObj.dt("DOC"),field:"TOTAL"},maxLength:32,param:this.param.filter({ELEMENT:"txtTotal",USERS:this.user.CODE}),access:this.access.filter({ELEMENT:"txtTotal",USERS:this.user.CODE})}))))),E.createElement("div",null,E.createElement(y.ZP,{parent:this,id:"popCash",visible:!1,showCloseButton:!0,showTitle:!0,title:this.t("popCash.title"),container:"#root",width:"500",height:"400",position:{of:"#root"}},E.createElement(g(),{colCount:1,height:"fit-content"},E.createElement(v.Item,null,E.createElement(v.Label,{text:this.t("cmbPayType.title"),alignment:"right"}),E.createElement(I.ZP,{simple:!0,parent:this,id:"cmbPayType",displayExpr:"VALUE",valueExpr:"ID",value:"",searchEnabled:!0,notRefresh:!0,onValueChanged:function(){var t=(0,i.Z)(u().mark((function t(a){var n,i;return u().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return e.cmbCashSafe.value="",0==a.value?n={query:"SELECT * FROM SAFE_VW_01 WHERE TYPE = 0"}:1==a.value?n={query:"SELECT * FROM SAFE_VW_01 WHERE TYPE = 1"}:2==a.value||3==a.value?n={query:"SELECT * FROM BANK_VW_01 WHERE TYPE = 0"}:(4==a.value||5==a.value)&&(n={query:"SELECT * FROM SAFE_VW_01 WHERE TYPE = 0"}),t.next=4,e.core.sql.execute(n);case 4:(i=t.sent).result.recordset.length>0?e.cmbCashSafe.setData(i.result.recordset):e.cmbCashSafe.setData([]);case 6:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}().bind(this),data:{source:[{ID:0,VALUE:this.t("cmbPayType.cash")},{ID:1,VALUE:this.t("cmbPayType.check")},{ID:2,VALUE:this.t("cmbPayType.bankTransfer")},{ID:3,VALUE:this.t("cmbPayType.otoTransfer")},{ID:4,VALUE:this.t("cmbPayType.foodTicket")},{ID:5,VALUE:this.t("cmbPayType.bill")}]},param:this.param.filter({ELEMENT:"cmbCashSafe",USERS:this.user.CODE}),access:this.access.filter({ELEMENT:"cmbCashSafe",USERS:this.user.CODE})},E.createElement(P.cX,{validationGroup:"frmPayCash"+this.tabIndex},E.createElement(P.n2,{message:this.t("ValidCash")})))),E.createElement(v.Item,null,E.createElement(v.Label,{text:this.t("cmbCashSafe"),alignment:"right"}),E.createElement(I.ZP,{simple:!0,parent:this,id:"cmbCashSafe",displayExpr:"NAME",valueExpr:"GUID",value:"",searchEnabled:!0,notRefresh:!0,onValueChanged:(0,i.Z)(u().mark((function t(){return u().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:case"end":return t.stop()}}),t)}))).bind(this),param:this.param.filter({ELEMENT:"cmbCashSafe",USERS:this.user.CODE}),access:this.access.filter({ELEMENT:"cmbCashSafe",USERS:this.user.CODE})},E.createElement(P.cX,{validationGroup:"frmPayCash"+this.tabIndex},E.createElement(P.n2,{message:this.t("ValidCash")})))),E.createElement(v.Item,null,E.createElement(v.Label,{text:this.t("cash"),alignment:"right"}),E.createElement("div",{className:"col-4 pe-0"},E.createElement(R.ZP,{id:"numCash",parent:this,simple:!0,maxLength:32,param:this.param.filter({ELEMENT:"numCash",USERS:this.user.CODE}),access:this.access.filter({ELEMENT:"numCash",USERS:this.user.CODE})},E.createElement(P.cX,{validationGroup:"frmPayCash"+this.tabIndex},E.createElement(P.n2,{message:this.t("ValidCash")}))))),E.createElement(v.Item,null,E.createElement(v.Label,{text:this.t("description"),alignment:"right"}),E.createElement("div",{className:"col-12 pe-0"},E.createElement(P.ZP,{id:"cashDescription",parent:this,simple:!0,width:500,upper:this.sysParam.filter({ID:"onlyBigChar",USERS:this.user.CODE}).getValue().value,maxLength:32,param:this.param.filter({ELEMENT:"cashDescription",USERS:this.user.CODE}),access:this.access.filter({ELEMENT:"cashDescription",USERS:this.user.CODE})}))),E.createElement(v.Item,null,E.createElement("div",{className:"row"},E.createElement("div",{className:"col-12"},E.createElement(w.Z,{text:this.t("invoiceSelect"),type:"normal",stylingMode:"contained",width:"100%",onClick:function(){var t=(0,i.Z)(u().mark((function t(a){return u().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:e.getInvoices();case 1:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()})))),E.createElement(v.Item,null,E.createElement("div",{className:"row"},E.createElement("div",{className:"col-6"},E.createElement(w.Z,{text:this.t("popCash.btnApprove"),type:"normal",stylingMode:"contained",width:"100%",validationGroup:"frmPayCash"+this.tabIndex,onClick:function(){var t=(0,i.Z)(u().mark((function t(a){return u().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:"valid"==a.validationGroup.validate().status&&(1==e.cmbPayType.value?e.popCheck.show():(e._addPayment(e.cmbPayType.value,e.numCash.value),e.popCash.hide()));case 1:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()})),E.createElement("div",{className:"col-6"},E.createElement(w.Z,{text:this.lang.t("btnCancel"),type:"normal",stylingMode:"contained",width:"100%",onClick:function(){e.popCash.hide()}}))))))),E.createElement("div",null,E.createElement(y.ZP,{parent:this,id:"popCheck",visible:!1,showCloseButton:!0,showTitle:!0,title:this.t("popCheck.title"),container:"#root",width:"500",height:"500",position:{of:"#root"}},E.createElement(g(),{colCount:1,height:"fit-content"},E.createElement(v.Item,null,E.createElement(v.Label,{text:this.t("checkReference"),alignment:"right"}),E.createElement("div",{className:"col-12 pe-0"},E.createElement(P.ZP,{id:"checkReference",parent:this,simple:!0,width:500,upper:this.sysParam.filter({ID:"onlyBigChar",USERS:this.user.CODE}).getValue().value,maxLength:32,param:this.param.filter({ELEMENT:"checkReference",USERS:this.user.CODE}),access:this.access.filter({ELEMENT:"checkReference",USERS:this.user.CODE})}))),E.createElement(v.Item,null,E.createElement("div",{className:"row"},E.createElement("div",{className:"col-6"},E.createElement(w.Z,{text:this.t("popCheck.btnApprove"),type:"normal",stylingMode:"contained",width:"100%",validationGroup:"frmCollCheck"+this.tabIndex,onClick:function(){var t=(0,i.Z)(u().mark((function t(a){return u().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:e._addPayment(1,e.numCash.value),e.popCheck.hide(),e.popCash.hide();case 3:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()})),E.createElement("div",{className:"col-6"},E.createElement(w.Z,{text:this.lang.t("btnCancel"),type:"normal",stylingMode:"contained",width:"100%",onClick:function(){e.popCheck.hide()}}))))))),E.createElement(U.Z,{id:"pg_invoices",parent:this,container:"#root",visible:!1,position:{of:"#root"},showTitle:!0,showBorders:!0,width:"90%",height:"90%",selection:{mode:"multiple"},title:this.t("pg_invoices.title")},E.createElement(_.sg,{dataField:"REFERANS",caption:this.t("pg_invoices.clmReferans"),width:200,defaultSortOrder:"asc"}),E.createElement(_.sg,{dataField:"INPUT_NAME",caption:this.t("pg_invoices.clmInputName"),width:300}),E.createElement(_.sg,{dataField:"DOC_DATE_CONVERT",caption:this.t("pg_invoices.clmDate"),width:250}),E.createElement(_.sg,{dataField:"TOTAL",caption:this.t("pg_invoices.clmTotal"),width:200}),E.createElement(_.sg,{dataField:"REMAINING",caption:this.t("pg_invoices.clmRemaining"),width:200}))))}}]),F}(E.PureComponent)}}]);