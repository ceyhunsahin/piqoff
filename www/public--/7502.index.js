"use strict";(self.webpackChunkwww=self.webpackChunkwww||[]).push([[7502],{37502:(t,e,n)=>{n.r(e),n.d(e,{default:()=>M});var a=n(71002),o=n(4942),r=n(15861),c=n(15671),i=n(43144),s=n(97326),d=n(60136),l=n(82963),u=n(61120),E=n(64687),m=n.n(E),p=n(67294),h=n(73364),b=n(4598),O=(n(30381),n(42866)),f=n.n(O),g=n(53221),T=n.n(g),x=n(25552),D=n.n(x),I=n(65580),C=n.n(I),w=(n(91686),n(30886)),_=n(99846),R=(n(5083),n(99077)),v=n(55585),N=n(417),k=n(32175),A=n(18405),P=n(73682),S=n(90428),y=(n(57941),n(60547));function j(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);e&&(a=a.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,a)}return n}function U(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?j(Object(n),!0).forEach((function(e){(0,o.Z)(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):j(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}n(17276),n(51166);var M=function(t){(0,d.Z)(L,t);var e,n,o,E,O,g,I,j,M,F,B=(M=L,F=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}(),function(){var t,e=(0,u.Z)(M);if(F){var n=(0,u.Z)(this).constructor;t=Reflect.construct(e,arguments,n)}else t=e.apply(this,arguments);return(0,l.Z)(this,t)});function L(t){var e;return(0,c.Z)(this,L),(e=B.call(this,t)).core=h.Z.instance.core,e.prmObj=e.param.filter({TYPE:1,USERS:e.user.CODE}),e.acsobj=e.access.filter({TYPE:1,USERS:e.user.CODE}),e.docObj=new b.Ch,e.qDescObj=new b.Rv,e.quantityControl=!1,e._getDispatch=e._getDispatch.bind((0,s.Z)(e)),e._cellRoleRender=e._cellRoleRender.bind((0,s.Z)(e)),e.frmOutwas=void 0,e.docLocked=!1,e.combineControl=!0,e.combineNew=!1,e.tabIndex=t.data.tabkey,e.rightItems=[{text:e.t("getDispatch")}],e}return(0,i.Z)(L,[{key:"componentDidMount",value:(j=(0,r.Z)(m().mark((function t(){return m().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,this.core.util.waitUntil(0);case 2:this.init();case 3:case"end":return t.stop()}}),t,this)}))),function(){return j.apply(this,arguments)})},{key:"init",value:(I=(0,r.Z)(m().mark((function t(){var e,n=this;return m().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return this.docObj.clearAll(),this.docObj.ds.on("onAddRow",(function(t,e){"new"==e.stat&&(n.btnNew.setState({disabled:!1}),n.btnBack.setState({disabled:!1}),n.btnNew.setState({disabled:!1}),n.btnBack.setState({disabled:!0}),n.btnSave.setState({disabled:!1}),n.btnDelete.setState({disabled:!1}),n.btnPrint.setState({disabled:!1}))})),this.docObj.ds.on("onEdit",(function(t,e){"edit"==e.rowData.stat&&(n.btnBack.setState({disabled:!1}),n.btnNew.setState({disabled:!0}),n.btnSave.setState({disabled:!1}),n.btnDelete.setState({disabled:!1}),n.btnPrint.setState({disabled:!1}),e.rowData.CUSER=n.user.CODE)})),this.docObj.ds.on("onRefresh",(function(t){n.btnBack.setState({disabled:!0}),n.btnNew.setState({disabled:!1}),n.btnSave.setState({disabled:!1}),n.btnDelete.setState({disabled:!1}),n.btnPrint.setState({disabled:!1})})),this.docObj.ds.on("onDelete",(function(t){n.btnBack.setState({disabled:!1}),n.btnNew.setState({disabled:!1}),n.btnSave.setState({disabled:!1}),n.btnDelete.setState({disabled:!1}),n.btnPrint.setState({disabled:!1})})),this.quantityControl=this.prmObj.filter({ID:"negativeQuantity",USERS:this.user.CODE}).getValue().value,this.txtRef.setState({value:this.user.CODE}),(e=U({},this.docObj.empty)).REF=this.user.CODE,e.TYPE=1,e.DOC_TYPE=1,e.REBATE=0,e.INPUT="00000000-0000-0000-0000-000000000000",this.docObj.addEmpty(e),this.txtRef.readOnly=!0,this.txtRefno.readOnly=!0,this.docLocked=!1,this.frmOutwas.option("disabled",!1),t.next=20,this.grdOutwasItems.dataRefresh({source:this.docObj.docItems.dt("DOC_ITEMS")});case 20:this.txtRef.props.onChange();case 21:case"end":return t.stop()}}),t,this)}))),function(){return I.apply(this,arguments)})},{key:"getDoc",value:(g=(0,r.Z)(m().mark((function t(e,n,a){var o;return m().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return this.docObj.clearAll(),t.next=3,this.docObj.load({GUID:e,REF:n,REF_NO:a,TYPE:1,DOC_TYPE:1});case 3:if(this.txtRef.readOnly=!0,this.txtRefno.readOnly=!0,0==this.docObj.dt()[0].LOCKED){t.next=13;break}return this.docLocked=!0,o={id:"msgGetLocked",showTitle:!0,title:this.t("msgGetLocked.title"),showCloseButton:!0,width:"500px",height:"200px",button:[{id:"btn01",caption:this.t("msgGetLocked.btn01"),location:"after"}],content:p.createElement("div",{style:{textAlign:"center",fontSize:"20px"}},this.t("msgGetLocked.msg"))},t.next=10,(0,y.W)(o);case 10:this.frmOutwas.option("disabled",!0),t.next=15;break;case 13:this.docLocked=!1,this.frmOutwas.option("disabled",!1);case 15:this._calculateTotal();case 16:case"end":return t.stop()}}),t,this)}))),function(t,e,n){return g.apply(this,arguments)})},{key:"checkDoc",value:(O=(0,r.Z)(m().mark((function t(e,n,a){var o=this;return m().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",new Promise(function(){var t=(0,r.Z)(m().mark((function t(r){var c;return m().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(""===n){t.next=15;break}return t.next=3,(new b.Ch).load({GUID:e,REF:n,REF_NO:a});case 3:if(!(t.sent.length>0)){t.next=12;break}return c={id:"msgCode",showTitle:!0,title:"Dikkat",showCloseButton:!0,width:"500px",height:"200px",button:[{id:"btn01",caption:"EvraÄŸa Git",location:"before"}],content:p.createElement("div",{style:{textAlign:"center",fontSize:"20px"}},"Evrak Bulundu")},t.next=8,(0,y.W)(c);case 8:"btn01"==t.sent?(o.getDoc(e,n,a),r(2)):r(3),t.next=13;break;case 12:r(1);case 13:t.next=16;break;case 15:r(0);case 16:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()));case 1:case"end":return t.stop()}}),t)}))),function(t,e,n){return O.apply(this,arguments)})},{key:"_calculateTotal",value:(E=(0,r.Z)(m().mark((function t(){var e,n,a;return m().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:for(e=0,n=0;n<this.docObj.docItems.dt().length;n++)e+=this.docObj.docItems.dt()[n].QUANTITY*this.docObj.docItems.dt()[n].COST_PRICE;this.txtTotalCost.setState({value:e.toFixed(2)}),a=this.docObj.docItems.dt().sum("QUANTITY",0),this.txtTotalQuantity.setState({value:a});case 5:case"end":return t.stop()}}),t,this)}))),function(){return E.apply(this,arguments)})},{key:"_getDispatch",value:(o=(0,r.Z)(m().mark((function t(){var e,n,a=this;return m().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return e={query:"SELECT *,REF + '-' + CONVERT(VARCHAR,REF_NO) AS REFERANS FROM DOC_ITEMS_VW_01 WHERE INVOICE_GUID = '00000000-0000-0000-0000-000000000000' AND TYPE = 1 AND REBATE = 1 AND DOC_TYPE IN(40)"},t.next=3,this.core.sql.execute(e);case 3:if(!((n=t.sent).result.recordset.length>0)){t.next=7;break}return t.next=7,this.pg_dispatchGrid.setData(n.result.recordset);case 7:this.pg_dispatchGrid.show(),this.pg_dispatchGrid.onClick=function(){var t=(0,r.Z)(m().mark((function t(e){var n,o;return m().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:n=0;case 1:if(!(n<e.length)){t.next=38;break}return(o=U({},a.docObj.docItems.empty)).GUID=e[n].GUID,o.DOC_GUID=a.docObj.dt()[0].GUID,o.TYPE=a.docObj.dt()[0].TYPE,o.DOC_TYPE=a.docObj.dt()[0].DOC_TYPE,o.REBATE=a.docObj.dt()[0].REBATE,o.LINE_NO=e[n].LINE_NO,o.REF=a.docObj.dt()[0].REF,o.REF_NO=a.docObj.dt()[0].REF_NO,o.DOC_DATE=a.docObj.dt()[0].DOC_DATE,o.SHIPMENT_DATE=a.docObj.dt()[0].DOC_DATE,o.INPUT="00000000-0000-0000-0000-000000000000",o.INPUT_CODE="",o.INPUT_NAME="",o.OUTPUT=e[n].OUTPUT,o.OUTPUT_CODE=e[n].OUTPUT_CODE,o.OUTPUT_NAME=e[n].OUTPUT_NAME,o.ITEM=e[n].ITEM,o.ITEM_CODE=e[n].ITEM_CODE,o.ITEM_NAME=e[n].ITEM_NAME,o.PRICE=e[n].PRICE,o.QUANTITY=e[n].QUANTITY,o.VAT=e[n].VAT,o.AMOUNT=e[n].AMOUNT,o.TOTAL=e[n].TOTAL,o.DESCRIPTION=e[n].DESCRIPTION,o.INVOICE_GUID="00000000-0000-0000-0000-000000000000",o.VAT_RATE=e[n].VAT_RATE,o.DISCOUNT_RATE=e[n].DISCOUNT_RATE,o.CONNECT_REF=e[n].CONNECT_REF,t.next=34,a.docObj.docItems.addEmpty(o,!1);case 34:a.docObj.docItems.dt()[a.docObj.docItems.dt().length-1].stat="edit";case 35:n++,t.next=1;break;case 38:a.docObj.docItems.dt().emit("onRefresh"),a._calculateTotal();case 40:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}();case 9:case"end":return t.stop()}}),t,this)}))),function(){return o.apply(this,arguments)})},{key:"_cellRoleRender",value:function(t){var e=this;return"ITEM_CODE"==t.column.dataField?p.createElement(_.ZP,{id:"txtGrdItemsCode"+t.rowIndex,parent:this,simple:!0,upper:this.sysParam.filter({ID:"onlyBigChar",USERS:this.user.CODE}).getValue().value,value:t.value,onKeyDown:function(){var n=(0,r.Z)(m().mark((function n(a){return m().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if("F10"!=a.event.key&&"ArrowRight"!=a.event.key){n.next=6;break}return e.combineControl=!0,e.combineNew=!1,n.next=5,e.pg_txtItemsCode.setVal(t.value);case 5:e.pg_txtItemsCode.onClick=function(){var n=(0,r.Z)(m().mark((function n(a){var o,r;return m().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(1!=a.length){n.next=5;break}return n.next=3,e.addItem(a[0],t.rowIndex);case 3:n.next=33;break;case 5:if(!(a.length>1)){n.next=33;break}o=0;case 7:if(!(o<a.length)){n.next=33;break}if(0!=o){n.next=13;break}return n.next=11,e.addItem(a[o],t.rowIndex);case 11:n.next=30;break;case 13:return(r=U({},e.docObj.docItems.empty)).DOC_GUID=e.docObj.dt()[0].GUID,r.TYPE=e.docObj.dt()[0].TYPE,r.DOC_TYPE=e.docObj.dt()[0].DOC_TYPE,r.REBATE=e.docObj.dt()[0].REBATE,r.LINE_NO=e.docObj.docItems.dt().length,r.REF=e.docObj.dt()[0].REF,r.REF_NO=e.docObj.dt()[0].REF_NO,r.OUTPUT=e.docObj.dt()[0].OUTPUT,r.INPUT="00000000-0000-0000-0000-000000000000",r.DOC_DATE=e.docObj.dt()[0].DOC_DATE,r.SHIPMENT_DATE=e.docObj.dt()[0].SHIPMENT_DATE,e.txtRef.readOnly=!0,e.txtRefno.readOnly=!0,e.docObj.docItems.addEmpty(r),n.next=30,e.addItem(a[o],e.docObj.docItems.dt().length-1);case 30:o++,n.next=7;break;case 33:case"end":return n.stop()}}),n)})));return function(t){return n.apply(this,arguments)}}();case 6:case"end":return n.stop()}}),n)})));return function(t){return n.apply(this,arguments)}}(),onValueChanged:function(e){t.value=e.value},onChange:function(){var n=(0,r.Z)(m().mark((function n(a){var o,r,c;return m().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(void 0!==a.event.isTrusted){n.next=15;break}return e.combineControl=!0,e.combineNew=!1,o={query:"SELECT ITEMS_VW_01.GUID,CODE,NAME,VAT,COST_PRICE FROM ITEMS_VW_01 INNER JOIN ITEM_BARCODE_VW_01 ON ITEMS_VW_01.GUID = ITEM_BARCODE_VW_01.ITEM_GUID WHERE CODE = @CODE OR ITEM_BARCODE_VW_01.BARCODE = @CODE",param:["CODE:string|50"],value:[a.component._changedValue]},n.next=6,e.core.sql.execute(o);case 6:if(!((r=n.sent).result.recordset.length>0)){n.next=12;break}return n.next=10,e.addItem(r.result.recordset[0],t.rowIndex);case 10:n.next=15;break;case 12:return c={id:"msgItemNotFound",showTitle:!0,title:e.t("msgItemNotFound.title"),showCloseButton:!0,width:"500px",height:"200px",button:[{id:"btn01",caption:e.t("msgItemNotFound.btn01"),location:"after"}],content:p.createElement("div",{style:{textAlign:"center",fontSize:"20px"}},e.t("msgItemNotFound.msg"))},n.next=15,(0,y.W)(c);case 15:case"end":return n.stop()}}),n)})));return function(t){return n.apply(this,arguments)}}().bind(this),button:[{id:"01",icon:"more",onClick:function(){e.pg_txtItemsCode.show(),e.pg_txtItemsCode.onClick=function(){var n=(0,r.Z)(m().mark((function n(a){var o,r;return m().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(e.combineControl=!0,e.combineNew=!1,1!=a.length){n.next=7;break}return n.next=5,e.addItem(a[0],t.rowIndex);case 5:n.next=35;break;case 7:if(!(a.length>1)){n.next=35;break}o=0;case 9:if(!(o<a.length)){n.next=35;break}if(0!=o){n.next=15;break}return n.next=13,e.addItem(a[o],t.rowIndex);case 13:n.next=32;break;case 15:return(r=U({},e.docObj.docItems.empty)).DOC_GUID=e.docObj.dt()[0].GUID,r.TYPE=e.docObj.dt()[0].TYPE,r.DOC_TYPE=e.docObj.dt()[0].DOC_TYPE,r.REBATE=e.docObj.dt()[0].REBATE,r.LINE_NO=e.docObj.docItems.dt().length,r.REF=e.docObj.dt()[0].REF,r.REF_NO=e.docObj.dt()[0].REF_NO,r.OUTPUT=e.docObj.dt()[0].OUTPUT,r.INPUT="00000000-0000-0000-0000-000000000000",r.DOC_DATE=e.docObj.dt()[0].DOC_DATE,r.SHIPMENT_DATE=e.docObj.dt()[0].SHIPMENT_DATE,e.txtRef.readOnly=!0,e.txtRefno.readOnly=!0,e.docObj.docItems.addEmpty(r),n.next=32,e.addItem(a[o],e.docObj.docItems.dt().length-1);case 32:o++,n.next=9;break;case 35:case"end":return n.stop()}}),n)})));return function(t){return n.apply(this,arguments)}}()}}]}):"DESCRIPTION"==t.column.dataField?p.createElement(_.ZP,{id:"txtGrdDesc"+t.rowIndex,parent:this,simple:!0,upper:this.sysParam.filter({ID:"onlyBigChar",USERS:this.user.CODE}).getValue().value,value:t.value,onChange:function(n){e.docObj.docItems.dt()[t.rowIndex].DESCRIPTION=n.component._changedValue},button:[{id:"01",icon:"more",onClick:function(){e.pg_quickDesc.show(),e.pg_quickDesc.onClick=function(){var n=(0,r.Z)(m().mark((function n(a){return m().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:1==a.length&&(t.value=a[0].DESCRIPTION,e.docObj.docItems.dt()[t.rowIndex].DESCRIPTION=a[0].DESCRIPTION);case 1:case"end":return n.stop()}}),n)})));return function(t){return n.apply(this,arguments)}}()}}]}):void 0}},{key:"addItem",value:(n=(0,r.Z)(m().mark((function t(e,n){var o,c,i,s,d,l,u=this;return m().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(h.Z.instance.setState({isExecute:!0}),void 0===this.quantityControl||1!=this.quantityControl){t.next=18;break}return o={query:"SELECT [dbo].[FN_DEPOT_QUANTITY](@GUID,@DEPOT,GETDATE()) AS QUANTITY ",param:["GUID:string|50","DEPOT:string|50"],value:[e.GUID,this.docObj.dt()[0].OUTPUT]},t.next=5,this.core.sql.execute(o);case 5:if(!((c=t.sent).result.recordset.length>0)){t.next=18;break}if(!(c.result.recordset[0].QUANTITY<1)){t.next=17;break}return h.Z.instance.setState({isExecute:!1}),i={id:"msgNotQuantity",showTitle:!0,title:this.t("msgNotQuantity.title"),showCloseButton:!0,width:"500px",height:"200px",button:[{id:"btn01",caption:this.t("msgNotQuantity.btn01"),location:"after"}],content:p.createElement("div",{style:{textAlign:"center",fontSize:"20px"}},this.t("msgNotQuantity.msg"))},t.next=12,(0,y.W)(i);case 12:return t.next=14,this.grdOutwasItems.devGrid.deleteRow(n);case 14:return t.abrupt("return");case 17:this.docObj.docItems.dt()[n].DEPOT_QUANTITY=c.result.recordset[0].QUANTITY;case 18:s=m().mark((function t(a){var o;return m().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(u.docObj.docItems.dt()[a].ITEM_CODE!=e.CODE){t.next=16;break}if(1!=u.combineControl){t.next=10;break}return o="",h.Z.instance.setState({isExecute:!1}),t.next=6,u.msgCombineItem.show().then(function(){var t=(0,r.Z)(m().mark((function t(e){return m().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if("btn01"!=e){t.next=8;break}return u.docObj.docItems.dt()[a].QUANTITY=u.docObj.docItems.dt()[a].QUANTITY+1,u._calculateTotal(),t.next=5,u.grdOutwasItems.devGrid.deleteRow(n);case 5:return 1==u.checkCombine.value&&(u.combineControl=!1),o=e,t.abrupt("return");case 8:if("btn02"!=e){t.next=11;break}return 1==u.checkCombine.value&&(u.combineControl=!1,u.combineNew=!0),t.abrupt("return");case 11:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}());case 6:if("btn01"!=o){t.next=8;break}return t.abrupt("return",{v:void 0});case 8:t.next=16;break;case 10:if(0!=u.combineNew){t.next=16;break}return u.docObj.docItems.dt()[a].QUANTITY=u.docObj.docItems.dt()[a].QUANTITY+1,u._calculateTotal(),t.next=15,u.grdOutwasItems.devGrid.deleteRow(n);case 15:return t.abrupt("return",{v:void 0});case 16:case"end":return t.stop()}}),t)})),d=0;case 20:if(!(d<this.docObj.docItems.dt().length)){t.next=28;break}return t.delegateYield(s(d),"t0",22);case 22:if(l=t.t0,"object"!==(0,a.Z)(l)){t.next=25;break}return t.abrupt("return",l.v);case 25:d++,t.next=20;break;case 28:this.docObj.docItems.dt()[n].ITEM_CODE=e.CODE,this.docObj.docItems.dt()[n].BARCODE=e.BARCODE,this.docObj.docItems.dt()[n].ITEM=e.GUID,this.docObj.docItems.dt()[n].VAT_RATE=0,this.docObj.docItems.dt()[n].ITEM_NAME=e.NAME,this.docObj.docItems.dt()[n].DISCOUNT=0,this.docObj.docItems.dt()[n].DISCOUNT_RATE=0,this.docObj.docItems.dt()[n].COST_PRICE=e.COST_PRICE,this._calculateTotal(),h.Z.instance.setState({isExecute:!1});case 38:case"end":return t.stop()}}),t,this)}))),function(t,e){return n.apply(this,arguments)})},{key:"checkRow",value:(e=(0,r.Z)(m().mark((function t(){var e;return m().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:for(e=0;e<this.docObj.docItems.dt().length;e++)this.docObj.docItems.dt()[e].INPUT=this.docObj.dt()[0].INPUT,this.docObj.docItems.dt()[e].OUTPUT=this.docObj.dt()[0].OUTPUT,this.docObj.docItems.dt()[e].DOC_DATE=this.docObj.dt()[0].DOC_DATE;case 1:case"end":return t.stop()}}),t,this)}))),function(){return e.apply(this,arguments)})},{key:"render",value:function(){var t,e,n=this;return p.createElement("div",null,p.createElement(f(),null,p.createElement("div",{className:"row px-2 pt-2"},p.createElement("div",{className:"col-12"},p.createElement(T(),null,p.createElement(x.Item,{location:"after",locateInMenu:"auto"},p.createElement(P.Z,{id:"btnBack",parent:this,icon:"revert",type:"default",onClick:function(){n.getDoc(n.docObj.dt()[0].GUID,n.docObj.dt()[0].REF,n.docObj.dt()[0].REF_NO)}})),p.createElement(x.Item,{location:"after",locateInMenu:"auto"},p.createElement(P.Z,{id:"btnNew",parent:this,icon:"file",type:"default",onClick:function(){n.init()}})),p.createElement(x.Item,{location:"after",locateInMenu:"auto"},p.createElement(P.Z,{id:"btnSave",parent:this,icon:"floppy",type:"default",validationGroup:"frmOutwasFrom"+this.tabIndex,onClick:function(){var t=(0,r.Z)(m().mark((function t(e){var a,o,r,c,i,s,d;return m().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(1!=n.docLocked){t.next=5;break}return a={id:"msgDocLocked",showTitle:!0,title:n.t("msgDocLocked.title"),showCloseButton:!0,width:"500px",height:"200px",button:[{id:"btn01",caption:n.t("msgDocLocked.btn01"),location:"after"}],content:p.createElement("div",{style:{textAlign:"center",fontSize:"20px"}},n.t("msgDocLocked.msg"))},t.next=4,(0,y.W)(a);case 4:return t.abrupt("return");case 5:if(void 0===(o=n.prmObj.filter({ID:"descriptionControl",USERS:n.user.CODE}).getValue())||1!=o.value){t.next=17;break}r=0;case 8:if(!(r<n.docObj.docItems.dt().length)){t.next=17;break}if(""!=n.docObj.docItems.dt()[r].DESCRIPTION){t.next=14;break}return c={id:"msgEmpDescription",showTitle:!0,title:n.t("msgEmpDescription.title"),showCloseButton:!0,width:"500px",height:"200px",button:[{id:"btn01",caption:n.t("msgEmpDescription.btn01"),location:"after"}],content:p.createElement("div",{style:{textAlign:"center",fontSize:"20px"}},n.t("msgEmpDescription.msg"))},t.next=13,(0,y.W)(c);case 13:return t.abrupt("return");case 14:r++,t.next=8;break;case 17:if(""!=n.docObj.docItems.dt()[n.docObj.docItems.dt().length-1].ITEM_CODE){t.next=20;break}return t.next=20,n.grdOutwasItems.devGrid.deleteRow(n.docObj.docItems.dt().length-1);case 20:if("valid"!=e.validationGroup.validate().status){t.next=43;break}return i={id:"msgSave",showTitle:!0,title:n.t("msgSave.title"),showCloseButton:!0,width:"500px",height:"200px",button:[{id:"btn01",caption:n.t("msgSave.btn01"),location:"before"},{id:"btn02",caption:n.t("msgSave.btn02"),location:"after"}],content:p.createElement("div",{style:{textAlign:"center",fontSize:"20px"}},n.t("msgSave.msg"))},t.next=24,(0,y.W)(i);case 24:if("btn01"!=t.sent){t.next=41;break}return s={id:"msgSaveResult",showTitle:!0,title:n.t("msgSave.title"),showCloseButton:!0,width:"500px",height:"200px",button:[{id:"btn01",caption:n.t("msgSave.btn01"),location:"after"}]},t.next=29,n.docObj.save();case 29:if(t.t0=t.sent,0!=t.t0){t.next=38;break}return s.content=p.createElement("div",{style:{textAlign:"center",fontSize:"20px",color:"green"}},n.t("msgSaveResult.msgSuccess")),t.next=34,(0,y.W)(s);case 34:n.btnSave.setState({disabled:!0}),n.btnNew.setState({disabled:!1}),t.next=41;break;case 38:return s.content=p.createElement("div",{style:{textAlign:"center",fontSize:"20px",color:"red"}},n.t("msgSaveResult.msgFailed")),t.next=41,(0,y.W)(s);case 41:t.next=46;break;case 43:return d={id:"msgSaveValid",showTitle:!0,title:n.t("msgSaveValid.title"),showCloseButton:!0,width:"500px",height:"200px",button:[{id:"btn01",caption:n.t("msgSaveValid.btn01"),location:"after"}],content:p.createElement("div",{style:{textAlign:"center",fontSize:"20px"}},n.t("msgSaveValid.msg"))},t.next=46,(0,y.W)(d);case 46:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()})),p.createElement(x.Item,{location:"after",locateInMenu:"auto"},p.createElement(P.Z,{id:"btnDelete",parent:this,icon:"trash",type:"default",onClick:(0,r.Z)(m().mark((function t(){var e,a;return m().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(1!=n.docLocked){t.next=5;break}return e={id:"msgDocLocked",showTitle:!0,title:n.t("msgDocLocked.title"),showCloseButton:!0,width:"500px",height:"200px",button:[{id:"btn01",caption:n.t("msgDocLocked.btn01"),location:"after"}],content:p.createElement("div",{style:{textAlign:"center",fontSize:"20px"}},n.t("msgDocLocked.msg"))},t.next=4,(0,y.W)(e);case 4:return t.abrupt("return");case 5:return a={id:"msgDelete",showTitle:!0,title:n.t("msgDelete.title"),showCloseButton:!0,width:"500px",height:"200px",button:[{id:"btn01",caption:n.t("msgDelete.btn01"),location:"before"},{id:"btn02",caption:n.t("msgDelete.btn02"),location:"after"}],content:p.createElement("div",{style:{textAlign:"center",fontSize:"20px"}},n.t("msgDelete.msg"))},t.next=8,(0,y.W)(a);case 8:if("btn01"!=t.sent){t.next=14;break}return n.docObj.dt("DOC").removeAt(0),t.next=13,n.docObj.dt("DOC").delete();case 13:n.init();case 14:case"end":return t.stop()}}),t)})))})),p.createElement(x.Item,{location:"after",locateInMenu:"auto"},p.createElement(P.Z,{id:"btnLock",parent:this,icon:"key",type:"default",onClick:(0,r.Z)(m().mark((function t(){var e,a;return m().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(0!=n.docObj.dt()[0].LOCKED){t.next=21;break}if(n.docLocked=!0,n.docObj.dt()[0].LOCKED=1,n.frmOutwas.option("disabled",!0),""!=n.docObj.docItems.dt()[n.docObj.docItems.dt().length-1].ITEM_CODE){t.next=7;break}return t.next=7,n.grdOutwasItems.devGrid.deleteRow(n.docObj.docItems.dt().length-1);case 7:return t.next=9,n.docObj.save();case 9:if(t.t0=t.sent,0!=t.t0){t.next=16;break}return e={id:"msgLocked",showTitle:!0,title:n.t("msgLocked.title"),showCloseButton:!0,width:"500px",height:"200px",button:[{id:"btn01",caption:n.t("msgLocked.btn01"),location:"after"}],content:p.createElement("div",{style:{textAlign:"center",fontSize:"20px"}},n.t("msgLocked.msg"))},t.next=14,(0,y.W)(e);case 14:t.next=19;break;case 16:return tmpConfObj1.content=p.createElement("div",{style:{textAlign:"center",fontSize:"20px",color:"red"}},n.t("msgSaveResult.msgFailed")),t.next=19,(0,y.W)(tmpConfObj1);case 19:t.next=31;break;case 21:if(1!=n.docObj.dt()[0].LOCKED){t.next=27;break}n.txtPassword.setState({value:""}),n.popPassword.show(),n.txtPassword.value="",t.next=31;break;case 27:if(2!=n.docObj.dt()[0].LOCKED){t.next=31;break}return a={id:"msgLockedType2",showTitle:!0,title:n.t("msgLockedType2.title"),showCloseButton:!0,width:"500px",height:"200px",button:[{id:"btn01",caption:n.t("msgLockedType2.btn01"),location:"after"}],content:p.createElement("div",{style:{textAlign:"center",fontSize:"20px"}},n.t("msgLockedType2.msg"))},t.next=31,(0,y.W)(a);case 31:case"end":return t.stop()}}),t)})))})),p.createElement(x.Item,{location:"after",locateInMenu:"auto"},p.createElement(P.Z,{id:"btnPrint",parent:this,icon:"print",type:"default",onClick:function(){n.popDesign.show()}})),p.createElement(x.Item,{location:"after",locateInMenu:"auto",widget:"dxButton",options:{type:"default",icon:"clear",onClick:(e=(0,r.Z)(m().mark((function t(){var e;return m().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return e={id:"msgClose",showTitle:!0,title:n.lang.t("msgWarning"),showCloseButton:!0,width:"500px",height:"200px",button:[{id:"btn01",caption:n.lang.t("btnYes"),location:"before"},{id:"btn02",caption:n.lang.t("btnNo"),location:"after"}],content:p.createElement("div",{style:{textAlign:"center",fontSize:"20px"}},n.lang.t("msgClose"))},t.next=3,(0,y.W)(e);case 3:"btn01"==t.sent&&h.Z.instance.panel.closePage();case 5:case"end":return t.stop()}}),t)}))),function(){return e.apply(this,arguments)})}})))),p.createElement("div",{className:"row px-2 pt-2"},p.createElement("div",{className:"col-12"},p.createElement(D(),{colCount:3,id:"frmOutwasFrom"},p.createElement(x.Item,null,p.createElement(x.Label,{text:this.t("txtRefRefno"),alignment:"right"}),p.createElement("div",{className:"row"},p.createElement("div",{className:"col-4 pe-0"},p.createElement(_.ZP,{id:"txtRef",parent:this,simple:!0,dt:{data:this.docObj.dt("DOC"),field:"REF"},upper:this.sysParam.filter({ID:"onlyBigChar",USERS:this.user.CODE}).getValue().value,readOnly:!0,maxLength:32,onChange:function(){var t=(0,r.Z)(m().mark((function t(e){var a,o;return m().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return a={query:"SELECT ISNULL(MAX(REF_NO) + 1,1) AS REF_NO FROM DOC WHERE TYPE = 1 AND DOC_TYPE = 1 AND REF = @REF ",param:["REF:string|25"],value:[n.txtRef.value]},t.next=3,n.core.sql.execute(a);case 3:(o=t.sent).result.recordset.length>0&&(n.txtRefno.value=o.result.recordset[0].REF_NO);case 5:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}().bind(this),param:this.param.filter({ELEMENT:"txtRef",USERS:this.user.CODE}),access:this.access.filter({ELEMENT:"txtRef",USERS:this.user.CODE})},p.createElement(_.cX,{validationGroup:"frmOutwasFrom"+this.tabIndex},p.createElement(_.n2,{message:this.t("validRef")})))),p.createElement("div",{className:"col-5 ps-0"},p.createElement(_.ZP,{id:"txtRefno",parent:this,simple:!0,dt:{data:this.docObj.dt("DOC"),field:"REF_NO"},readOnly:!0,button:[{id:"01",icon:"more",onClick:function(){n.pg_Docs.show(),n.pg_Docs.onClick=function(t){t.length>0&&n.getDoc(t[0].GUID,t[0].REF,t[0].REF_NO)}}},{id:"02",icon:"arrowdown",onClick:function(){n.txtRefno.value=Math.floor(Date.now()/1e3)}}],onChange:(0,r.Z)(m().mark((function t(){return m().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,n.checkDoc("00000000-0000-0000-0000-000000000000",n.txtRef.value,n.txtRefno.value);case 2:3==t.sent&&(n.txtRefno.value="");case 4:case"end":return t.stop()}}),t)}))).bind(this),param:this.param.filter({ELEMENT:"txtRefno",USERS:this.user.CODE}),access:this.access.filter({ELEMENT:"txtRefno",USERS:this.user.CODE})},p.createElement(_.cX,{validationGroup:"frmOutwasFrom"+this.tabIndex},p.createElement(_.n2,{message:this.t("validRefNo")}))))),p.createElement(N.Z,{id:"pg_Docs",parent:this,container:"#root",visible:!1,position:{of:"#root"},showTitle:!0,showBorders:!0,width:"90%",height:"90%",title:this.t("pg_Docs.title"),data:{source:{select:{query:"SELECT GUID,REF,REF_NO,OUTPUT_NAME,DOC_DATE_CONVERT FROM DOC_VW_01 WHERE TYPE = 1 AND DOC_TYPE = 1 AND REBATE = 0 ORDER BY DOC_DATE DESC"},sql:this.core.sql}},button:[{id:"01",icon:"more",onClick:function(){}}]},p.createElement(A.sg,{dataField:"REF",caption:this.t("pg_Docs.clmRef"),width:150}),p.createElement(A.sg,{dataField:"REF_NO",caption:this.t("pg_Docs.clmRefNo"),width:300}),p.createElement(A.sg,{dataField:"DOC_DATE_CONVERT",caption:this.t("pg_Docs.clmDate"),width:300}),p.createElement(A.sg,{dataField:"OUTPUT_NAME",caption:this.t("pg_Docs.clmOutputName"),width:300}),p.createElement(A.sg,{dataField:"DOC_DATE_CONVERT",caption:this.t("pg_Docs.clmDocDate"),width:300}))),p.createElement(x.EmptyItem,null),p.createElement(x.EmptyItem,null),p.createElement(x.Item,null,p.createElement(x.Label,{text:this.t("cmbOutDepot"),alignment:"right"}),p.createElement(R.ZP,{simple:!0,parent:this,id:"cmbOutDepot",dt:{data:this.docObj.dt("DOC"),field:"OUTPUT"},displayExpr:"NAME",valueExpr:"GUID",value:"",searchEnabled:!0,notRefresh:!0,onValueChanged:(0,r.Z)(m().mark((function t(){return m().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:n.checkRow();case 1:case"end":return t.stop()}}),t)}))).bind(this),data:{source:{select:{query:"SELECT * FROM DEPOT_VW_01 WHERE TYPE = 1"},sql:this.core.sql}},param:this.param.filter({ELEMENT:"cmbOutDepot",USERS:this.user.CODE}),access:this.access.filter({ELEMENT:"cmbOutDepot",USERS:this.user.CODE})},p.createElement(_.cX,{validationGroup:"frmOutwasFrom"+this.tabIndex},p.createElement(_.n2,{message:this.t("validDepot")})))),p.createElement(x.Item,null,p.createElement(x.Label,{text:this.t("dtDocDate"),alignment:"right"}),p.createElement(S.ZP,{simple:!0,parent:this,id:"dtDocDate",dt:{data:this.docObj.dt("DOC"),field:"DOC_DATE"},onValueChanged:(0,r.Z)(m().mark((function t(){return m().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:n.checkRow();case 1:case"end":return t.stop()}}),t)}))).bind(this)},p.createElement(_.cX,{validationGroup:"frmOutwasFrom"+this.tabIndex},p.createElement(_.n2,{message:this.t("validDocDate")})))),p.createElement(x.EmptyItem,null),p.createElement(x.Item,null,p.createElement(x.Label,{text:this.t("txtBarcode"),alignment:"right"}),p.createElement(_.ZP,{id:"txtBarcode",parent:this,simple:!0,upper:this.sysParam.filter({ID:"onlyBigChar",USERS:this.user.CODE}).getValue().value,button:[{id:"01",icon:"fa-solid fa-barcode",onClick:(t=(0,r.Z)(m().mark((function t(e){var a;return m().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(""!=n.cmbOutDepot.value){t.next=6;break}return a={id:"msgDocValid",showTitle:!0,title:n.t("msgDocValid.title"),showCloseButton:!0,width:"500px",height:"200px",button:[{id:"btn01",caption:n.t("msgDocValid.btn01"),location:"after"}],content:p.createElement("div",{style:{textAlign:"center",fontSize:"20px"}},n.t("msgDocValid.msg"))},t.next=4,(0,y.W)(a);case 4:return n.txtBarcode.setState({value:""}),t.abrupt("return");case 6:return t.next=8,n.pg_txtBarcode.setVal(n.txtBarcode.value);case 8:n.pg_txtBarcode.show(),n.pg_txtBarcode.onClick=function(){var t=(0,r.Z)(m().mark((function t(e){var a,o,r;return m().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n.txtBarcode.setState({value:""}),(a=U({},n.docObj.docItems.empty)).DOC_GUID=n.docObj.dt()[0].GUID,a.TYPE=n.docObj.dt()[0].TYPE,a.DOC_TYPE=n.docObj.dt()[0].DOC_TYPE,a.REBATE=n.docObj.dt()[0].REBATE,a.LINE_NO=n.docObj.docItems.dt().length,a.REF=n.docObj.dt()[0].REF,a.REF_NO=n.docObj.dt()[0].REF_NO,a.OUTPUT=n.docObj.dt()[0].OUTPUT,a.INPUT=n.docObj.dt()[0].INPUT,a.DOC_DATE=n.docObj.dt()[0].DOC_DATE,a.SHIPMENT_DATE=n.docObj.dt()[0].SHIPMENT_DATE,n.txtRef.readOnly=!0,n.txtRefno.readOnly=!0,n.docObj.docItems.addEmpty(a),t.next=18,n.core.util.waitUntil(100);case 18:if(!(e.length>0)){t.next=58;break}if(n.customerControl=!0,n.customerClear=!1,n.combineControl=!0,n.combineNew=!1,1!=e.length){t.next=28;break}return t.next=26,n.addItem(e[0],n.docObj.docItems.dt().length-1);case 26:t.next=58;break;case 28:if(!(e.length>1)){t.next=58;break}o=0;case 30:if(!(o<e.length)){t.next=58;break}if(0!=o){t.next=36;break}return t.next=34,n.addItem(e[o],n.docObj.docItems.dt().length-1);case 34:t.next=55;break;case 36:return(r=U({},n.docObj.docItems.empty)).DOC_GUID=n.docObj.dt()[0].GUID,r.TYPE=n.docObj.dt()[0].TYPE,r.DOC_TYPE=n.docObj.dt()[0].DOC_TYPE,r.REBATE=n.docObj.dt()[0].REBATE,r.LINE_NO=n.docObj.docItems.dt().length,r.REF=n.docObj.dt()[0].REF,r.REF_NO=n.docObj.dt()[0].REF_NO,r.OUTPUT=n.docObj.dt()[0].OUTPUT,r.INPUT=n.docObj.dt()[0].INPUT,r.DOC_DATE=n.docObj.dt()[0].DOC_DATE,r.SHIPMENT_DATE=n.docObj.dt()[0].SHIPMENT_DATE,n.txtRef.readOnly=!0,n.txtRefno.readOnly=!0,n.docObj.docItems.addEmpty(r),t.next=53,n.core.util.waitUntil(100);case 53:return t.next=55,n.addItem(e[o],n.docObj.docItems.dt().length-1);case 55:o++,t.next=30;break;case 58:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}();case 10:case"end":return t.stop()}}),t)}))),function(e){return t.apply(this,arguments)})}],onEnterKey:function(){var t=(0,r.Z)(m().mark((function t(e){var a,o,r,c,i;return m().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(""!=n.cmbOutDepot.value){t.next=6;break}return a={id:"msgDocValid",showTitle:!0,title:n.t("msgDocValid.title"),showCloseButton:!0,width:"500px",height:"200px",button:[{id:"btn01",caption:n.t("msgDocValid.btn01"),location:"after"}],content:p.createElement("div",{style:{textAlign:"center",fontSize:"20px"}},n.t("msgDocValid.msg"))},t.next=4,(0,y.W)(a);case 4:return n.txtBarcode.setState({value:""}),t.abrupt("return");case 6:return o={query:"SELECT ITEMS_VW_01.GUID,CODE,NAME,VAT,COST_PRICE FROM ITEMS_VW_01 INNER JOIN ITEM_BARCODE_VW_01 ON ITEMS_VW_01.GUID = ITEM_BARCODE_VW_01.ITEM_GUID WHERE CODE = @CODE OR ITEM_BARCODE_VW_01.BARCODE = @CODE ORDER BY ITEM_BARCODE_VW_01.CDATE DESC",param:["CODE:string|50"],value:[n.txtBarcode.value]},t.next=9,n.core.sql.execute(o);case 9:if(r=t.sent,n.txtBarcode.setState({value:""}),!(r.result.recordset.length>0)){t.next=19;break}return n.combineControl=!0,n.combineNew=!1,void 0!==n.docObj.docItems.dt()[n.docObj.docItems.dt().length-1]&&""==n.docObj.docItems.dt()[n.docObj.docItems.dt().length-1].CODE||((c=U({},n.docObj.docItems.empty)).DOC_GUID=n.docObj.dt()[0].GUID,c.TYPE=n.docObj.dt()[0].TYPE,c.DOC_TYPE=n.docObj.dt()[0].DOC_TYPE,c.REBATE=n.docObj.dt()[0].REBATE,c.LINE_NO=n.docObj.docItems.dt().length,c.REF=n.docObj.dt()[0].REF,c.REF_NO=n.docObj.dt()[0].REF_NO,c.OUTPUT=n.docObj.dt()[0].OUTPUT,c.INPUT="00000000-0000-0000-0000-000000000000",c.DOC_DATE=n.docObj.dt()[0].DOC_DATE,c.SHIPMENT_DATE=n.docObj.dt()[0].SHIPMENT_DATE,n.txtRef.readOnly=!0,n.txtRefno.readOnly=!0,n.docObj.docItems.addEmpty(c)),t.next=17,n.addItem(r.result.recordset[0],n.docObj.docItems.dt().length-1);case 17:t.next=22;break;case 19:return i={id:"msgItemNotFound",showTitle:!0,title:n.t("msgItemNotFound.title"),showCloseButton:!0,width:"500px",height:"200px",button:[{id:"btn01",caption:n.t("msgItemNotFound.btn01"),location:"after"}],content:p.createElement("div",{style:{textAlign:"center",fontSize:"20px"}},n.t("msgItemNotFound.msg"))},t.next=22,(0,y.W)(i);case 22:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}().bind(this),param:this.param.filter({ELEMENT:"txtBarcode",USERS:this.user.CODE}),access:this.access.filter({ELEMENT:"txtBarcode",USERS:this.user.CODE})}))))),p.createElement("div",{className:"row px-2 pt-2"},p.createElement("div",{className:"col-12"},p.createElement(D(),{colCount:1,onInitialized:function(t){n.frmOutwas=t.component}},p.createElement(x.Item,{location:"after"},p.createElement(w.Button,{icon:"add",validationGroup:"frmOutwasFrom"+this.tabIndex,onClick:function(){var t=(0,r.Z)(m().mark((function t(e){var a;return m().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if("valid"!=e.validationGroup.validate().status){t.next=10;break}if(void 0===n.docObj.docItems.dt()[0]){t.next=6;break}if(""!=n.docObj.docItems.dt()[n.docObj.docItems.dt().length-1].ITEM_CODE){t.next=6;break}return n.pg_txtItemsCode.show(),n.pg_txtItemsCode.onClick=function(){var t=(0,r.Z)(m().mark((function t(e){var a,o;return m().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(n.combineControl=!0,n.combineNew=!1,1!=e.length){t.next=7;break}return t.next=5,n.addItem(e[0],n.docObj.docItems.dt().length-1);case 5:t.next=35;break;case 7:if(!(e.length>1)){t.next=35;break}a=0;case 9:if(!(a<e.length)){t.next=35;break}if(0!=a){t.next=15;break}return t.next=13,n.addItem(e[a],n.docObj.docItems.dt().length-1);case 13:t.next=32;break;case 15:return(o=U({},n.docObj.docItems.empty)).DOC_GUID=n.docObj.dt()[0].GUID,o.TYPE=n.docObj.dt()[0].TYPE,o.DOC_TYPE=n.docObj.dt()[0].DOC_TYPE,o.REBATE=n.docObj.dt()[0].REBATE,o.LINE_NO=n.docObj.docItems.dt().length,o.REF=n.docObj.dt()[0].REF,o.REF_NO=n.docObj.dt()[0].REF_NO,o.OUTPUT=n.docObj.dt()[0].OUTPUT,o.INPUT="00000000-0000-0000-0000-000000000000",o.DOC_DATE=n.docObj.dt()[0].DOC_DATE,o.SHIPMENT_DATE=n.docObj.dt()[0].SHIPMENT_DATE,n.txtRef.readOnly=!0,n.txtRefno.readOnly=!0,n.docObj.docItems.addEmpty(o),t.next=32,n.addItem(e[a],n.docObj.docItems.dt().length-1);case 32:a++,t.next=9;break;case 35:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),t.abrupt("return");case 6:n.pg_txtItemsCode.show(),n.pg_txtItemsCode.onClick=function(){var t=(0,r.Z)(m().mark((function t(e){var a,o,r;return m().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if((a=U({},n.docObj.docItems.empty)).DOC_GUID=n.docObj.dt()[0].GUID,a.TYPE=n.docObj.dt()[0].TYPE,a.DOC_TYPE=n.docObj.dt()[0].DOC_TYPE,a.REBATE=n.docObj.dt()[0].REBATE,a.LINE_NO=n.docObj.docItems.dt().length,a.REF=n.docObj.dt()[0].REF,a.REF_NO=n.docObj.dt()[0].REF_NO,a.OUTPUT=n.docObj.dt()[0].OUTPUT,a.INPUT="00000000-0000-0000-0000-000000000000",a.DOC_DATE=n.docObj.dt()[0].DOC_DATE,a.SHIPMENT_DATE=n.docObj.dt()[0].SHIPMENT_DATE,n.txtRef.readOnly=!0,n.txtRefno.readOnly=!0,n.docObj.docItems.addEmpty(a),n.combineControl=!0,n.combineNew=!1,1!=e.length){t.next=22;break}return t.next=20,n.addItem(e[0],n.docObj.docItems.dt().length-1);case 20:t.next=50;break;case 22:if(!(e.length>1)){t.next=50;break}o=0;case 24:if(!(o<e.length)){t.next=50;break}if(0!=o){t.next=30;break}return t.next=28,n.addItem(e[o],n.docObj.docItems.dt().length-1);case 28:t.next=47;break;case 30:return(r=U({},n.docObj.docItems.empty)).DOC_GUID=n.docObj.dt()[0].GUID,r.TYPE=n.docObj.dt()[0].TYPE,r.DOC_TYPE=n.docObj.dt()[0].DOC_TYPE,r.REBATE=n.docObj.dt()[0].REBATE,r.LINE_NO=n.docObj.docItems.dt().length,r.REF=n.docObj.dt()[0].REF,r.REF_NO=n.docObj.dt()[0].REF_NO,r.OUTPUT=n.docObj.dt()[0].OUTPUT,r.INPUT="00000000-0000-0000-0000-000000000000",r.DOC_DATE=n.docObj.dt()[0].DOC_DATE,r.SHIPMENT_DATE=n.docObj.dt()[0].SHIPMENT_DATE,n.txtRef.readOnly=!0,n.txtRefno.readOnly=!0,n.docObj.docItems.addEmpty(r),t.next=47,n.addItem(e[o],n.docObj.docItems.dt().length-1);case 47:o++,t.next=24;break;case 50:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),t.next=13;break;case 10:return a={id:"msgDocValid",showTitle:!0,title:n.t("msgDocValid.title"),showCloseButton:!0,width:"500px",height:"200px",button:[{id:"btn01",caption:n.t("msgDocValid.btn01"),location:"after"}],content:p.createElement("div",{style:{textAlign:"center",fontSize:"20px"}},n.t("msgDocValid.msg"))},t.next=13,(0,y.W)(a);case 13:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()})),p.createElement(x.Item,null,p.createElement(p.Fragment,null,p.createElement(A.ZP,{parent:this,id:"grdOutwasItems",height:"400",width:"100%",dbApply:!1,loadPanel:{enabled:!0},onRowUpdating:function(){var t=(0,r.Z)(m().mark((function t(e){var a;return m().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(1!=n.quantityControl){t.next=7;break}if(e.component.getRowIndexByKey(e.key),!(void 0!==e.newData.QUANTITY&&e.key.DEPOT_QUANTITY<e.newData.QUANTITY)){t.next=7;break}return a={id:"msgNotQuantity",showTitle:!0,title:n.t("msgNotQuantity.title"),showCloseButton:!0,width:"500px",height:"200px",button:[{id:"btn01",caption:n.t("msgNotQuantity.btn01"),location:"after"}],content:p.createElement("div",{style:{textAlign:"center",fontSize:"20px"}},n.t("msgNotQuantity.msg")+e.oldData.DEPOT_QUANTITY)},t.next=6,(0,y.W)(a);case 6:e.key.QUANTITY=e.oldData.DEPOT_QUANTITY;case 7:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),onRowUpdated:function(){var t=(0,r.Z)(m().mark((function t(e){return m().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:n._calculateTotal();case 1:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),onRowRemoved:function(t){n._calculateTotal()}},p.createElement(A.Po,{defaultPageSize:10}),p.createElement(A.uE,{visible:!0,allowedPageSizes:[5,10,20,50,100],showPageSizeSelector:!0}),p.createElement(A.m_,{editOnKeyPress:!0,enterKeyAction:"moveFocus",enterKeyDirection:"column"}),p.createElement(A.PY,{mode:"standart"}),p.createElement(A.LO,{mode:"cell",allowUpdating:!0,allowDeleting:!0,confirmDelete:!1}),p.createElement(A.D7,{fileName:this.lang.t("menu.stk_02_003"),enabled:!0,allowExportSelectedData:!0}),p.createElement(A.sg,{dataField:"CDATE_FORMAT",caption:this.t("grdOutwasItems.clmCreateDate"),width:200,allowEditing:!1}),p.createElement(A.sg,{dataField:"ITEM_CODE",caption:this.t("grdOutwasItems.clmItemCode"),width:150,editCellRender:this._cellRoleRender}),p.createElement(A.sg,{dataField:"ITEM_NAME",caption:this.t("grdOutwasItems.clmItemName"),width:300}),p.createElement(A.sg,{dataField:"QUANTITY",caption:this.t("grdOutwasItems.clmQuantity"),dataType:"number",width:150}),p.createElement(A.sg,{dataField:"COST_PRICE",caption:this.t("grdOutwasItems.clmCostPrice"),dataType:"number",width:150,allowEditing:!1}),p.createElement(A.sg,{dataField:"DESCRIPTION",caption:this.t("grdOutwasItems.clmDescription")})),p.createElement(C(),{dataSource:this.rightItems,width:200,target:"#grdOutwasItems",onItemClick:function(){var t=(0,r.Z)(m().mark((function t(e){return m().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(e.itemData.text!=n.t("getDispatch")){t.next=4;break}n._getDispatch(),t.next=8;break;case 4:if(e.itemData.text!=n.t("getPayment")){t.next=8;break}return t.next=7,n._getPayment();case 7:n.popPayment.show();case 8:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}().bind(this)})))))),p.createElement("div",{className:"row px-2 pt-2"},p.createElement("div",{className:"col-12"},p.createElement(D(),{colCount:4,parent:this,id:"frmPurcoffer"},p.createElement(x.EmptyItem,{colSpan:3}),p.createElement(x.Item,null,p.createElement(x.Label,{text:this.t("txtTotalCost"),alignment:"right"}),p.createElement(_.ZP,{id:"txtTotalCost",parent:this,simple:!0,readOnly:!0,maxLength:32})),p.createElement(x.EmptyItem,{colSpan:3}),p.createElement(x.Item,null,p.createElement(x.Label,{text:this.t("txtTotalQuantity"),alignment:"right"}),p.createElement(_.ZP,{id:"txtTotalQuantity",parent:this,simple:!0,readOnly:!0,maxLength:32}))))),p.createElement(N.Z,{id:"pg_txtItemsCode",parent:this,container:"#root",visible:!1,position:{of:"#root"},showTitle:!0,showBorders:!0,width:"90%",height:"90%",title:this.t("pg_txtItemsCode.title"),search:!0,data:{source:{select:{query:"SELECT GUID,CODE,NAME,VAT,COST_PRICE FROM ITEMS_VW_01 WHERE UPPER(CODE) LIKE UPPER(@VAL) OR UPPER(NAME) LIKE UPPER(@VAL)",param:["VAL:string|50"]},sql:this.core.sql}}},p.createElement(A.sg,{dataField:"CODE",caption:this.t("pg_txtItemsCode.clmCode"),width:150}),p.createElement(A.sg,{dataField:"NAME",caption:this.t("pg_txtItemsCode.clmName"),width:300,defaultSortOrder:"asc"})),p.createElement(N.Z,{id:"pg_dispatchGrid",parent:this,container:"#root",visible:!1,position:{of:"#root"},showTitle:!0,showBorders:!0,width:"90%",height:"90%",selection:{mode:"multiple"},title:this.t("pg_dispatchGrid.title")},p.createElement(A.sg,{dataField:"REFERANS",caption:this.t("pg_dispatchGrid.clmReferans"),width:200,defaultSortOrder:"asc"}),p.createElement(A.sg,{dataField:"INPUT_NAME",caption:this.t("pg_dispatchGrid.clmCustomer"),width:300}),p.createElement(A.sg,{dataField:"ITEM_CODE",caption:this.t("pg_dispatchGrid.clmCode"),width:200}),p.createElement(A.sg,{dataField:"ITEM_NAME",caption:this.t("pg_dispatchGrid.clmName"),width:300}),p.createElement(A.sg,{dataField:"QUANTITY",caption:this.t("pg_dispatchGrid.clmQuantity"),width:300})),p.createElement("div",null,p.createElement(k.ZP,{parent:this,id:"popPassword",visible:!1,showCloseButton:!0,showTitle:!0,title:this.t("popPassword.title"),container:"#root",width:"500",height:"200",position:{of:"#root"}},p.createElement(D(),{colCount:1,height:"fit-content"},p.createElement(x.Item,null,p.createElement(x.Label,{text:this.t("popPassword.Password"),alignment:"right"}),p.createElement(_.ZP,{id:"txtPassword",mode:"password",parent:this,simple:!0,maxLength:32})),p.createElement(x.Item,null,p.createElement("div",{className:"row"},p.createElement("div",{className:"col-6"},p.createElement(P.Z,{text:this.t("popPassword.btnApprove"),type:"normal",stylingMode:"contained",width:"100%",onClick:(0,r.Z)(m().mark((function t(){var e,a,o,r;return m().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return e=btoa(n.txtPassword.value),a={query:"SELECT TOP 1 * FROM USERS WHERE PWD = @PWD AND ROLE = 'Administrator' AND STATUS = 1",param:["PWD:string|50"],value:[e]},t.next=4,n.core.sql.execute(a);case 4:if(!(t.sent.result.recordset.length>0)){t.next=15;break}return n.docObj.dt()[0].LOCKED=0,n.frmOutwas.option("disabled",!1),n.docLocked=!1,o={id:"msgPasswordSucces",showTitle:!0,title:n.t("msgPasswordSucces.title"),showCloseButton:!0,width:"500px",height:"200px",button:[{id:"btn01",caption:n.t("msgPasswordSucces.btn01"),location:"after"}],content:p.createElement("div",{style:{textAlign:"center",fontSize:"20px"}},n.t("msgPasswordSucces.msg"))},t.next=12,(0,y.W)(o);case 12:n.popPassword.hide(),t.next=18;break;case 15:return r={id:"msgPasswordWrong",showTitle:!0,title:n.t("msgPasswordWrong.title"),showCloseButton:!0,width:"500px",height:"200px",button:[{id:"btn01",caption:n.t("msgPasswordWrong.btn01"),location:"after"}],content:p.createElement("div",{style:{textAlign:"center",fontSize:"20px"}},n.t("msgPasswordWrong.msg"))},t.next=18,(0,y.W)(r);case 18:case"end":return t.stop()}}),t)})))})),p.createElement("div",{className:"col-6"},p.createElement(P.Z,{text:this.lang.t("btnCancel"),type:"normal",stylingMode:"contained",width:"100%",onClick:function(){n.popPassword.hide()}}))))))),p.createElement(N.Z,{id:"pg_quickDesc",parent:this,container:"#root",visible:!1,position:{of:"#root"},showTitle:!0,showBorders:!0,width:"90%",height:"90%",selection:{mode:"single"},title:this.t("pg_quickDesc.title"),data:{source:{select:{query:"SELECT GUID,DESCRIPTION FROM [dbo].[QUICK_DESCRIPTION] WHERE PAGE = 'stk_02_003' "},sql:this.core.sql}},button:[{id:"01",icon:"add",onClick:function(){n.txtQdescAdd.value="",n.popQDescAdd.show(),n.pg_quickDesc.hide()}}]},p.createElement(A.sg,{dataField:"DESCRIPTION",caption:this.t("pg_quickDesc.clmDesc"),width:150})),p.createElement("div",null,p.createElement(k.ZP,{parent:this,id:"popQDescAdd",visible:!1,showCloseButton:!0,showTitle:!0,title:this.t("popQDescAdd.title"),container:"#root",width:"500",height:"200",position:{of:"#root"}},p.createElement(D(),{colCount:1,height:"fit-content"},p.createElement(x.Item,null,p.createElement(x.Label,{text:this.t("popQDescAdd.description"),alignment:"right"}),p.createElement(_.ZP,{id:"txtQdescAdd",parent:this,simple:!0,maxLength:32})),p.createElement(x.Item,null,p.createElement("div",{className:"row"},p.createElement("div",{className:"col-6"},p.createElement(P.Z,{text:this.t("popQDescAdd.btnApprove"),type:"normal",stylingMode:"contained",width:"100%",onClick:(0,r.Z)(m().mark((function t(){var e;return m().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return(e=U({},n.qDescObj.empty)).DESCRIPTION=n.txtQdescAdd.value,e.PAGE=n.props.data.id,n.qDescObj.addEmpty(e),t.next=6,n.qDescObj.save();case 6:n.popQDescAdd.hide(),n.pg_quickDesc.show();case 8:case"end":return t.stop()}}),t)})))})),p.createElement("div",{className:"col-6"},p.createElement(P.Z,{text:this.lang.t("btnCancel"),type:"normal",stylingMode:"contained",width:"100%",onClick:function(){n.popQDescAdd.hide()}}))))))),p.createElement(y.Z,{id:"msgCombineItem",container:"#root",parent:this,position:{of:"#root"},showTitle:!0,title:this.t("msgCombineItem.title"),showCloseButton:!1,width:"500px",height:"250px",button:[{id:"btn01",caption:this.t("msgCombineItem.btn01"),location:"before"},{id:"btn02",caption:this.t("msgCombineItem.btn02"),location:"after"}]},p.createElement("div",{className:"row"},p.createElement("div",{className:"col-12 py-2"},p.createElement("div",{style:{textAlign:"center",fontSize:"20px"}},this.t("msgCombineItem.msg"))),p.createElement("div",{className:"col-12 py-2"},p.createElement(D(),null,p.createElement(x.Item,null,p.createElement(x.Label,{text:this.lang.t("checkAll"),alignment:"right"}),p.createElement(v.ZP,{id:"checkCombine",parent:this,simple:!0,value:!1}))))),p.createElement("div",{className:"row"})),p.createElement("div",null,p.createElement(k.ZP,{parent:this,id:"popDesign",visible:!1,showCloseButton:!0,showTitle:!0,title:this.t("popDesign.title"),container:"#root",width:"500",height:"250",position:{of:"#root"}},p.createElement(D(),{colCount:1,height:"fit-content"},p.createElement(x.Item,null,p.createElement(x.Label,{text:this.t("popDesign.design"),alignment:"right"}),p.createElement(R.ZP,{simple:!0,parent:this,id:"cmbDesignList",notRefresh:!0,displayExpr:"DESIGN_NAME",valueExpr:"TAG",value:"",searchEnabled:!0,onValueChanged:(0,r.Z)(m().mark((function t(){return m().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:case"end":return t.stop()}}),t)}))).bind(this),data:{source:{select:{query:"SELECT TAG,DESIGN_NAME FROM [dbo].[LABEL_DESIGN] WHERE PAGE = '05'"},sql:this.core.sql}},param:this.param.filter({ELEMENT:"cmbDesignList",USERS:this.user.CODE}),access:this.access.filter({ELEMENT:"cmbDesignList",USERS:this.user.CODE})})),p.createElement(x.Item,null,p.createElement(x.Label,{text:this.t("popDesign.lang"),alignment:"right"}),p.createElement(R.ZP,{simple:!0,parent:this,id:"cmbDesignLang",notRefresh:!0,displayExpr:"VALUE",valueExpr:"ID",value:"",searchEnabled:!0,onValueChanged:(0,r.Z)(m().mark((function t(){return m().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:case"end":return t.stop()}}),t)}))).bind(this),data:{source:[{ID:"FR",VALUE:"FR"},{ID:"TR",VALUE:"TR"}]}})),p.createElement(x.Item,null,p.createElement("div",{className:"row"},p.createElement("div",{className:"col-6"},p.createElement(P.Z,{text:this.lang.t("btnPrint"),type:"normal",stylingMode:"contained",width:"100%",onClick:(0,r.Z)(m().mark((function t(){var e,a;return m().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return e={query:"SELECT *,ISNULL((SELECT TOP 1 PATH FROM LABEL_DESIGN WHERE TAG = @DESIGN),'') AS PATH FROM  [dbo].[FN_DOC_ITEMS_FOR_PRINT](@DOC_GUID) ORDER BY LINE_NO ",param:["DOC_GUID:string|50","DESIGN:string|25"],value:[n.docObj.dt()[0].GUID,n.cmbDesignList.value]},t.next=3,n.core.sql.execute(e);case 3:a=t.sent,console.log(JSON.stringify(a.result.recordset[0])),n.core.socket.emit("devprint","{TYPE:'REVIEW',PATH:'"+a.result.recordset[0].PATH.replaceAll("\\","/")+"',DATA:"+JSON.stringify(a.result.recordset)+"}",(function(t){if("ERR"!=t.split("|")[0]){var e=window.open("printview.html","_blank","width=900,height=1000,left=500");e.onload=function(){e.document.getElementById("view").innerHTML="<iframe src='data:application/pdf;base64,"+t.split("|")[1]+"' type='application/pdf' width='100%' height='100%'></iframe>"}}})),n.popDesign.hide();case 7:case"end":return t.stop()}}),t)})))})),p.createElement("div",{className:"col-6"},p.createElement(P.Z,{text:this.lang.t("btnCancel"),type:"normal",stylingMode:"contained",width:"100%",onClick:function(){n.popDesign.hide()}}))))))),p.createElement(N.Z,{id:"pg_txtBarcode",parent:this,container:"#root",visible:!1,position:{of:"#root"},showTitle:!0,showBorders:!0,width:"90%",height:"90%",title:this.t("pg_txtBarcode.title"),search:!0,data:{source:{select:{query:"SELECT ITEMS_VW_01.GUID,CODE,NAME,VAT,COST_PRICE,ITEM_BARCODE_VW_01.BARCODE AS BARCODE FROM ITEMS_VW_01 INNER JOIN ITEM_BARCODE_VW_01 ON ITEMS_VW_01.GUID = ITEM_BARCODE_VW_01.ITEM_GUID WHERE ITEM_BARCODE_VW_01.BARCODE LIKE '%'+ @BARCODE ORDER BY ITEM_BARCODE_VW_01.CDATE DESC",param:["BARCODE:string|50"]},sql:this.core.sql}}},p.createElement(A.sg,{dataField:"BARCODE",caption:this.t("pg_txtBarcode.clmBarcode"),width:150}),p.createElement(A.sg,{dataField:"CODE",caption:this.t("pg_txtBarcode.clmCode"),width:150}),p.createElement(A.sg,{dataField:"NAME",caption:this.t("pg_txtBarcode.clmName"),width:300,defaultSortOrder:"asc"}))))}}]),L}(p.PureComponent)}}]);