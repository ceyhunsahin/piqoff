"use strict";(self.webpackChunkwww=self.webpackChunkwww||[]).push([[5246],{90428:(t,e,n)=>{n.d(e,{ZP:()=>m});var r=n(15671),i=n(43144),o=n(97326),a=n(60136),s=n(82963),c=n(61120),d=n(67294),l=n(14140),u=n.n(l),h=n(20819),p=n(30381),E=n.n(p);var m=function(t){(0,a.Z)(h,t);var e,n,l=(e=h,n=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}(),function(){var t,r=(0,c.Z)(e);if(n){var i=(0,c.Z)(this).constructor;t=Reflect.construct(r,arguments,i)}else t=r.apply(this,arguments);return(0,s.Z)(this,t)});function h(t){var e;return(0,r.Z)(this,h),(e=l.call(this,t)).state.value=void 0===t.param?new Date(0):new Date(t.param.getValue().toString()),e.state.title=void 0===t.title?"":t.title,e.state.titleAlign=void 0===t.titleAlign?"left":t.titleAlign,e.state.showClearButton=void 0!==t.showClearButton&&t.showClearButton,e.state.pickerType=void 0===t.pickerType?"calendar":t.pickerType,e.state.type=void 0===t.type?"date":t.type,e.state.editorOptions=void 0===t.editorOptions?void 0:t.editorOptions,e._onValueChanged=e._onValueChanged.bind((0,o.Z)(e)),e._onEnterKey=e._onEnterKey.bind((0,o.Z)(e)),e}return(0,i.Z)(h,[{key:"_onValueChanged",value:function(t){this.value=t.value,void 0!==this.props.onValueChanged&&this.props.onValueChanged()}},{key:"_onEnterKey",value:function(){void 0!==this.props.onEnterKey&&this.props.onEnterKey()}},{key:"_dateView",value:function(){return d.createElement(u(),{id:this.props.id,showClearButton:this.state.showClearButton,pickerType:this.state.pickerType,height:"fit-content",valueChangeEvent:"keyup",value:"1970-01-01"==E()(this.state.value).format("YYYY-MM-DD")?null:E()(this.state.value),disabled:this.state.editable,type:this.state.type,dateSerializationFormat:"yyyy-MM-dd HH:mm",editorOptions:this.state.editorOptions,onEnterKey:this._onEnterKey,onValueChanged:this._onValueChanged},this.props.children,this.validationView())}},{key:"value",get:function(){return null==this.state.value?new Date(0):this.state.value},set:function(t){var e=this;if(void 0!==t&&null!=t||(t="1970-01-01"),void 0!==this.props.dt&&void 0!==this.props.dt.data&&this.props.dt.data.length>0&&void 0!==this.props.dt.field)if(void 0===this.props.dt.filter)void 0!==this.props.dt.row&&void 0!==this.props.dt.data.find((function(t){return t===e.props.dt.row}))?this.props.dt.data.find((function(t){return t===e.props.dt.row}))[this.props.dt.field]=t:this.props.dt.data[this.props.dt.data.length-1][this.props.dt.field]=t;else{var n=this.props.dt.data.where(this.props.dt.filter);n.length>0&&(void 0!==this.props.dt.row&&void 0!==n.find((function(t){return t===e.props.dt.row}))?n.find((function(t){return t===e.props.dt.row}))[this.props.dt.field]=t:n[n.length-1][this.props.dt.field]=t)}this.setState({value:t})}},{key:"render",value:function(){return 0==this.state.visible?d.createElement("div",null):void 0!==this.props.simple&&this.props.simple?this._dateView():void 0===this.state.title?d.createElement("div",{className:"dx-field"},this._dateView()):void 0===this.state.titleAlign?d.createElement("div",{className:"dx-field"},d.createElement("div",{className:"dx-field-label",style:{textAlign:"right"}},this.state.title),this._dateView()):"top"==this.state.titleAlign?d.createElement("div",{className:"dx-field"},d.createElement("div",null,this.state.title),this._dateView()):"bottom"==this.state.titleAlign?d.createElement("div",{className:"dx-field"},this._dateView(),d.createElement("div",null,this.state.option.title)):"left"==this.state.titleAlign?d.createElement("div",{className:"dx-field"},d.createElement("div",{className:"dx-field-label",style:{textAlign:"right"}},this.state.title),this._dateView()):"right"==this.state.titleAlign?d.createElement("div",{className:"dx-field"},this._dateView(),d.createElement("div",{className:"dx-field-label",style:{float:"right",paddingLeft:"15px"}},this.state.title)):void 0}}]),h}(h.ZP)},5083:(t,e,n)=>{n.d(e,{ZP:()=>h});var r=n(15671),i=n(43144),o=n(97326),a=n(60136),s=n(82963),c=n(61120),d=n(67294),l=n(67497),u=n(20819);n(17276);var h=function(t){(0,a.Z)(h,t);var e,n,u=(e=h,n=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}(),function(){var t,r=(0,c.Z)(e);if(n){var i=(0,c.Z)(this).constructor;t=Reflect.construct(r,arguments,i)}else t=r.apply(this,arguments);return(0,s.Z)(this,t)});function h(t){var e;return(0,r.Z)(this,h),(e=u.call(this,t)).dev=null,e.state.value=void 0!==t.value?t.value:0,e.state.title=void 0===t.title?"":t.title,e.state.titleAlign=void 0===t.titleAlign?"left":t.titleAlign,e.state.showClearButton=void 0!==t.showClearButton&&t.showClearButton,e.state.readOnly=void 0!==t.readOnly&&t.readOnly,e._onInitialized=e._onInitialized.bind((0,o.Z)(e)),e._onValueChanged=e._onValueChanged.bind((0,o.Z)(e)),e._onEnterKey=e._onEnterKey.bind((0,o.Z)(e)),e._onFocusIn=e._onFocusIn.bind((0,o.Z)(e)),e._onFocusOut=e._onFocusOut.bind((0,o.Z)(e)),e._onChange=e._onChange.bind((0,o.Z)(e)),e}return(0,i.Z)(h,[{key:"_onInitialized",value:function(t){this.dev=t.component}},{key:"_onValueChanged",value:function(t){this.value=t.value,void 0!==this.props.onValueChanged&&this.props.onValueChanged(t)}},{key:"_onEnterKey",value:function(){void 0!==this.props.onEnterKey&&this.props.onEnterKey()}},{key:"_onFocusIn",value:function(t){void 0!==this.props.selectAll&&1!=this.props.selectAll||this.dev.element().getElementsByTagName("input")[1].select(),void 0!==this.props.onFocusIn&&this.props.onFocusIn(t)}},{key:"_onFocusOut",value:function(){void 0!==this.props.onFocusOut&&this.props.onFocusOut()}},{key:"_onChange",value:function(){void 0!==this.props.onChange&&this.props.onChange()}},{key:"_txtView",value:function(){return d.createElement(l.NumberBox,{showClearButton:this.state.showClearButton,height:"fit-content",elementAttr:this.props.elementAttr,style:this.props.style,valueChangeEvent:"keyup",onValueChanged:this._onValueChanged,onEnterKey:this._onEnterKey,onFocusIn:this._onFocusIn,onFocusOut:this._onFocusOut,onChange:this._onChange,value:this.state.value,readOnly:this.state.readOnly,onInitialized:this._onInitialized,disabled:void 0===this.props.editable?this.state.editable:this.props.editable,showSpinButtons:this.props.showSpinButtons,step:this.props.step,format:this.props.format},this.props.children,this.validationView())}},{key:"value",get:function(){return this.state.value},set:function(t){var e=this;if(void 0!==t){if(void 0!==this.props.dt&&void 0!==this.props.dt.data&&this.props.dt.data.length>0&&void 0!==this.props.dt.field)if(void 0===this.props.dt.filter)void 0!==this.props.dt.row&&void 0!==this.props.dt.data.find((function(t){return t===e.props.dt.row}))?this.props.dt.data.find((function(t){return t===e.props.dt.row}))[this.props.dt.field]=t:this.props.dt.data[this.props.dt.data.length-1][this.props.dt.field]=t;else{var n=this.props.dt.data.where(this.props.dt.filter);n.length>0&&(void 0!==this.props.dt.row&&void 0!==n.find((function(t){return t===e.props.dt.row}))?n.find((function(t){return t===e.props.dt.row}))[this.props.dt.field]=t:n[n.length-1][this.props.dt.field]=t)}this.setState({value:t})}}},{key:"readOnly",get:function(){return this.state.readOnly},set:function(t){this.setState({readOnly:t})}},{key:"focus",value:function(){this.dev.focus()}},{key:"render",value:function(){return 0==this.state.visible?d.createElement("div",null):void 0!==this.props.simple&&this.props.simple?this._txtView():""==this.state.title?d.createElement("div",{className:"dx-field"},this._txtView()):void 0===this.state.titleAlign?d.createElement("div",{className:"dx-field"},d.createElement("div",{className:"dx-field-label",style:{textAlign:"right"}},this.state.title),this._txtView()):"top"==this.state.titleAlign?d.createElement("div",{className:"dx-field"},d.createElement("div",null,this.state.title),this._txtView()):"bottom"==this.state.titleAlign?d.createElement("div",{className:"dx-field"},this._txtView(),d.createElement("div",null,this.state.option.title)):"left"==this.state.titleAlign?d.createElement("div",{className:"dx-field"},d.createElement("div",{className:"dx-field-label",style:{textAlign:"right"}},this.state.title),this._txtView()):"right"==this.state.titleAlign?d.createElement("div",{className:"dx-field"},this._txtView(),d.createElement("div",{className:"dx-field-label",style:{float:"right",paddingLeft:"15px"}},this.state.title)):void 0}}]),h}(u.ZP)},51559:(t,e,n)=>{n.d(e,{ZP:()=>m});var r=n(15861),i=n(15671),o=n(43144),a=n(97326),s=n(60136),c=n(82963),d=n(61120),l=n(64687),u=n.n(l),h=n(67294),p=n(11694),E=n.n(p);var m=function(t){(0,s.Z)(m,t);var e,n,l,p=(n=m,l=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}(),function(){var t,e=(0,d.Z)(n);if(l){var r=(0,d.Z)(this).constructor;t=Reflect.construct(e,arguments,r)}else t=e.apply(this,arguments);return(0,c.Z)(this,t)});function m(t){var e;return(0,i.Z)(this,m),(e=p.call(this,t)).dev=null,e.state.value=void 0!==t.value?t.value:"",e.state.placeholder=void 0===t.placeholder?"":t.placeholder,e._onInitialized=e._onInitialized.bind((0,a.Z)(e)),e._onValueChanged=e._onValueChanged.bind((0,a.Z)(e)),e}return(0,o.Z)(m,[{key:"_onInitialized",value:function(t){this.dev=t.component}},{key:"_TagBoxView",value:function(){return h.createElement(E(),{id:this.props.id,items:[],acceptCustomValue:!0,onValueChanged:this._onValueChanged,placeholder:this.state.placeholder,openOnFieldClick:!1,showClearButton:!0,maxFilterQueryLength:1e4,noDataText:""},this.props.children,this.validationView())}},{key:"_onValueChanged",value:function(t){this.value=t.value,void 0!==this.props.onValueChanged&&this.props.onValueChanged(t)}},{key:"value",get:function(){return this.state.value},set:function(t){var e=this;if(void 0!==t){if(void 0!==this.props.dt&&void 0!==this.props.dt.data&&this.props.dt.data.length>0&&void 0!==this.props.dt.field)if(void 0===this.props.dt.filter)void 0!==this.props.dt.row&&void 0!==this.props.dt.data.find((function(t){return t===e.props.dt.row}))?(this.props.dt.data.find((function(t){return t===e.props.dt.row}))[this.props.dt.field]=t,void 0!==this.props.dt.display&&(this.props.dt.data.find((function(t){return t===e.props.dt.row}))[this.props.dt.display]=this.displayValue)):(this.props.dt.data[this.props.dt.data.length-1][this.props.dt.field]=t,void 0!==this.props.dt.display&&(this.props.dt.data[this.props.dt.data.length-1][this.props.dt.display]=this.displayValue));else{var n=this.props.dt.data.where(this.props.dt.filter);n.length>0&&(void 0!==this.props.dt.row&&void 0!==n.find((function(t){return t===e.props.dt.row}))?(n.find((function(t){return t===e.props.dt.row}))[this.props.dt.field]=t,void 0!==this.props.dt.display&&(n.find((function(t){return t===e.props.dt.row}))[this.props.dt.display]=this.displayValue)):(n[n.length-1][this.props.dt.field]=t,void 0!==this.props.dt.display&&(n[n.length-1][this.props.dt.display]=this.displayValue)))}this.setState({value:null==t?"":t})}}},{key:"displayValue",get:function(){return this.dev.option("displayValue")}},{key:"componentDidMount",value:(e=(0,r.Z)(u().mark((function t(){return u().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(void 0===this.state.data){t.next=3;break}return t.next=3,this.dataRefresh(this.state.data);case 3:case"end":return t.stop()}}),t,this)}))),function(){return e.apply(this,arguments)})},{key:"render",value:function(){return void 0!==this.props.simple&&this.props.simple?this._TagBoxView():h.createElement("div",{className:"dx-field"},h.createElement("div",{className:"dx-field-label"},void 0===this.props.title?"":this.props.title),h.createElement("div",{className:"dx-field-value"},this._TagBoxView()))}}]),m}(n(20819).ZP)},5246:(t,e,n)=>{n.r(e),n.d(e,{default:()=>V});var r=n(71002),i=n(4942),o=n(15861),a=n(15671),s=n(43144),c=n(97326),d=n(60136),l=n(82963),u=n(61120),h=n(64687),p=n.n(h),E=n(67294),m=n(73364),O=n(4598),f=(n(30381),n(42866)),b=n.n(f),g=n(53221),T=n.n(g),x=n(25552),C=n.n(x),D=n(65580),v=n.n(D),I=(n(91686),n(30886)),w=n(99846),_=n(5083),R=n(99077),y=n(55585),N=n(417),U=n(32175),A=n(18405),S=n(73682),P=n(90428),k=n(51559),j=n(60547),M=n(17276);function F(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,r)}return n}function L(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?F(Object(n),!0).forEach((function(e){(0,i.Z)(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):F(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}n(51166);var V=function(t){(0,d.Z)(K,t);var e,n,i,h,f,g,D,F,V,Z,B,G,Y,W,z,Q,q=(z=K,Q=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}(),function(){var t,e=(0,u.Z)(z);if(Q){var n=(0,u.Z)(this).constructor;t=Reflect.construct(e,arguments,n)}else t=e.apply(this,arguments);return(0,l.Z)(this,t)});function K(t){var e;return(0,a.Z)(this,K),(e=q.call(this,t)).core=m.Z.instance.core,e.prmObj=e.param.filter({TYPE:1,USERS:e.user.CODE}),e.acsobj=e.access.filter({TYPE:1,USERS:e.user.CODE}),e.docObj=new O.Ch,e._cellRoleRender=e._cellRoleRender.bind((0,c.Z)(e)),e._calculateTotal=e._calculateTotal.bind((0,c.Z)(e)),e._calculateTotalMargin=e._calculateTotalMargin.bind((0,c.Z)(e)),e._calculateMargin=e._calculateMargin.bind((0,c.Z)(e)),e._getBarcodes=e._getBarcodes.bind((0,c.Z)(e)),e.frmdocOrders=void 0,e.docLocked=!1,e.combineControl=!0,e.combineNew=!1,e.tabIndex=t.data.tabkey,e.multiItemData=new M.$A,e.rightItems=[{text:e.t("getOffers")}],e}return(0,s.Z)(K,[{key:"componentDidMount",value:(W=(0,o.Z)(p().mark((function t(){return p().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,this.core.util.waitUntil(0);case 2:this.init(),void 0!==this.pagePrm&&this.getDoc(this.pagePrm.GUID,"",0);case 4:case"end":return t.stop()}}),t,this)}))),function(){return W.apply(this,arguments)})},{key:"init",value:(Y=(0,o.Z)(p().mark((function t(){var e,n=this;return p().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return this.docObj.clearAll(),this.docObj.ds.on("onAddRow",(function(t,e){"new"==e.stat&&(n.btnNew.setState({disabled:!1}),n.btnBack.setState({disabled:!1}),n.btnNew.setState({disabled:!1}),n.btnBack.setState({disabled:!0}),n.btnSave.setState({disabled:!1}),n.btnDelete.setState({disabled:!1}),n.btnPrint.setState({disabled:!1}))})),this.docObj.ds.on("onEdit",(function(t,e){"edit"==e.rowData.stat&&(n.btnBack.setState({disabled:!1}),n.btnNew.setState({disabled:!1}),n.btnSave.setState({disabled:!1}),n.btnDelete.setState({disabled:!1}),n.btnPrint.setState({disabled:!1}),e.rowData.CUSER=n.user.CODE)})),this.docObj.ds.on("onRefresh",(function(t){n.btnBack.setState({disabled:!0}),n.btnNew.setState({disabled:!1}),n.btnSave.setState({disabled:!0}),n.btnDelete.setState({disabled:!1}),n.btnPrint.setState({disabled:!1})})),this.docObj.ds.on("onDelete",(function(t){n.btnBack.setState({disabled:!1}),n.btnNew.setState({disabled:!1}),n.btnSave.setState({disabled:!1}),n.btnDelete.setState({disabled:!1}),n.btnPrint.setState({disabled:!1})})),(e=L({},this.docObj.empty)).TYPE=1,e.DOC_TYPE=60,this.docObj.addEmpty(e),this.txtRef.readOnly=!1,this.txtRefno.readOnly=!1,this.docLocked=!1,this.frmdocOrders.option("disabled",!0),t.next=15,this.grdSlsOrder.dataRefresh({source:this.docObj.docOrders.dt("DOC_ORDERS")});case 15:return t.next=17,this.grdMultiItem.dataRefresh({source:this.multiItemData});case 17:case"end":return t.stop()}}),t,this)}))),function(){return Y.apply(this,arguments)})},{key:"getDoc",value:(G=(0,o.Z)(p().mark((function t(e,n,r){var i;return p().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return console.log(e),this.docObj.clearAll(),m.Z.instance.setState({isExecute:!0}),t.next=5,this.docObj.load({GUID:e,REF:n,REF_NO:r,TYPE:1,DOC_TYPE:60});case 5:if(m.Z.instance.setState({isExecute:!1}),this._calculateMargin(),this._calculateTotalMargin(),this.txtRef.readOnly=!0,this.txtRefno.readOnly=!0,0==this.docObj.dt()[0].LOCKED){t.next=18;break}return this.docLocked=!0,i={id:"msgGetLocked",showTitle:!0,title:this.t("msgGetLocked.title"),showCloseButton:!0,width:"500px",height:"200px",button:[{id:"btn01",caption:this.t("msgGetLocked.btn01"),location:"after"}],content:E.createElement("div",{style:{textAlign:"center",fontSize:"20px"}},this.t("msgGetLocked.msg"))},t.next=15,(0,j.W)(i);case 15:this.frmdocOrders.option("disabled",!0),t.next=20;break;case 18:this.docLocked=!1,this.frmdocOrders.option("disabled",!1);case 20:case"end":return t.stop()}}),t,this)}))),function(t,e,n){return G.apply(this,arguments)})},{key:"checkDoc",value:(B=(0,o.Z)(p().mark((function t(e,n,r){var i=this;return p().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",new Promise(function(){var t=(0,o.Z)(p().mark((function t(o){var a;return p().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(""===n){t.next=15;break}return t.next=3,(new O.Ch).load({GUID:e,REF:n,REF_NO:r});case 3:if(!(t.sent.length>0)){t.next=12;break}return a={id:"msgCode",showTitle:!0,title:"Dikkat",showCloseButton:!0,width:"500px",height:"200px",button:[{id:"btn01",caption:"Evrağa Git",location:"before"}],content:E.createElement("div",{style:{textAlign:"center",fontSize:"20px"}},"Evrak Bulundu")},t.next=8,(0,j.W)(a);case 8:"btn01"==t.sent?(i.getDoc(e,n,r),o(2)):o(3),t.next=13;break;case 12:o(1);case 13:t.next=16;break;case 15:o(0);case 16:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()));case 1:case"end":return t.stop()}}),t)}))),function(t,e,n){return B.apply(this,arguments)})},{key:"_calculateTotal",value:(Z=(0,o.Z)(p().mark((function t(){return p().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:this.docObj.dt()[0].AMOUNT=this.docObj.docOrders.dt().sum("AMOUNT",2),this.docObj.dt()[0].DISCOUNT=this.docObj.docOrders.dt().sum("DISCOUNT",2),this.docObj.dt()[0].VAT=this.docObj.docOrders.dt().sum("VAT",2),this.docObj.dt()[0].TOTAL=this.docObj.docOrders.dt().sum("TOTAL",2),this._calculateTotalMargin();case 5:case"end":return t.stop()}}),t,this)}))),function(){return Z.apply(this,arguments)})},{key:"_calculateTotalMargin",value:(V=(0,o.Z)(p().mark((function t(){var e,n,r,i;return p().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:for(e=0,n=0;n<this.docObj.docOrders.dt().length;n++)e+=this.docObj.docOrders.dt()[n].COST_PRICE*this.docObj.docOrders.dt()[n].QUANTITY;r=this.docObj.dt()[0].TOTAL-this.docObj.dt()[0].VAT-e,i=100*(this.docObj.dt()[0].TOTAL-this.docObj.dt()[0].VAT-e-(this.docObj.dt()[0].TOTAL-this.docObj.dt()[0].VAT)),this.docObj.dt()[0].MARGIN=r.toFixed(2)+"€ / %"+i.toFixed(2);case 5:case"end":return t.stop()}}),t,this)}))),function(){return V.apply(this,arguments)})},{key:"_calculateMargin",value:(F=(0,o.Z)(p().mark((function t(){var e,n,r;return p().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:for(e=0;e<this.docObj.docOrders.dt().length;e++)n=this.docObj.docOrders.dt()[e].TOTAL-this.docObj.docOrders.dt()[e].VAT-this.docObj.docOrders.dt()[e].COST_PRICE*this.docObj.docOrders.dt()[e].QUANTITY,r=n/(this.docObj.docOrders.dt()[e].TOTAL-this.docObj.docOrders.dt()[e].VAT)*100,this.docObj.docOrders.dt()[e].MARGIN=n.toFixed(2)+"€ / %"+r.toFixed(2);case 1:case"end":return t.stop()}}),t,this)}))),function(){return F.apply(this,arguments)})},{key:"_getBarcodes",value:(D=(0,o.Z)(p().mark((function t(){var e;return p().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:e={source:{select:{query:"SELECT ITEMS_VW_01.GUID,CODE,NAME,COST_PRICE,VAT,BARCODE,ISNULL((SELECT TOP 1 CODE FROM ITEM_MULTICODE WHERE ITEM_MULTICODE.ITEM = ITEMS_VW_01.GUID AND ITEM_MULTICODE.CUSTOMER = '"+this.docObj.dt()[0].INPUT+"' AND DELETED = 0 ORDER BY LDATE DESC),'') AS MULTICODE,  ISNULL((SELECT TOP 1 CUSTOMER_NAME FROM ITEM_MULTICODE_VW_01 WHERE ITEM_MULTICODE_VW_01.ITEM_GUID = ITEMS_VW_01.GUID ORDER BY LDATE DESC),'') AS CUSTOMER_NAME  FROM ITEMS_VW_01 INNER JOIN ITEM_BARCODE_VW_01 ON ITEMS_VW_01.GUID = ITEM_BARCODE_VW_01.ITEM_GUID WHERE  ITEM_BARCODE_VW_01.BARCODE LIKE  '%' +@BARCODE",param:["BARCODE:string|50"]},sql:this.core.sql}},this.pg_txtBarcode.setSource(e);case 2:case"end":return t.stop()}}),t,this)}))),function(){return D.apply(this,arguments)})},{key:"_cellRoleRender",value:function(t){var e=this;if("ITEM_CODE"==t.column.dataField)return E.createElement(w.ZP,{id:"txtGrdItemsCode"+t.rowIndex,parent:this,simple:!0,upper:this.sysParam.filter({ID:"onlyBigChar",USERS:this.user.CODE}).getValue().value,value:t.value,onKeyDown:function(){var n=(0,o.Z)(p().mark((function n(r){return p().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if("F10"!=r.event.key&&"ArrowRight"!=r.event.key){n.next=4;break}return n.next=3,e.pg_txtItemsCode.setVal(t.value);case 3:e.pg_txtItemsCode.onClick=function(){var n=(0,o.Z)(p().mark((function n(r){var i,o;return p().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(e.combineControl=!0,e.combineNew=!1,!(r.length>0)){n.next=36;break}if(1!=r.length){n.next=8;break}return n.next=6,e.addItem(r[0],t.rowIndex);case 6:n.next=36;break;case 8:if(!(r.length>1)){n.next=36;break}i=0;case 10:if(!(i<r.length)){n.next=36;break}if(0!=i){n.next=16;break}return n.next=14,e.addItem(r[i],t.rowIndex);case 14:n.next=33;break;case 16:return(o=L({},e.docObj.docOrders.empty)).DOC_GUID=e.docObj.dt()[0].GUID,o.TYPE=e.docObj.dt()[0].TYPE,o.DOC_TYPE=e.docObj.dt()[0].DOC_TYPE,o.LINE_NO=e.docObj.docOrders.dt().length,o.REF=e.docObj.dt()[0].REF,o.REF_NO=e.docObj.dt()[0].REF_NO,o.OUTPUT=e.docObj.dt()[0].OUTPUT,o.INPUT=e.docObj.dt()[0].INPUT,o.DOC_DATE=e.docObj.dt()[0].DOC_DATE,e.txtRef.readOnly=!0,e.txtRefno.readOnly=!0,e.docObj.docOrders.addEmpty(o),n.next=31,e.core.util.waitUntil(100);case 31:return n.next=33,e.addItem(r[i],e.docObj.docOrders.dt().length-1);case 33:i++,n.next=10;break;case 36:case"end":return n.stop()}}),n)})));return function(t){return n.apply(this,arguments)}}();case 4:case"end":return n.stop()}}),n)})));return function(t){return n.apply(this,arguments)}}(),onValueChanged:function(e){t.value=e.value},onChange:function(){var n=(0,o.Z)(p().mark((function n(r){var i,o,a;return p().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(void 0!==r.event.isTrusted){n.next=15;break}return i={query:"SELECT ITEMS_VW_01.GUID,CODE,NAME,VAT,COST_PRICE FROM ITEMS_VW_01 INNER JOIN ITEM_BARCODE_VW_01 ON ITEMS_VW_01.GUID = ITEM_BARCODE_VW_01.ITEM_GUID WHERE CODE = @CODE OR ITEM_BARCODE_VW_01.BARCODE = @CODE",param:["CODE:string|50"],value:[r.component._changedValue]},n.next=4,e.core.sql.execute(i);case 4:if(!((o=n.sent).result.recordset.length>0)){n.next=12;break}return e.combineControl=!0,e.combineNew=!1,n.next=10,e.addItem(o.result.recordset[0],t.rowIndex);case 10:n.next=15;break;case 12:return a={id:"msgItemNotFound",showTitle:!0,title:e.t("msgItemNotFound.title"),showCloseButton:!0,width:"500px",height:"200px",button:[{id:"btn01",caption:e.t("msgItemNotFound.btn01"),location:"after"}],content:E.createElement("div",{style:{textAlign:"center",fontSize:"20px"}},e.t("msgItemNotFound.msg"))},n.next=15,(0,j.W)(a);case 15:case"end":return n.stop()}}),n)})));return function(t){return n.apply(this,arguments)}}().bind(this),button:[{id:"01",icon:"more",onClick:function(){e.pg_txtItemsCode.show(),e.pg_txtItemsCode.onClick=function(){var n=(0,o.Z)(p().mark((function n(r){var i,o;return p().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(!(r.length>0)){n.next=36;break}if(e.combineControl=!0,e.combineNew=!1,1!=r.length){n.next=8;break}return n.next=6,e.addItem(r[0],t.rowIndex);case 6:n.next=36;break;case 8:if(!(r.length>1)){n.next=36;break}i=0;case 10:if(!(i<r.length)){n.next=36;break}if(0!=i){n.next=16;break}return n.next=14,e.addItem(r[i],t.rowIndex);case 14:n.next=33;break;case 16:return(o=L({},e.docObj.docOrders.empty)).DOC_GUID=e.docObj.dt()[0].GUID,o.TYPE=e.docObj.dt()[0].TYPE,o.DOC_TYPE=e.docObj.dt()[0].DOC_TYPE,o.LINE_NO=e.docObj.docOrders.dt().length,o.REF=e.docObj.dt()[0].REF,o.REF_NO=e.docObj.dt()[0].REF_NO,o.OUTPUT=e.docObj.dt()[0].OUTPUT,o.INPUT=e.docObj.dt()[0].INPUT,o.DOC_DATE=e.docObj.dt()[0].DOC_DATE,e.txtRef.readOnly=!0,e.txtRefno.readOnly=!0,e.docObj.docOrders.addEmpty(o),n.next=31,e.core.util.waitUntil(100);case 31:return n.next=33,e.addItem(r[i],e.docObj.docOrders.dt().length-1);case 33:i++,n.next=10;break;case 36:case"end":return n.stop()}}),n)})));return function(t){return n.apply(this,arguments)}}()}}]})}},{key:"addItem",value:(g=(0,o.Z)(p().mark((function t(e,n,i){var a,s,c,d,l,u,h,E=this;return p().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:m.Z.instance.setState({isExecute:!0}),void 0===i&&(i=1),a=p().mark((function t(r){var a;return p().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(E.docObj.docOrders.dt()[r].ITEM_CODE!=e.CODE){t.next=19;break}if(1!=E.combineControl){t.next=10;break}return a="",m.Z.instance.setState({isExecute:!1}),t.next=6,E.msgCombineItem.show().then(function(){var t=(0,o.Z)(p().mark((function t(e){return p().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if("btn01"!=e){t.next=11;break}return E.docObj.docOrders.dt()[r].QUANTITY=E.docObj.docOrders.dt()[r].QUANTITY+i,E.docObj.docOrders.dt()[r].VAT=parseFloat((E.docObj.docOrders.dt()[r].VAT+E.docObj.docOrders.dt()[r].PRICE*(E.docObj.docOrders.dt()[r].VAT_RATE/100)*i).toFixed(9)),E.docObj.docOrders.dt()[r].AMOUNT=parseFloat((E.docObj.docOrders.dt()[r].QUANTITY*E.docObj.docOrders.dt()[r].PRICE).toFixed(9)),E.docObj.docOrders.dt()[r].TOTAL=parseFloat((E.docObj.docOrders.dt()[r].QUANTITY*E.docObj.docOrders.dt()[r].PRICE-E.docObj.docOrders.dt()[r].DISCOUNT+E.docObj.docOrders.dt()[r].VAT).toFixed(9)),E._calculateTotal(),t.next=8,E.grdSlsOrder.devGrid.deleteRow(n);case 8:return 1==E.checkCombine.value&&(E.combineControl=!1),a=e,t.abrupt("return");case 11:if("btn02"!=e){t.next=14;break}return 1==E.checkCombine.value&&(E.combineControl=!1,E.combineNew=!0),t.abrupt("return");case 14:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}());case 6:if("btn01"!=a){t.next=8;break}return t.abrupt("return",{v:void 0});case 8:t.next=19;break;case 10:if(0!=E.combineNew){t.next=19;break}return E.docObj.docOrders.dt()[r].QUANTITY=E.docObj.docOrders.dt()[r].QUANTITY+i,E.docObj.docOrders.dt()[r].VAT=parseFloat((E.docObj.docOrders.dt()[r].VAT+E.docObj.docOrders.dt()[r].PRICE*(E.docObj.docOrders.dt()[r].VAT_RATE/100)*i).toFixed(9)),E.docObj.docOrders.dt()[r].AMOUNT=parseFloat((E.docObj.docOrders.dt()[r].QUANTITY*E.docObj.docOrders.dt()[r].PRICE).toFixed(9)),E.docObj.docOrders.dt()[r].TOTAL=parseFloat((E.docObj.docOrders.dt()[r].QUANTITY*E.docObj.docOrders.dt()[r].PRICE-E.docObj.docOrders.dt()[r].DISCOUNT+E.docObj.docOrders.dt()[r].VAT).toFixed(9)),E._calculateTotal(),t.next=18,E.grdSlsOrder.devGrid.deleteRow(n);case 18:return t.abrupt("return",{v:void 0});case 19:case"end":return t.stop()}}),t)})),s=0;case 4:if(!(s<this.docObj.docOrders.dt().length)){t.next=12;break}return t.delegateYield(a(s),"t0",6);case 6:if(c=t.t0,"object"!==(0,r.Z)(c)){t.next=9;break}return t.abrupt("return",c.v);case 9:s++,t.next=4;break;case 12:return this.docObj.docOrders.dt()[n].ITEM_CODE=e.CODE,this.docObj.docOrders.dt()[n].ITEM=e.GUID,this.docObj.docOrders.dt()[n].ITEM_BARCODE=e.BARCODE,this.docObj.docOrders.dt()[n].VAT_RATE=e.VAT,this.docObj.docOrders.dt()[n].ITEM_NAME=e.NAME,this.docObj.docOrders.dt()[n].COST_PRICE=e.COST_PRICE,this.docObj.docOrders.dt()[n].DISCOUNT=0,this.docObj.docOrders.dt()[n].DISCOUNT_RATE=0,this.docObj.docOrders.dt()[n].QUANTITY=i,d={query:"SELECT dbo.FN_PRICE_SALE_VAT_EXT(@GUID,@QUANTITY,GETDATE(),@CUSTOMER) AS PRICE",param:["GUID:string|50","QUANTITY:float","CUSTOMER:string|50"],value:[e.GUID,i,this.docObj.dt()[0].INPUT]},t.next=24,this.core.sql.execute(d);case 24:(l=t.sent).result.recordset.length>0&&(u=l.result.recordset[0].PRICE-this.docObj.docOrders.dt()[n].COST_PRICE,h=100*(l.result.recordset[0].PRICE-this.docObj.docOrders.dt()[n].COST_PRICE-l.result.recordset[0].PRICE),this.docObj.docOrders.dt()[n].MARGIN=u.toFixed(2)+"€ / %"+h.toFixed(2),this.docObj.docOrders.dt()[n].PRICE=parseFloat(l.result.recordset[0].PRICE.toFixed(9)),this.docObj.docOrders.dt()[n].VAT=parseFloat((l.result.recordset[0].PRICE*(e.VAT/100)*i).toFixed(9)),this.docObj.docOrders.dt()[n].AMOUNT=parseFloat((l.result.recordset[0].PRICE*i).toFixed(9)),this.docObj.docOrders.dt()[n].TOTAL=parseFloat((l.result.recordset[0].PRICE*i+this.docObj.docOrders.dt()[n].VAT).toFixed(9)),this._calculateTotal()),m.Z.instance.setState({isExecute:!1});case 27:case"end":return t.stop()}}),t,this)}))),function(t,e,n){return g.apply(this,arguments)})},{key:"multiItemAdd",value:(f=(0,o.Z)(p().mark((function t(){var e,n,r,i,o,a,s,c,d,l;return p().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(e=[],n=0,!(this.multiItemData.length>0)){t.next=8;break}return r={id:"msgMultiData",showTitle:!0,title:this.t("msgMultiData.title"),showCloseButton:!0,width:"500px",height:"200px",button:[{id:"btn01",caption:this.t("msgMultiData.btn01"),location:"before"},{id:"btn02",caption:this.t("msgMultiData.btn02"),location:"after"}],content:E.createElement("div",{style:{textAlign:"center",fontSize:"20px"}},this.t("msgMultiData.msg"))},t.next=6,(0,j.W)(r);case 6:"btn01"==t.sent&&this.multiItemData.clear();case 8:i=0;case 9:if(!(i<this.tagItemCode.value.length)){t.next=27;break}if(0!=this.cmbMultiItemType.value){t.next=18;break}return o={query:"SELECT GUID,CODE,NAME,VAT,1 AS QUANTITY,ISNULL((SELECT TOP 1 MULTICODE FROM ITEM_MULTICODE_VW_01 WHERE ITEM_GUID = ITEMS_VW_01.GUID AND CUSTOMER_GUID = '"+this.docObj.dt()[0].INPUT+"'),'') AS MULTICODE FROM ITEMS_VW_01 WHERE ISNULL((SELECT TOP 1 MULTICODE FROM ITEM_MULTICODE_VW_01 WHERE ITEM_GUID = ITEMS_VW_01.GUID AND CUSTOMER_GUID = '"+this.docObj.dt()[0].INPUT+"'),'') = @VALUE ",param:["VALUE:string|50"],value:[this.tagItemCode.value[i]]},t.next=14,this.core.sql.execute(o);case 14:(a=t.sent).result.recordset.length>0?void 0===this.multiItemData.where({CODE:a.result.recordset[0].CODE})[0]&&(this.multiItemData.push(a.result.recordset[0]),n+=1):e.push("'"+this.tagItemCode.value[i]+"'"),t.next=24;break;case 18:if(1!=this.cmbMultiItemType.value){t.next=24;break}return s={query:"SELECT GUID,CODE,NAME,VAT,1 AS QUANTITY,ISNULL((SELECT TOP 1 MULTICODE FROM ITEM_MULTICODE_VW_01 WHERE ITEM_GUID = ITEMS_VW_01.GUID AND CUSTOMER_GUID = '"+this.docObj.dt()[0].INPUT+"'),'') AS MULTICODE FROM ITEMS_VW_01 WHERE UPPER(CODE) LIKE UPPER(@VALUE) OR UPPER(NAME) LIKE UPPER(@VALUE) ",param:["VALUE:string|50"],value:[this.tagItemCode.value[i]]},t.next=22,this.core.sql.execute(s);case 22:(c=t.sent).result.recordset.length>0?void 0===this.multiItemData.where({CODE:c.result.recordset[0].CODE})[0]&&(this.multiItemData.push(c.result.recordset[0]),n+=1):e.push("'"+this.tagItemCode.value[i]+"'");case 24:i++,t.next=9;break;case 27:if(!(e.length>0)){t.next=31;break}return d={id:"msgMissItemCode",showTitle:!0,title:this.t("msgMissItemCode.title"),showCloseButton:!0,width:"500px",height:"auto",button:[{id:"btn01",caption:this.t("msgMissItemCode.btn01"),location:"after"}],content:E.createElement("div",{style:{textAlign:"center",wordWrap:"break-word",fontSize:"20px"}},this.t("msgMissItemCode.msg")+" "+e)},t.next=31,(0,j.W)(d);case 31:return l={id:"msgMultiCodeCount",showTitle:!0,title:this.t("msgMultiCodeCount.title"),showCloseButton:!0,width:"500px",height:"200px",button:[{id:"btn01",caption:this.t("msgMultiCodeCount.btn01"),location:"after"}],content:E.createElement("div",{style:{textAlign:"center",fontSize:"20px"}},this.t("msgMultiCodeCount.msg")+" "+n)},t.next=34,(0,j.W)(l);case 34:case"end":return t.stop()}}),t,this)}))),function(){return f.apply(this,arguments)})},{key:"multiItemSave",value:(h=(0,o.Z)(p().mark((function t(){var e,n;return p().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:this.combineControl=!0,this.combineNew=!1,e=0;case 3:if(!(e<this.multiItemData.length)){t.next=25;break}return(n=L({},this.docObj.docOrders.empty)).DOC_GUID=this.docObj.dt()[0].GUID,n.TYPE=this.docObj.dt()[0].TYPE,n.DOC_TYPE=this.docObj.dt()[0].DOC_TYPE,n.LINE_NO=this.docObj.docOrders.dt().length,n.REF=this.docObj.dt()[0].REF,n.REF_NO=this.docObj.dt()[0].REF_NO,n.OUTPUT=this.docObj.dt()[0].OUTPUT,n.INPUT=this.docObj.dt()[0].INPUT,n.DOC_DATE=this.docObj.dt()[0].DOC_DATE,this.txtRef.readOnly=!0,this.txtRefno.readOnly=!0,this.docObj.docOrders.addEmpty(n),t.next=19,this.core.util.waitUntil(100);case 19:return t.next=21,this.addItem(this.multiItemData[e],this.docObj.docOrders.dt().length-1,this.multiItemData[e].QUANTITY);case 21:this.popMultiItem.hide();case 22:e++,t.next=3;break;case 25:case"end":return t.stop()}}),t,this)}))),function(){return h.apply(this,arguments)})},{key:"checkRow",value:(i=(0,o.Z)(p().mark((function t(){var e;return p().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:for(e=0;e<this.docObj.docOrders.dt().length;e++)this.docObj.docOrders.dt()[e].INPUT=this.docObj.dt()[0].INPUT,this.docObj.docOrders.dt()[e].OUTPUT=this.docObj.dt()[0].OUTPUT,this.docObj.docOrders.dt()[e].DOC_DATE=this.docObj.dt()[0].DOC_DATE;case 1:case"end":return t.stop()}}),t,this)}))),function(){return i.apply(this,arguments)})},{key:"_getOffers",value:(n=(0,o.Z)(p().mark((function t(){var e,n,r,i=this;return p().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(""!=this.docObj.dt()[0].INPUT&&"00000000-0000-0000-0000-000000000000"!=this.docObj.dt()[0].INPUT){t.next=7;break}return e={id:"msgCustomerSelect",showTitle:!0,title:this.t("msgCustomerSelect.title"),showCloseButton:!0,width:"500px",height:"200px",button:[{id:"btn01",caption:this.t("msgCustomerSelect.btn01"),location:"after"}],content:E.createElement("div",{style:{textAlign:"center",fontSize:"20px"}},this.t("msgCustomerSelect.msg"))},t.next=4,(0,j.W)(e);case 4:return t.abrupt("return");case 7:return n={query:"SELECT *,REF + '-' + CONVERT(VARCHAR,REF_NO) AS REFERANS FROM DOC_OFFERS_VW_01 WHERE INPUT = @INPUT AND ORDER_GUID = '00000000-0000-0000-0000-000000000000' AND TYPE = 1 AND DOC_TYPE IN(61)",param:["INPUT:string|50"],value:[this.docObj.dt()[0].INPUT]},t.next=10,this.core.sql.execute(n);case 10:if(!((r=t.sent).result.recordset.length>0)){t.next=16;break}return t.next=14,this.pg_offersGrid.setData(r.result.recordset);case 14:t.next=18;break;case 16:return t.next=18,this.pg_offersGrid.setData([]);case 18:this.pg_offersGrid.show(),this.pg_offersGrid.onClick=function(){var t=(0,o.Z)(p().mark((function t(e){var n,r;return p().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:m.Z.instance.setState({isExecute:!0}),n=0;case 2:if(!(n<e.length)){t.next=39;break}return(r=L({},i.docObj.docOrders.empty)).DOC_GUID=i.docObj.dt()[0].GUID,r.TYPE=i.docObj.dt()[0].TYPE,r.DOC_TYPE=i.docObj.dt()[0].DOC_TYPE,r.LINE_NO=e[n].LINE_NO,r.REF=i.docObj.dt()[0].REF,r.REF_NO=i.docObj.dt()[0].REF_NO,r.DOC_DATE=i.docObj.dt()[0].DOC_DATE,r.INPUT=i.docObj.dt()[0].INPUT,r.INPUT_CODE=i.docObj.dt()[0].INPUT_CODE,r.INPUT_NAME=i.docObj.dt()[0].INPUT_NAME,r.OUTPUT=i.docObj.dt()[0].OUTPUT,r.OUTPUT_CODE=i.docObj.dt()[0].OUTPUT_CODE,r.OUTPUT_NAME=i.docObj.dt()[0].OUTPUT_NAME,r.ITEM=e[n].ITEM,r.ITEM_CODE=e[n].ITEM_CODE,r.ITEM_NAME=e[n].ITEM_NAME,r.PRICE=e[n].PRICE,r.QUANTITY=e[n].QUANTITY,r.VAT=e[n].VAT,r.AMOUNT=e[n].AMOUNT,r.TOTAL=e[n].TOTAL,r.DESCRIPTION=e[n].DESCRIPTION,r.VAT_RATE=e[n].VAT_RATE,r.DISCOUNT_RATE=e[n].DISCOUNT_RATE,r.MULTICODE=e[n].MULTICODE,r.ITEM_BARCODE=e[n].ITEM_BARCODE,r.OFFER_GUID=e[n].GUID,r.OFFER_REF=e[n].REF+"-"+e[n].REF_NO,t.next=34,i.docObj.docOrders.addEmpty(r);case 34:return t.next=36,i.core.util.waitUntil(100);case 36:n++,t.next=2;break;case 39:i._calculateTotal(),m.Z.instance.setState({isExecute:!1});case 41:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}();case 20:case"end":return t.stop()}}),t,this)}))),function(){return n.apply(this,arguments)})},{key:"getDocs",value:(e=(0,o.Z)(p().mark((function t(e){var n,r,i,o=this;return p().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n=0==e?{query:"SELECT GUID,REF,REF_NO,INPUT_CODE,INPUT_NAME,DOC_DATE_CONVERT FROM DOC_VW_01 WHERE TYPE = 1 AND DOC_TYPE = 60 AND REBATE = 0  AND DOC_DATE > GETDATE()-30 ORDER BY DOC_DATE DESC"}:{query:"SELECT GUID,REF,REF_NO,INPUT_CODE,INPUT_NAME,DOC_DATE_CONVERT FROM DOC_VW_01 WHERE TYPE = 1 AND DOC_TYPE = 60 AND REBATE = 0 ORDER BY DOC_DATE DESC"},t.next=3,this.core.sql.execute(n);case 3:return r=t.sent,i=[],r.result.recordset.length>0&&(i=r.result.recordset),t.next=8,this.pg_Docs.setData(i);case 8:this.pg_Docs.show(),this.pg_Docs.onClick=function(t){t.length>0&&o.getDoc(t[0].GUID,t[0].REF,t[0].REF_NO)};case 10:case"end":return t.stop()}}),t,this)}))),function(t){return e.apply(this,arguments)})},{key:"render",value:function(){var t,e,n,r=this;return E.createElement("div",null,E.createElement(b(),null,E.createElement("div",{className:"row px-2 pt-2"},E.createElement("div",{className:"col-12"},E.createElement(T(),null,E.createElement(x.Item,{location:"after",locateInMenu:"auto"},E.createElement(S.Z,{id:"btnBack",parent:this,icon:"revert",type:"default",onClick:function(){r.getDoc(r.docObj.dt()[0].GUID,r.docObj.dt()[0].REF,r.docObj.dt()[0].REF_NO)}})),E.createElement(x.Item,{location:"after",locateInMenu:"auto"},E.createElement(S.Z,{id:"btnNew",parent:this,icon:"file",type:"default",onClick:function(){r.init()}})),E.createElement(x.Item,{location:"after",locateInMenu:"auto"},E.createElement(S.Z,{id:"btnSave",parent:this,icon:"floppy",type:"default",validationGroup:"frmslsDoc"+this.tabIndex,onClick:function(){var t=(0,o.Z)(p().mark((function t(e){var n,i,o,a;return p().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(1!=r.docLocked){t.next=5;break}return n={id:"msgDocLocked",showTitle:!0,title:r.t("msgDocLocked.title"),showCloseButton:!0,width:"500px",height:"200px",button:[{id:"btn01",caption:r.t("msgDocLocked.btn01"),location:"after"}],content:E.createElement("div",{style:{textAlign:"center",fontSize:"20px"}},r.t("msgDocLocked.msg"))},t.next=4,(0,j.W)(n);case 4:return t.abrupt("return");case 5:if(""!=r.docObj.docOrders.dt()[r.docObj.docOrders.dt().length-1].ITEM_CODE){t.next=8;break}return t.next=8,r.grdSlsOrder.devGrid.deleteRow(r.docObj.docOrders.dt().length-1);case 8:if("valid"!=e.validationGroup.validate().status){t.next=31;break}return i={id:"msgSave",showTitle:!0,title:r.t("msgSave.title"),showCloseButton:!0,width:"500px",height:"200px",button:[{id:"btn01",caption:r.t("msgSave.btn01"),location:"before"},{id:"btn02",caption:r.t("msgSave.btn02"),location:"after"}],content:E.createElement("div",{style:{textAlign:"center",fontSize:"20px"}},r.t("msgSave.msg"))},t.next=12,(0,j.W)(i);case 12:if("btn01"!=t.sent){t.next=29;break}return o={id:"msgSaveResult",showTitle:!0,title:r.t("msgSave.title"),showCloseButton:!0,width:"500px",height:"200px",button:[{id:"btn01",caption:r.t("msgSave.btn01"),location:"after"}]},t.next=17,r.docObj.save();case 17:if(t.t0=t.sent,0!=t.t0){t.next=26;break}return o.content=E.createElement("div",{style:{textAlign:"center",fontSize:"20px",color:"green"}},r.t("msgSaveResult.msgSuccess")),t.next=22,(0,j.W)(o);case 22:r.btnSave.setState({disabled:!0}),r.btnNew.setState({disabled:!1}),t.next=29;break;case 26:return o.content=E.createElement("div",{style:{textAlign:"center",fontSize:"20px",color:"red"}},r.t("msgSaveResult.msgFailed")),t.next=29,(0,j.W)(o);case 29:t.next=34;break;case 31:return a={id:"msgSaveValid",showTitle:!0,title:r.t("msgSaveValid.title"),showCloseButton:!0,width:"500px",height:"200px",button:[{id:"btn01",caption:r.t("msgSaveValid.btn01"),location:"after"}],content:E.createElement("div",{style:{textAlign:"center",fontSize:"20px"}},r.t("msgSaveValid.msg"))},t.next=34,(0,j.W)(a);case 34:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()})),E.createElement(x.Item,{location:"after",locateInMenu:"auto"},E.createElement(S.Z,{id:"btnDelete",parent:this,icon:"trash",type:"default",onClick:(0,o.Z)(p().mark((function t(){var e,n,i,o;return p().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(0==r.docObj.dt()[0].LOCKED){t.next=6;break}return r.docLocked=!0,e={id:"msgGetLocked",showTitle:!0,title:r.t("msgGetLocked.title"),showCloseButton:!0,width:"500px",height:"200px",button:[{id:"btn01",caption:r.t("msgGetLocked.btn01"),location:"after"}],content:E.createElement("div",{style:{textAlign:"center",fontSize:"20px"}},r.t("msgGetLocked.msg"))},t.next=5,(0,j.W)(e);case 5:return t.abrupt("return");case 6:n=0;case 7:if(!(n<r.docObj.docOrders.dt().length)){t.next=16;break}if("00000000-0000-0000-0000-000000000000"==r.docObj.docOrders.dt()[n].SHIPMENT_GUID){t.next=13;break}return i={id:"msgdocNotDelete",showTitle:!0,title:r.t("msgdocNotDelete.title"),showCloseButton:!0,width:"500px",height:"200px",button:[{id:"btn01",caption:r.t("msgdocNotDelete.btn01"),location:"after"}],content:E.createElement("div",{style:{textAlign:"center",fontSize:"20px"}},r.t("msgdocNotDelete.msg"))},t.next=12,(0,j.W)(i);case 12:return t.abrupt("return");case 13:n++,t.next=7;break;case 16:return o={id:"msgDelete",showTitle:!0,title:r.t("msgDelete.title"),showCloseButton:!0,width:"500px",height:"200px",button:[{id:"btn01",caption:r.t("msgDelete.btn01"),location:"before"},{id:"btn02",caption:r.t("msgDelete.btn02"),location:"after"}],content:E.createElement("div",{style:{textAlign:"center",fontSize:"20px"}},r.t("msgDelete.msg"))},t.next=19,(0,j.W)(o);case 19:if("btn01"!=t.sent){t.next=25;break}return r.docObj.dt("DOC").removeAt(0),t.next=24,r.docObj.dt("DOC").delete();case 24:r.init();case 25:case"end":return t.stop()}}),t)})))})),E.createElement(x.Item,{location:"after",locateInMenu:"auto"},E.createElement(S.Z,{id:"btnLock",parent:this,icon:"key",type:"default",onClick:(0,o.Z)(p().mark((function t(){var e,n;return p().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(0!=r.docObj.dt()[0].LOCKED){t.next=20;break}if(r.docObj.dt()[0].LOCKED=1,""!=r.docObj.docOrders.dt()[r.docObj.docOrders.dt().length-1].ITEM_CODE){t.next=5;break}return t.next=5,r.grdSlsOrder.devGrid.deleteRow(r.docObj.docOrders.dt().length-1);case 5:return t.next=7,r.docObj.save();case 7:if(t.t0=t.sent,0!=t.t0){t.next=15;break}return e={id:"msgLocked",showTitle:!0,title:r.t("msgLocked.title"),showCloseButton:!0,width:"500px",height:"200px",button:[{id:"btn01",caption:r.t("msgLocked.btn01"),location:"after"}],content:E.createElement("div",{style:{textAlign:"center",fontSize:"20px"}},r.t("msgLocked.msg"))},t.next=12,(0,j.W)(e);case 12:r.frmdocOrders.option("disabled",!0),t.next=18;break;case 15:return tmpConfObj1.content=E.createElement("div",{style:{textAlign:"center",fontSize:"20px",color:"red"}},r.t("msgSaveResult.msgFailed")),t.next=18,(0,j.W)(tmpConfObj1);case 18:t.next=29;break;case 20:if(1!=r.docObj.dt()[0].LOCKED){t.next=25;break}r.popPassword.show(),r.txtPassword.value="",t.next=29;break;case 25:if(2!=r.docObj.dt()[0].LOCKED){t.next=29;break}return n={id:"msgLockedType2",showTitle:!0,title:r.t("msgLockedType2.title"),showCloseButton:!0,width:"500px",height:"200px",button:[{id:"btn01",caption:r.t("msgLockedType2.btn01"),location:"after"}],content:E.createElement("div",{style:{textAlign:"center",fontSize:"20px"}},r.t("msgLockedType2.msg"))},t.next=29,(0,j.W)(n);case 29:case"end":return t.stop()}}),t)})))})),E.createElement(x.Item,{location:"after",locateInMenu:"auto"},E.createElement(S.Z,{id:"btnPrint",parent:this,icon:"print",type:"default",onClick:(0,o.Z)(p().mark((function t(){return p().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:r.popDesign.show();case 1:case"end":return t.stop()}}),t)})))})),E.createElement(x.Item,{location:"after",locateInMenu:"auto",widget:"dxButton",options:{type:"default",icon:"clear",onClick:(n=(0,o.Z)(p().mark((function t(){var e;return p().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return e={id:"msgClose",showTitle:!0,title:r.lang.t("msgWarning"),showCloseButton:!0,width:"500px",height:"200px",button:[{id:"btn01",caption:r.lang.t("btnYes"),location:"before"},{id:"btn02",caption:r.lang.t("btnNo"),location:"after"}],content:E.createElement("div",{style:{textAlign:"center",fontSize:"20px"}},r.lang.t("msgClose"))},t.next=3,(0,j.W)(e);case 3:"btn01"==t.sent&&m.Z.instance.panel.closePage();case 5:case"end":return t.stop()}}),t)}))),function(){return n.apply(this,arguments)})}})))),E.createElement("div",{className:"row px-2 pt-2"},E.createElement("div",{className:"col-12"},E.createElement(C(),{colCount:3,id:"frmslsDoc"},E.createElement(x.Item,null,E.createElement(x.Label,{text:this.t("txtRefRefno"),alignment:"right"}),E.createElement("div",{className:"row"},E.createElement("div",{className:"col-4 pe-0"},E.createElement(w.ZP,{id:"txtRef",parent:this,simple:!0,dt:{data:this.docObj.dt("DOC"),field:"REF"},upper:this.sysParam.filter({ID:"onlyBigChar",USERS:this.user.CODE}).getValue().value,readOnly:!0,maxLength:32,onChange:function(){var t=(0,o.Z)(p().mark((function t(e){var n,i;return p().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n={query:"SELECT ISNULL(MAX(REF_NO) + 1,1) AS REF_NO FROM DOC WHERE TYPE = 1 AND DOC_TYPE = 60 AND REF = @REF ",param:["REF:string|25"],value:[r.txtRef.value]},t.next=3,r.core.sql.execute(n);case 3:(i=t.sent).result.recordset.length>0&&(r.txtRefno.value=i.result.recordset[0].REF_NO);case 5:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}().bind(this),param:this.param.filter({ELEMENT:"txtRef",USERS:this.user.CODE}),access:this.access.filter({ELEMENT:"txtRef",USERS:this.user.CODE})},E.createElement(w.cX,{validationGroup:"frmslsDoc"+this.tabIndex},E.createElement(w.n2,{message:this.t("validRef")})))),E.createElement("div",{className:"col-5 ps-0"},E.createElement(w.ZP,{id:"txtRefno",parent:this,simple:!0,dt:{data:this.docObj.dt("DOC"),field:"REF_NO"},upper:this.sysParam.filter({ID:"onlyBigChar",USERS:this.user.CODE}).getValue().value,readOnly:!0,button:[{id:"01",icon:"more",onClick:function(){r.getDocs(0)}},{id:"02",icon:"arrowdown",onClick:function(){r.txtRefno.value=Math.floor(Date.now()/1e3)}}],onChange:(0,o.Z)(p().mark((function t(){return p().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,r.checkDoc("00000000-0000-0000-0000-000000000000",r.txtRef.value,r.txtRefno.value);case 2:3==t.sent&&(r.txtRefno.value="");case 4:case"end":return t.stop()}}),t)}))).bind(this),param:this.param.filter({ELEMENT:"txtRefno",USERS:this.user.CODE}),access:this.access.filter({ELEMENT:"txtRefno",USERS:this.user.CODE})},E.createElement(w.cX,{validationGroup:"frmslsDoc"+this.tabIndex},E.createElement(w.n2,{message:this.t("validRefNo")}))))),E.createElement(N.Z,{id:"pg_Docs",parent:this,container:"#root",visible:!1,position:{of:"#root"},showTitle:!0,showBorders:!0,width:"90%",height:"90%",title:this.t("pg_Docs.title"),button:[{id:"01",icon:"more",onClick:function(){r.getDocs(1)}}]},E.createElement(A.sg,{dataField:"REF",caption:this.t("pg_Docs.clmRef"),width:150}),E.createElement(A.sg,{dataField:"REF_NO",caption:this.t("pg_Docs.clmRefNo"),width:120}),E.createElement(A.sg,{dataField:"DOC_DATE_CONVERT",caption:this.t("pg_Docs.clmDate"),width:300}),E.createElement(A.sg,{dataField:"INPUT_NAME",caption:this.t("pg_Docs.clmInputName"),width:300}),E.createElement(A.sg,{dataField:"INPUT_CODE",caption:this.t("pg_Docs.clmInputCode"),width:300}))),E.createElement(x.Item,null,E.createElement(x.Label,{text:this.t("cmbDepot"),alignment:"right"}),E.createElement(R.ZP,{simple:!0,parent:this,id:"cmbDepot",notRefresh:!0,dt:{data:this.docObj.dt("DOC"),field:"OUTPUT"},displayExpr:"NAME",valueExpr:"GUID",value:"",searchEnabled:!0,onValueChanged:(0,o.Z)(p().mark((function t(){return p().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:r.checkRow(),""!=r.txtCustomerCode.value&&""!=r.cmbDepot.value&&0==r.docLocked&&r.frmdocOrders.option("disabled",!1);case 2:case"end":return t.stop()}}),t)}))).bind(this),data:{source:{select:{query:"SELECT * FROM DEPOT_VW_01 WHERE TYPE IN(0,2)"},sql:this.core.sql}},param:this.param.filter({ELEMENT:"cmbDepot",USERS:this.user.CODE}),access:this.access.filter({ELEMENT:"cmbDepot",USERS:this.user.CODE})},E.createElement(w.cX,{validationGroup:"frmslsDoc"+this.tabIndex},E.createElement(w.n2,{message:this.t("validDepot")})))),E.createElement(x.EmptyItem,null),E.createElement(x.Item,null,E.createElement(x.Label,{text:this.t("txtCustomerCode"),alignment:"right"}),E.createElement(w.ZP,{id:"txtCustomerCode",parent:this,simple:!0,upper:this.sysParam.filter({ID:"onlyBigChar",USERS:this.user.CODE}).getValue().value,dt:{data:this.docObj.dt("DOC"),field:"INPUT_CODE"},onEnterKey:(0,o.Z)(p().mark((function t(){return p().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,r.pg_txtCustomerCode.setVal(r.txtCustomerCode.value);case 2:r.pg_txtCustomerCode.show(),r.pg_txtCustomerCode.onClick=function(){var t=(0,o.Z)(p().mark((function t(e){var n,i,a;return p().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!(e.length>0)){t.next=20;break}return r.docObj.dt()[0].INPUT=e[0].GUID,r.docObj.dt()[0].INPUT_CODE=e[0].CODE,r.docObj.dt()[0].INPUT_NAME=e[0].TITLE,void 0!==(n=r.sysParam.filter({ID:"refForCustomerCode",USERS:r.user.CODE}).getValue())&&1==n.value&&(r.txtRef.value=e[0].CODE,r.txtRef.props.onChange()),""!=r.txtCustomerCode.value&&""!=r.cmbDepot.value&&0==r.docLocked&&r.frmdocOrders.option("disabled",!1),i={query:"SELECT * FROM CUSTOMER_ADRESS_VW_01 WHERE CUSTOMER = @CUSTOMER",param:["CUSTOMER:string|50"],value:[e[0].GUID]},t.next=10,r.core.sql.execute(i);case 10:if(!((a=t.sent).result.recordset.length>1)){t.next=18;break}return t.next=14,r.pg_adress.setData(a.result.recordset);case 14:r.pg_adress.show(),r.pg_adress.onClick=function(){var t=(0,o.Z)(p().mark((function t(e){return p().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:e.length>0&&(console.log(e[0].TYPE),r.docObj.dt()[0].ADDRESS=e[0].TYPE);case 1:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),t.next=20;break;case 18:return t.next=20,r.pg_adress.setData([]);case 20:r._getBarcodes();case 21:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}();case 4:case"end":return t.stop()}}),t)}))).bind(this),button:[{id:"01",icon:"more",onClick:function(){r.pg_txtCustomerCode.show(),r.pg_txtCustomerCode.onClick=function(){var t=(0,o.Z)(p().mark((function t(e){var n,i,a;return p().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!(e.length>0)){t.next=20;break}return r.docObj.dt()[0].INPUT=e[0].GUID,r.docObj.dt()[0].INPUT_CODE=e[0].CODE,r.docObj.dt()[0].INPUT_NAME=e[0].TITLE,void 0!==(n=r.sysParam.filter({ID:"refForCustomerCode",USERS:r.user.CODE}).getValue())&&1==n.value&&(r.txtRef.value=e[0].CODE,r.txtRef.props.onChange()),""!=r.txtCustomerCode.value&&""!=r.cmbDepot.value&&0==r.docLocked&&r.frmdocOrders.option("disabled",!1),i={query:"SELECT * FROM CUSTOMER_ADRESS_VW_01 WHERE CUSTOMER = @CUSTOMER",param:["CUSTOMER:string|50"],value:[e[0].GUID]},t.next=10,r.core.sql.execute(i);case 10:if(!((a=t.sent).result.recordset.length>1)){t.next=18;break}return t.next=14,r.pg_adress.setData(a.result.recordset);case 14:r.pg_adress.show(),r.pg_adress.onClick=function(){var t=(0,o.Z)(p().mark((function t(e){return p().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:e.length>0&&(console.log(e[0].TYPE),r.docObj.dt()[0].ADDRESS=e[0].TYPE);case 1:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),t.next=20;break;case 18:return t.next=20,r.pg_adress.setData([]);case 20:r._getBarcodes();case 21:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()}}],param:this.param.filter({ELEMENT:"txtCustomerCode",USERS:this.user.CODE}),access:this.access.filter({ELEMENT:"txtCustomerCode",USERS:this.user.CODE})},E.createElement(w.cX,{validationGroup:"frmslsDoc"+this.tabIndex},E.createElement(w.n2,{message:this.t("validCustomerCode")}))),E.createElement(N.Z,{id:"pg_txtCustomerCode",parent:this,container:"#root",visible:!1,position:{of:"#root"},showTitle:!0,showBorders:!0,width:"90%",height:"90%",title:this.t("pg_txtCustomerCode.title"),search:!0,data:{source:{select:{query:"SELECT GUID,CODE,TITLE,NAME,LAST_NAME,[TYPE_NAME],[GENUS_NAME] FROM CUSTOMER_VW_01 WHERE UPPER(CODE) LIKE UPPER(@VAL) OR UPPER(TITLE) LIKE UPPER(@VAL)",param:["VAL:string|50"]},sql:this.core.sql}},button:{id:"01",icon:"more",onClick:function(){console.log(1111)}}},E.createElement(A.sg,{dataField:"CODE",caption:this.t("pg_txtCustomerCode.clmCode"),width:150}),E.createElement(A.sg,{dataField:"TITLE",caption:this.t("pg_txtCustomerCode.clmTitle"),width:500,defaultSortOrder:"asc"}),E.createElement(A.sg,{dataField:"TYPE_NAME",caption:this.t("pg_txtCustomerCode.clmTypeName"),width:150}),E.createElement(A.sg,{dataField:"GENUS_NAME",caption:this.t("pg_txtCustomerCode.clmGenusName"),width:150}))),E.createElement(x.Item,null,E.createElement(x.Label,{text:this.t("txtCustomerName"),alignment:"right"}),E.createElement(w.ZP,{id:"txtCustomerName",parent:this,simple:!0,upper:this.sysParam.filter({ID:"onlyBigChar",USERS:this.user.CODE}).getValue().value,dt:{data:this.docObj.dt("DOC"),field:"INPUT_NAME"},readOnly:!0,param:this.param.filter({ELEMENT:"txtCustomerName",USERS:this.user.CODE}),access:this.access.filter({ELEMENT:"txtCustomerName",USERS:this.user.CODE})})),E.createElement(x.EmptyItem,null),E.createElement(x.Item,null,E.createElement(x.Label,{text:this.t("txtBarcode"),alignment:"right"}),E.createElement(w.ZP,{id:"txtBarcode",parent:this,simple:!0,placeholder:this.t("txtBarcodePlace"),upper:this.sysParam.filter({ID:"onlyBigChar",USERS:this.user.CODE}).getValue().value,validationGroup:"frmslsDoc"+this.tabIndex,button:[{id:"01",icon:"fa-solid fa-barcode",onClick:(e=(0,o.Z)(p().mark((function t(e){var n,i;return p().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(""!=r.cmbDepot.value&&""!=r.txtCustomerCode.value){t.next=6;break}return n={id:"msgDocValid",showTitle:!0,title:r.t("msgDocValid.title"),showCloseButton:!0,width:"500px",height:"200px",button:[{id:"btn01",caption:r.t("msgDocValid.btn01"),location:"after"}],content:E.createElement("div",{style:{textAlign:"center",fontSize:"20px"}},r.t("msgDocValid.msg"))},t.next=4,(0,j.W)(n);case 4:return r.txtBarcode.setState({value:""}),t.abrupt("return");case 6:if("valid"!=e.validationGroup.validate().status){t.next=13;break}return t.next=9,r.pg_txtBarcode.setVal(r.txtBarcode.value);case 9:r.pg_txtBarcode.show(),r.pg_txtBarcode.onClick=function(){var t=(0,o.Z)(p().mark((function t(e){var n,i,o;return p().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return(n=L({},r.docObj.docOrders.empty)).DOC_GUID=r.docObj.dt()[0].GUID,n.TYPE=r.docObj.dt()[0].TYPE,n.DOC_TYPE=r.docObj.dt()[0].DOC_TYPE,n.LINE_NO=r.docObj.docOrders.dt().length,n.REF=r.docObj.dt()[0].REF,n.REF_NO=r.docObj.dt()[0].REF_NO,n.OUTPUT=r.docObj.dt()[0].OUTPUT,n.INPUT=r.docObj.dt()[0].INPUT,n.DOC_DATE=r.docObj.dt()[0].DOC_DATE,r.txtRef.readOnly=!0,r.txtRefno.readOnly=!0,r.docObj.docOrders.addEmpty(n),t.next=15,r.core.util.waitUntil(100);case 15:if(!(e.length>0)){t.next=53;break}if(r.customerControl=!0,r.customerClear=!1,r.combineControl=!0,r.combineNew=!1,1!=e.length){t.next=25;break}return t.next=23,r.addItem(e[0],r.docObj.docOrders.dt().length-1);case 23:t.next=53;break;case 25:if(!(e.length>1)){t.next=53;break}i=0;case 27:if(!(i<e.length)){t.next=53;break}if(0!=i){t.next=33;break}return t.next=31,r.addItem(e[i],r.docObj.docOrders.dt().length-1);case 31:t.next=50;break;case 33:return(o=L({},r.docObj.docOrders.empty)).DOC_GUID=r.docObj.dt()[0].GUID,o.TYPE=r.docObj.dt()[0].TYPE,o.DOC_TYPE=r.docObj.dt()[0].DOC_TYPE,o.LINE_NO=r.docObj.docOrders.dt().length,o.REF=r.docObj.dt()[0].REF,o.REF_NO=r.docObj.dt()[0].REF_NO,o.OUTPUT=r.docObj.dt()[0].OUTPUT,o.INPUT=r.docObj.dt()[0].INPUT,o.DOC_DATE=r.docObj.dt()[0].DOC_DATE,r.txtRef.readOnly=!0,r.txtRefno.readOnly=!0,r.docObj.docOrders.addEmpty(o),t.next=48,r.core.util.waitUntil(100);case 48:return t.next=50,r.addItem(e[i],r.docObj.docOrders.dt().length-1);case 50:i++,t.next=27;break;case 53:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),t.next=16;break;case 13:return i={id:"msgDocValid",showTitle:!0,title:r.t("msgDocValid.title"),showCloseButton:!0,width:"500px",height:"200px",button:[{id:"btn01",caption:r.t("msgDocValid.btn01"),location:"after"}],content:E.createElement("div",{style:{textAlign:"center",fontSize:"20px"}},r.t("msgDocValid.msg"))},t.next=16,(0,j.W)(i);case 16:case"end":return t.stop()}}),t)}))),function(t){return e.apply(this,arguments)})}],onEnterKey:function(){var t=(0,o.Z)(p().mark((function t(e){var n,i,a,s;return p().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(""!=r.cmbDepot.value&&""!=r.txtCustomerCode.value){t.next=6;break}return n={id:"msgDocValid",showTitle:!0,title:r.t("msgDocValid.title"),showCloseButton:!0,width:"500px",height:"200px",button:[{id:"btn01",caption:r.t("msgDocValid.btn01"),location:"after"}],content:E.createElement("div",{style:{textAlign:"center",fontSize:"20px"}},r.t("msgDocValid.msg"))},t.next=4,(0,j.W)(n);case 4:return r.txtBarcode.setState({value:""}),t.abrupt("return");case 6:return i={query:"SELECT ITEMS_VW_01.GUID,CODE,NAME,COST_PRICE,VAT,BARCODE,ISNULL((SELECT TOP 1 CODE FROM ITEM_MULTICODE WHERE ITEM_MULTICODE.ITEM = ITEMS_VW_01.GUID AND ITEM_MULTICODE.CUSTOMER = @CUSTOMER AND DELETED = 0 ORDER BY LDATE DESC),'') AS MULTICODE,  ISNULL((SELECT TOP 1 CUSTOMER_NAME FROM ITEM_MULTICODE_VW_01 WHERE ITEM_MULTICODE_VW_01.ITEM_GUID = ITEMS_VW_01.GUID ORDER BY LDATE DESC),'') AS CUSTOMER_NAME  FROM ITEMS_VW_01 INNER JOIN ITEM_BARCODE_VW_01 ON ITEMS_VW_01.GUID = ITEM_BARCODE_VW_01.ITEM_GUID WHERE CODE = @CODE OR ITEM_BARCODE_VW_01.BARCODE = @CODE",param:["CODE:string|50","CUSTOMER:string|50"],value:[r.txtBarcode.value,r.docObj.dt()[0].OUTPUT]},t.next=9,r.core.sql.execute(i);case 9:if(a=t.sent,r.txtBarcode.setState({value:""}),!(a.result.recordset.length>0)){t.next=18;break}return r.txtPopQuantity.value="",setTimeout((0,o.Z)(p().mark((function t(){return p().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:r.txtPopQuantity.focus();case 1:case"end":return t.stop()}}),t)}))),700),t.next=16,r.msgQuantity.show().then(function(){var t=(0,o.Z)(p().mark((function t(e){var n;return p().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:(n=L({},r.docObj.docOrders.empty)).DOC_GUID=r.docObj.dt()[0].GUID,n.TYPE=r.docObj.dt()[0].TYPE,n.DOC_TYPE=r.docObj.dt()[0].DOC_TYPE,n.LINE_NO=r.docObj.docOrders.dt().length,n.REF=r.docObj.dt()[0].REF,n.REF_NO=r.docObj.dt()[0].REF_NO,n.OUTPUT=r.docObj.dt()[0].OUTPUT,n.INPUT=r.docObj.dt()[0].INPUT,n.DOC_DATE=r.docObj.dt()[0].DOC_DATE,r.txtRef.readOnly=!0,r.txtRefno.readOnly=!0,r.docObj.docOrders.addEmpty(n),r.addItem(a.result.recordset[0],void 0===r.docObj.docOrders.dt()[0]?0:r.docObj.docOrders.dt().length-1,r.txtPopQuantity.value);case 14:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}());case 16:t.next=21;break;case 18:return s={id:"msgItemNotFound",showTitle:!0,title:r.t("msgItemNotFound.title"),showCloseButton:!0,width:"500px",height:"200px",button:[{id:"btn01",caption:r.t("msgItemNotFound.btn01"),location:"after"}],content:E.createElement("div",{style:{textAlign:"center",fontSize:"20px"}},r.t("msgItemNotFound.msg"))},t.next=21,(0,j.W)(s);case 21:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}().bind(this),param:this.param.filter({ELEMENT:"txtBarcode",USERS:this.user.CODE}),access:this.access.filter({ELEMENT:"txtBarcode",USERS:this.user.CODE})})),E.createElement(x.Item,null,E.createElement(x.Label,{text:this.t("dtDocDate"),alignment:"right"}),E.createElement(P.ZP,{simple:!0,parent:this,id:"dtDocDate",dt:{data:this.docObj.dt("DOC"),field:"DOC_DATE"},onValueChanged:(0,o.Z)(p().mark((function t(){return p().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:r.checkRow();case 1:case"end":return t.stop()}}),t)}))).bind(this)},E.createElement(w.cX,{validationGroup:"frmslsDoc"+this.tabIndex},E.createElement(w.n2,{message:this.t("validDocDate")})))),E.createElement(x.EmptyItem,null)))),E.createElement("div",{className:"row px-2 pt-2"},E.createElement("div",{className:"col-12"},E.createElement(C(),{colCount:1,onInitialized:function(t){r.frmdocOrders=t.component}},E.createElement(x.Item,{location:"after"},E.createElement(I.Button,{icon:"add",validationGroup:"frmslsDoc"+this.tabIndex,onClick:function(){var t=(0,o.Z)(p().mark((function t(e){var n;return p().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if("valid"!=e.validationGroup.validate().status){t.next=10;break}if(void 0===r.docObj.docOrders.dt()[0]){t.next=6;break}if(""!=r.docObj.docOrders.dt()[r.docObj.docOrders.dt().length-1].ITEM_CODE){t.next=6;break}return r.pg_txtItemsCode.show(),r.pg_txtItemsCode.onClick=function(){var t=(0,o.Z)(p().mark((function t(e){var n,i;return p().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!(e.length>0)){t.next=36;break}if(r.combineControl=!0,r.combineNew=!1,1!=e.length){t.next=8;break}return t.next=6,r.addItem(e[0],r.docObj.docOrders.dt().length-1);case 6:t.next=36;break;case 8:if(!(e.length>1)){t.next=36;break}n=0;case 10:if(!(n<e.length)){t.next=36;break}if(0!=n){t.next=16;break}return t.next=14,r.addItem(e[n],r.docObj.docOrders.dt().length-1);case 14:t.next=33;break;case 16:return(i=L({},r.docObj.docOrders.empty)).DOC_GUID=r.docObj.dt()[0].GUID,i.TYPE=r.docObj.dt()[0].TYPE,i.DOC_TYPE=r.docObj.dt()[0].DOC_TYPE,i.LINE_NO=r.docObj.docOrders.dt().length,i.REF=r.docObj.dt()[0].REF,i.REF_NO=r.docObj.dt()[0].REF_NO,i.OUTPUT=r.docObj.dt()[0].OUTPUT,i.INPUT=r.docObj.dt()[0].INPUT,i.DOC_DATE=r.docObj.dt()[0].DOC_DATE,r.txtRef.readOnly=!0,r.txtRefno.readOnly=!0,r.docObj.docOrders.addEmpty(i),t.next=31,r.core.util.waitUntil(100);case 31:return t.next=33,r.addItem(e[n],r.docObj.docOrders.dt().length-1);case 33:n++,t.next=10;break;case 36:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),t.abrupt("return");case 6:r.pg_txtItemsCode.show(),r.pg_txtItemsCode.onClick=function(){var t=(0,o.Z)(p().mark((function t(e){var n,i,o;return p().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return(n=L({},r.docObj.docOrders.empty)).DOC_GUID=r.docObj.dt()[0].GUID,n.TYPE=r.docObj.dt()[0].TYPE,n.DOC_TYPE=r.docObj.dt()[0].DOC_TYPE,n.LINE_NO=r.docObj.docOrders.dt().length,n.REF=r.docObj.dt()[0].REF,n.REF_NO=r.docObj.dt()[0].REF_NO,n.OUTPUT=r.docObj.dt()[0].OUTPUT,n.INPUT=r.docObj.dt()[0].INPUT,n.DOC_DATE=r.docObj.dt()[0].DOC_DATE,r.txtRef.readOnly=!0,r.txtRefno.readOnly=!0,r.docObj.docOrders.addEmpty(n),t.next=15,r.core.util.waitUntil(100);case 15:if(!(e.length>0)){t.next=51;break}if(r.combineControl=!0,r.combineNew=!1,1!=e.length){t.next=23;break}return t.next=21,r.addItem(e[0],r.docObj.docOrders.dt().length-1);case 21:t.next=51;break;case 23:if(!(e.length>1)){t.next=51;break}i=0;case 25:if(!(i<e.length)){t.next=51;break}if(0!=i){t.next=31;break}return t.next=29,r.addItem(e[i],r.docObj.docOrders.dt().length-1);case 29:t.next=48;break;case 31:return(o=L({},r.docObj.docOrders.empty)).DOC_GUID=r.docObj.dt()[0].GUID,o.TYPE=r.docObj.dt()[0].TYPE,o.DOC_TYPE=r.docObj.dt()[0].DOC_TYPE,o.LINE_NO=r.docObj.docOrders.dt().length,o.REF=r.docObj.dt()[0].REF,o.REF_NO=r.docObj.dt()[0].REF_NO,o.OUTPUT=r.docObj.dt()[0].OUTPUT,o.INPUT=r.docObj.dt()[0].INPUT,o.DOC_DATE=r.docObj.dt()[0].DOC_DATE,r.txtRef.readOnly=!0,r.txtRefno.readOnly=!0,r.docObj.docOrders.addEmpty(o),t.next=46,r.core.util.waitUntil(100);case 46:return t.next=48,r.addItem(e[i],r.docObj.docOrders.dt().length-1);case 48:i++,t.next=25;break;case 51:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),t.next=13;break;case 10:return n={id:"msgDocValid",showTitle:!0,title:r.t("msgDocValid.title"),showCloseButton:!0,width:"500px",height:"200px",button:[{id:"btn01",caption:r.t("msgDocValid.btn01"),location:"after"}],content:E.createElement("div",{style:{textAlign:"center",fontSize:"20px"}},r.t("msgDocValid.msg"))},t.next=13,(0,j.W)(n);case 13:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()}),E.createElement(I.Button,{icon:"increaseindent",text:this.lang.t("collectiveItemAdd"),validationGroup:"frmslsDoc"+this.tabIndex,onClick:function(){var t=(0,o.Z)(p().mark((function t(e){var n;return p().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if("valid"!=e.validationGroup.validate().status){t.next=8;break}if(r.multiItemData.clear,r.popMultiItem.show(),void 0===r.docObj.docItems.dt()[r.docObj.docItems.dt().length-1]||""!=r.docObj.docItems.dt()[r.docObj.docItems.dt().length-1].ITEM_CODE){t.next=6;break}return t.next=6,r.grdPurcInv.devGrid.deleteRow(r.docObj.docItems.dt().length-1);case 6:t.next=11;break;case 8:return n={id:"msgDocValid",showTitle:!0,title:r.t("msgDocValid.title"),showCloseButton:!0,width:"500px",height:"200px",button:[{id:"btn01",caption:r.t("msgDocValid.btn01"),location:"after"}],content:E.createElement("div",{style:{textAlign:"center",fontSize:"20px"}},r.t("msgDocValid.msg"))},t.next=11,(0,j.W)(n);case 11:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()})),E.createElement(x.Item,null,E.createElement(E.Fragment,null,E.createElement(A.ZP,{parent:this,id:"grdSlsOrder",showBorders:!0,columnsAutoWidth:!0,allowColumnReordering:!0,allowColumnResizing:!0,height:"500",width:"100%",dbApply:!1,onRowPrepared:function(t){"data"==t.rowType&&"00000000-0000-0000-0000-000000000000"!=t.data.SHIPMENT_GUID&&(t.rowElement.style.color="Silver")},onRowUpdating:function(){var t=(0,o.Z)(p().mark((function t(e){var n;return p().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:"00000000-0000-0000-0000-000000000000"!=e.key.SHIPMENT_GUID&&(e.cancel=!0,n={id:"msgRowNotUpdate",showTitle:!0,title:r.t("msgRowNotUpdate.title"),showCloseButton:!0,width:"500px",height:"200px",button:[{id:"btn01",caption:r.t("msgRowNotUpdate.btn01"),location:"after"}],content:E.createElement("div",{style:{textAlign:"center",fontSize:"20px"}},r.t("msgRowNotUpdate.msg"))},(0,j.W)(n),e.component.cancelEditData());case 1:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),onRowRemoving:function(){var t=(0,o.Z)(p().mark((function t(e){var n;return p().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:"00000000-0000-0000-0000-000000000000"!=e.key.SHIPMENT_GUID&&(e.cancel=!0,n={id:"msgRowNotDelete",showTitle:!0,title:r.t("msgRowNotDelete.title"),showCloseButton:!0,width:"500px",height:"200px",button:[{id:"btn01",caption:r.t("msgRowNotDelete.btn01"),location:"after"}],content:E.createElement("div",{style:{textAlign:"center",fontSize:"20px"}},r.t("msgRowNotDelete.msg"))},(0,j.W)(n),e.component.cancelEditData());case 1:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),onRowUpdated:function(){var t=(0,o.Z)(p().mark((function t(e){var n,i,o,a,s,c,d,l,u;return p().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(void 0===e.data.QUANTITY){t.next=6;break}return n={query:"SELECT [dbo].[FN_PRICE_SALE_VAT_EXT](@ITEM_GUID,@QUANTITY,GETDATE(),@CUSTOMER_GUID) AS PRICE",param:["ITEM_GUID:string|50","CUSTOMER_GUID:string|50","QUANTITY:float"],value:[e.key.ITEM,r.docObj.dt()[0].INPUT,e.data.QUANTITY]},t.next=4,r.core.sql.execute(n);case 4:(i=t.sent).result.recordset.length>0&&(e.key.PRICE=parseFloat(i.result.recordset[0].PRICE.toFixed(9)),r._calculateTotal());case 6:if(void 0!==e.data.DISCOUNT_RATE&&(e.key.DISCOUNT=parseFloat((e.key.AMOUNT*e.data.DISCOUNT_RATE/100).toFixed(2))),!(e.key.COST_PRICE>e.key.PRICE)){t.next=24;break}if(void 0===(o=r.acsobj.filter({ID:"underMinCostPrice",USERS:r.user.CODE}).getValue())||1!=o){t.next=21;break}return a={id:"msgUnderPrice1",showTitle:!0,title:r.t("msgUnderPrice1.title"),showCloseButton:!0,width:"500px",height:"200px",button:[{id:"btn01",caption:r.t("msgUnderPrice1.btn01"),location:"before"},{id:"btn02",caption:r.t("msgUnderPrice1.btn02"),location:"after"}],content:E.createElement("div",{style:{textAlign:"center",fontSize:"20px"}},r.t("msgUnderPrice1.msg"))},t.next=13,(0,j.W)(a);case 13:if("btn01"!=(s=t.sent)){t.next=17;break}t.next=19;break;case 17:if("btn02"!=s){t.next=19;break}return t.abrupt("return");case 19:t.next=24;break;case 21:return c={id:"msgUnderPrice2",showTitle:!0,title:"Uyarı",showCloseButton:!0,width:"500px",height:"200px",button:[{id:"btn01",caption:r.t("msgUnderPrice2.btn01"),location:"after"}],content:E.createElement("div",{style:{textAlign:"center",fontSize:"20px"}},"msgUnderPrice2.msg")},(0,j.W)(c),t.abrupt("return");case 24:if(!(e.key.DISCOUNT>e.key.PRICE*e.key.QUANTITY)){t.next=29;break}return d={id:"msgDiscount",showTitle:!0,title:"Uyarı",showCloseButton:!0,width:"500px",height:"200px",button:[{id:"btn01",caption:r.t("msgDiscount.btn01"),location:"after"}],content:E.createElement("div",{style:{textAlign:"center",fontSize:"20px"}},r.t("msgDiscount.msg"))},(0,j.W)(d),e.key.DISCOUNT=0,t.abrupt("return");case 29:e.key.VAT=parseFloat(((e.key.PRICE*e.key.QUANTITY-e.key.DISCOUNT)*e.key.VAT_RATE/100).toFixed(9)),e.key.AMOUNT=parseFloat((e.key.PRICE*e.key.QUANTITY).toFixed(9)),e.key.TOTAL=parseFloat((e.key.PRICE*e.key.QUANTITY-e.key.DISCOUNT+e.key.VAT).toFixed(9)),l=e.key.TOTAL-e.key.VAT-e.key.COST_PRICE*e.key.QUANTITY,u=l/(e.key.TOTAL-e.key.VAT)*100,e.key.MARGIN=l.toFixed(2)+"€ / %"+u.toFixed(2),e.key.DISCOUNT>0&&(e.key.DISCOUNT_RATE=parseFloat((100-(e.key.PRICE*e.key.QUANTITY-e.key.DISCOUNT)/(e.key.PRICE*e.key.QUANTITY)*100).toFixed(9))),r._calculateTotal();case 37:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),onRowRemoved:function(){var t=(0,o.Z)(p().mark((function t(e){return p().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return r._calculateTotal(),t.next=3,r.docObj.save();case 3:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()},E.createElement(A.Po,{defaultPageSize:10}),E.createElement(A.uE,{visible:!0,allowedPageSizes:[5,10,20,50,100],showPageSizeSelector:!0}),E.createElement(A.m_,{editOnKeyPress:!0,enterKeyAction:"moveFocus",enterKeyDirection:"column"}),E.createElement(A.PY,{mode:"standart"}),E.createElement(A.LO,{mode:"cell",allowUpdating:!0,allowDeleting:!0,confirmDelete:!1}),E.createElement(A.D7,{fileName:this.lang.t("menu.sip_02_002"),enabled:!0,allowExportSelectedData:!0}),E.createElement(A.sg,{dataField:"CDATE_FORMAT",caption:this.t("grdSlsOrder.clmCreateDate"),width:80,allowEditing:!1}),E.createElement(A.sg,{dataField:"CUSER_NAME",caption:this.t("grdSlsOrder.clmCuser"),width:90,allowEditing:!1}),E.createElement(A.sg,{dataField:"ITEM_CODE",caption:this.t("grdSlsOrder.clmItemCode"),width:105,editCellRender:this._cellRoleRender}),E.createElement(A.sg,{dataField:"ITEM_NAME",caption:this.t("grdSlsOrder.clmItemName"),width:230}),E.createElement(A.sg,{dataField:"ITEM_BARCODE",caption:this.t("grdSlsOrder.clmBarcode"),width:110,allowEditing:!1}),E.createElement(A.sg,{dataField:"QUANTITY",caption:this.t("grdSlsOrder.clmQuantity"),width:50,dataType:"number"}),E.createElement(A.sg,{dataField:"PRICE",caption:this.t("grdSlsOrder.clmPrice"),dataType:"number",format:{style:"currency",currency:"EUR",precision:3},width:70}),E.createElement(A.sg,{dataField:"AMOUNT",caption:this.t("grdSlsOrder.clmAmount"),width:90,allowEditing:!1,format:{style:"currency",currency:"EUR",precision:3}}),E.createElement(A.sg,{dataField:"DISCOUNT",caption:this.t("grdSlsOrder.clmDiscount"),width:60,dataType:"number",format:{style:"currency",currency:"EUR",precision:3}}),E.createElement(A.sg,{dataField:"DISCOUNT_RATE",caption:this.t("grdSlsOrder.clmDiscountRate"),width:60,dataType:"number"}),E.createElement(A.sg,{dataField:"MARGIN",caption:this.t("grdSlsOrder.clmMargin"),width:80,allowEditing:!1}),E.createElement(A.sg,{dataField:"VAT",caption:this.t("grdSlsOrder.clmVat"),width:75,format:{style:"currency",currency:"EUR",precision:3},allowEditing:!1}),E.createElement(A.sg,{dataField:"VAT_RATE",caption:this.t("grdSlsOrder.clmVatRate"),width:50,allowEditing:!1}),E.createElement(A.sg,{dataField:"TOTAL",caption:this.t("grdSlsOrder.clmTotal"),width:110,format:{style:"currency",currency:"EUR",precision:3},allowEditing:!1}),E.createElement(A.sg,{dataField:"OFFER_REF",caption:this.t("grdSlsOrder.clmOffer"),width:110,headerFilter:{visible:!0},allowEditing:!1}),E.createElement(A.sg,{dataField:"DESCRIPTION",caption:this.t("grdSlsOrder.clmDescription"),width:100,headerFilter:{visible:!0}})),E.createElement(v(),{dataSource:this.rightItems,width:200,target:"#grdSlsOrder",onItemClick:function(){var t=(0,o.Z)(p().mark((function t(e){return p().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:e.itemData.text==r.t("getOffers")&&r._getOffers();case 1:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}().bind(this)})))))),E.createElement("div",{className:"row px-2 pt-2"},E.createElement("div",{className:"col-12"},E.createElement(C(),{colCount:4,parent:this,id:"frmslsDoc"},E.createElement(x.EmptyItem,{colSpan:3}),E.createElement(x.Item,null,E.createElement(x.Label,{text:this.t("txtAmount"),alignment:"right"}),E.createElement(w.ZP,{id:"txtAmount",parent:this,simple:!0,readOnly:!0,dt:{data:this.docObj.dt("DOC"),field:"AMOUNT"},maxLength:32})),E.createElement(x.EmptyItem,{colSpan:3}),E.createElement(x.Item,null,E.createElement(x.Label,{text:this.t("txtDiscount"),alignment:"right"}),E.createElement(w.ZP,{id:"txtDiscount",parent:this,simple:!0,readOnly:!0,dt:{data:this.docObj.dt("DOC"),field:"DISCOUNT"},maxLength:32,button:[{id:"01",icon:"more",onClick:function(){r.docObj.dt()[0].DISCOUNT>0&&(r.txtDiscountPercent.value=parseFloat((100-(r.docObj.dt()[0].AMOUNT-r.docObj.dt()[0].DISCOUNT)/r.docObj.dt()[0].AMOUNT*100).toFixed(9)),r.txtDiscountPrice.value=r.docObj.dt()[0].DISCOUNT),r.popDiscount.show()}}]})),E.createElement(x.EmptyItem,{colSpan:3}),E.createElement(x.Item,null,E.createElement(x.Label,{text:this.t("txtVat"),alignment:"right"}),E.createElement(w.ZP,{id:"txtVat",parent:this,simple:!0,readOnly:!0,dt:{data:this.docObj.dt("DOC"),field:"VAT"},maxLength:32,button:[{id:"01",icon:"clear",onClick:(t=(0,o.Z)(p().mark((function t(){var e,n;return p().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return e={id:"msgVatDelete",showTitle:!0,title:r.t("msgVatDelete.title"),showCloseButton:!0,width:"500px",height:"200px",button:[{id:"btn01",caption:r.t("msgVatDelete.btn01"),location:"before"},{id:"btn02",caption:r.t("msgSave.btn02"),location:"after"}],content:E.createElement("div",{style:{textAlign:"center",fontSize:"20px"}},r.t("msgVatDelete.msg"))},t.next=3,(0,j.W)(e);case 3:if("btn01"==t.sent)for(n=0;n<r.docObj.docOrders.dt().length;n++)r.docObj.docOrders.dt()[n].VAT=0,r.docObj.docOrders.dt()[n].VAT_RATE=0,r.docObj.docOrders.dt()[n].TOTAL=r.docObj.docOrders.dt()[n].PRICE*r.docObj.docOrders.dt()[n].QUANTITY-r.docObj.docOrders.dt()[n].DISCOUNT,r._calculateTotal();case 5:case"end":return t.stop()}}),t)}))),function(){return t.apply(this,arguments)})}]})),E.createElement(x.EmptyItem,{colSpan:3}),E.createElement(x.Item,null,E.createElement(x.Label,{text:this.t("txtTotal"),alignment:"right"}),E.createElement(w.ZP,{id:"txtTotal",parent:this,simple:!0,readOnly:!0,dt:{data:this.docObj.dt("DOC"),field:"TOTAL"},maxLength:32}))))),E.createElement("div",null,E.createElement(U.ZP,{parent:this,id:"popDiscount",visible:!1,showCloseButton:!0,showTitle:!0,title:this.t("popDiscount.title"),container:"#root",width:"500",height:"250",position:{of:"#root"}},E.createElement(C(),{colCount:1,height:"fit-content"},E.createElement(x.Item,null,E.createElement(x.Label,{text:this.t("popDiscount.Percent"),alignment:"right"}),E.createElement(_.ZP,{id:"txtDiscountPercent",parent:this,simple:!0,maxLength:32,onValueChanged:(0,o.Z)(p().mark((function t(){var e;return p().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!(r.txtDiscountPercent.value>100)){t.next=7;break}return e={id:"msgDiscountPercent",showTitle:!0,title:r.t("msgDiscountPercent.title"),showCloseButton:!0,width:"500px",height:"200px",button:[{id:"btn01",caption:r.t("msgDiscountPercent.btn01"),location:"after"}],content:E.createElement("div",{style:{textAlign:"center",fontSize:"20px"}},r.t("msgDiscountPercent.msg"))},t.next=4,(0,j.W)(e);case 4:return r.txtDiscountPercent.value=0,r.txtDiscountPrice.value=0,t.abrupt("return");case 7:r.txtDiscountPrice.value=parseFloat((r.docObj.dt()[0].AMOUNT*r.txtDiscountPercent.value/100).toFixed(9));case 8:case"end":return t.stop()}}),t)}))).bind(this)})),E.createElement(x.Item,null,E.createElement(x.Label,{text:this.t("popDiscount.Price"),alignment:"right"}),E.createElement(_.ZP,{id:"txtDiscountPrice",parent:this,simple:!0,maxLength:32,onValueChanged:(0,o.Z)(p().mark((function t(){var e;return p().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!(r.txtDiscountPrice.value>r.docObj.dt()[0].AMOUNT)){t.next=7;break}return e={id:"msgDiscountPrice",showTitle:!0,title:r.t("msgDiscountPrice.title"),showCloseButton:!0,width:"500px",height:"200px",button:[{id:"btn01",caption:r.t("msgDiscountPrice.btn01"),location:"after"}],content:E.createElement("div",{style:{textAlign:"center",fontSize:"20px"}},r.t("msgDiscountPrice.msg"))},t.next=4,(0,j.W)(e);case 4:return r.txtDiscountPercent.value=0,r.txtDiscountPrice.value=0,t.abrupt("return");case 7:r.txtDiscountPercent.value=parseFloat((100-(r.docObj.dt()[0].AMOUNT-r.txtDiscountPrice.value)/r.docObj.dt()[0].AMOUNT*100).toFixed(9));case 8:case"end":return t.stop()}}),t)}))).bind(this)})),E.createElement(x.Item,null,E.createElement("div",{className:"row"},E.createElement("div",{className:"col-6"},E.createElement(S.Z,{text:this.lang.t("btnSave"),type:"normal",stylingMode:"contained",width:"100%",onClick:(0,o.Z)(p().mark((function t(){var e;return p().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:for(e=0;e<r.docObj.docOrders.dt().length;e++)r.docObj.docOrders.dt()[e].DISCOUNT_RATE=r.txtDiscountPercent.value,r.docObj.docOrders.dt()[e].DISCOUNT=parseFloat((r.docObj.docOrders.dt()[e].PRICE*r.docObj.docOrders.dt()[e].QUANTITY*r.txtDiscountPercent.value/100).toFixed(9)),r.docObj.docOrders.dt()[e].VAT>0&&(r.docObj.docOrders.dt()[e].VAT=parseFloat((r.docObj.docOrders.dt()[e].PRICE*r.docObj.docOrders.dt()[e].QUANTITY*(r.docObj.docOrders.dt()[e].VAT_RATE/100)).toFixed(9))),r.docObj.docOrders.dt()[e].TOTAL=parseFloat((r.docObj.docOrders.dt()[e].PRICE*r.docObj.docOrders.dt()[e].QUANTITY+r.docObj.docOrders.dt()[e].VAT-r.docObj.docOrders.dt()[e].DISCOUNT).toFixed(9));r._calculateMargin(),r._calculateTotal(),r._calculateTotalMargin(),r.popDiscount.hide();case 5:case"end":return t.stop()}}),t)})))})),E.createElement("div",{className:"col-6"},E.createElement(S.Z,{text:this.lang.t("btnCancel"),type:"normal",stylingMode:"contained",width:"100%",onClick:function(){r.popDiscount.hide()}}))))))),E.createElement("div",null,E.createElement(U.ZP,{parent:this,id:"popPassword",visible:!1,showCloseButton:!0,showTitle:!0,title:this.t("popPassword.title"),container:"#root",width:"500",height:"200",position:{of:"#root"}},E.createElement(C(),{colCount:1,height:"fit-content"},E.createElement(x.Item,null,E.createElement(x.Label,{text:this.t("popPassword.Password"),alignment:"right"}),E.createElement(w.ZP,{id:"txtPassword",mode:"password",parent:this,simple:!0,maxLength:32})),E.createElement(x.Item,null,E.createElement("div",{className:"row"},E.createElement("div",{className:"col-6"},E.createElement(S.Z,{text:this.t("popPassword.btnApprove"),type:"normal",stylingMode:"contained",width:"100%",onClick:(0,o.Z)(p().mark((function t(){var e,n,i,o;return p().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return e=btoa(r.txtPassword.value),n={query:"SELECT TOP 1 * FROM USERS WHERE PWD = @PWD AND ROLE = 'Administrator' AND STATUS = 1",param:["PWD:string|50"],value:[e]},t.next=4,r.core.sql.execute(n);case 4:if(!(t.sent.result.recordset.length>0)){t.next=15;break}return r.docObj.dt()[0].LOCKED=0,r.frmdocOrders.option("disabled",!1),r.docLocked=!1,i={id:"msgPasswordSucces",showTitle:!0,title:r.t("msgPasswordSucces.title"),showCloseButton:!0,width:"500px",height:"200px",button:[{id:"btn01",caption:r.t("msgPasswordSucces.btn01"),location:"after"}],content:E.createElement("div",{style:{textAlign:"center",fontSize:"20px"}},r.t("msgPasswordSucces.msg"))},t.next=12,(0,j.W)(i);case 12:r.popPassword.hide(),t.next=18;break;case 15:return o={id:"msgPasswordWrong",showTitle:!0,title:r.t("msgPasswordWrong.title"),showCloseButton:!0,width:"500px",height:"200px",button:[{id:"btn01",caption:r.t("msgPasswordWrong.btn01"),location:"after"}],content:E.createElement("div",{style:{textAlign:"center",fontSize:"20px"}},r.t("msgPasswordWrong.msg"))},t.next=18,(0,j.W)(o);case 18:case"end":return t.stop()}}),t)})))})),E.createElement("div",{className:"col-6"},E.createElement(S.Z,{text:this.lang.t("btnCancel"),type:"normal",stylingMode:"contained",width:"100%",onClick:function(){r.popPassword.hide()}}))))))),E.createElement(N.Z,{id:"pg_txtItemsCode",parent:this,container:"#root",visible:!1,position:{of:"#root"},showTitle:!0,showBorders:!0,width:"90%",height:"90%",title:this.t("pg_txtItemsCode.title"),search:!0,data:{source:{select:{query:"SELECT GUID,CODE,NAME,VAT,COST_PRICE,ISNULL((SELECT TOP 1 BARCODE FROM ITEM_BARCODE WHERE DELETED = 0 AND ITEM_BARCODE.ITEM = ITEMS_VW_01.GUID ORDER BY CDATE DESC),'') AS BARCODE FROM ITEMS_VW_01 WHERE UPPER(CODE) LIKE UPPER(@VAL) OR UPPER(NAME) LIKE UPPER(@VAL)",param:["VAL:string|50"]},sql:this.core.sql}}},E.createElement(A.Po,{defaultPageSize:22}),E.createElement(A.sg,{dataField:"CODE",caption:this.t("pg_txtItemsCode.clmCode"),width:150}),E.createElement(A.sg,{dataField:"NAME",caption:this.t("pg_txtItemsCode.clmName"),width:300,defaultSortOrder:"asc"})),E.createElement(N.Z,{id:"pg_txtBarcode",parent:this,container:"#root",visible:!1,position:{of:"#root"},showTitle:!0,showBorders:!0,width:"90%",height:"90%",title:this.t("pg_txtBarcode.title"),search:!0},E.createElement(A.sg,{dataField:"BARCODE",caption:this.t("pg_txtBarcode.clmBarcode"),width:150}),E.createElement(A.sg,{dataField:"CODE",caption:this.t("pg_txtBarcode.clmCode"),width:150}),E.createElement(A.sg,{dataField:"NAME",caption:this.t("pg_txtBarcode.clmName"),width:300,defaultSortOrder:"asc"}),E.createElement(A.sg,{dataField:"MULTICODE",caption:this.t("pg_txtBarcode.clmMulticode"),width:200})),E.createElement("div",null,E.createElement(U.ZP,{parent:this,id:"popDesign",visible:!1,showCloseButton:!0,showTitle:!0,title:this.t("popDesign.title"),container:"#root",width:"500",height:"250",position:{of:"#root"}},E.createElement(C(),{colCount:1,height:"fit-content"},E.createElement(x.Item,null,E.createElement(x.Label,{text:this.t("popDesign.design"),alignment:"right"}),E.createElement(R.ZP,{simple:!0,parent:this,id:"cmbDesignList",notRefresh:!0,displayExpr:"DESIGN_NAME",valueExpr:"TAG",value:"",searchEnabled:!0,onValueChanged:(0,o.Z)(p().mark((function t(){return p().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:case"end":return t.stop()}}),t)}))).bind(this),data:{source:{select:{query:"SELECT TAG,DESIGN_NAME FROM [dbo].[LABEL_DESIGN] WHERE PAGE = '11'"},sql:this.core.sql}},param:this.param.filter({ELEMENT:"cmbDesignList",USERS:this.user.CODE}),access:this.access.filter({ELEMENT:"cmbDesignList",USERS:this.user.CODE})},E.createElement(w.cX,{validationGroup:"frmPurcOrderPrint"+this.tabIndex},E.createElement(w.n2,{message:this.t("validDesign")})))),E.createElement(x.Item,null,E.createElement(x.Label,{text:this.t("popDesign.lang"),alignment:"right"}),E.createElement(R.ZP,{simple:!0,parent:this,id:"cmbDesignLang",notRefresh:!0,displayExpr:"VALUE",valueExpr:"ID",value:"",searchEnabled:!0,onValueChanged:(0,o.Z)(p().mark((function t(){return p().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:case"end":return t.stop()}}),t)}))).bind(this),data:{source:[{ID:"FR",VALUE:"FR"},{ID:"TR",VALUE:"TR"}]}})),E.createElement(x.Item,null,E.createElement("div",{className:"row"},E.createElement("div",{className:"col-6"},E.createElement(S.Z,{text:this.lang.t("btnPrint"),type:"normal",stylingMode:"contained",width:"100%",onClick:(0,o.Z)(p().mark((function t(){var e,n;return p().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return e={query:"SELECT *,ISNULL((SELECT TOP 1 PATH FROM LABEL_DESIGN WHERE TAG = @DESIGN),'') AS PATH FROM  [dbo].[FN_DOC_ORDERS_FOR_PRINT](@DOC_GUID) ORDER BY LINE_NO ",param:["DOC_GUID:string|50","DESIGN:string|25"],value:[r.docObj.dt()[0].GUID,r.cmbDesignList.value]},t.next=3,r.core.sql.execute(e);case 3:n=t.sent,console.log(JSON.stringify(n.result.recordset)),r.core.socket.emit("devprint","{TYPE:'REVIEW',PATH:'"+n.result.recordset[0].PATH.replaceAll("\\","/")+"',DATA:"+JSON.stringify(n.result.recordset)+"}",(function(t){var e=window.open("printview.html","_blank","width=900,height=1000,left=500");e.onload=function(){e.document.getElementById("view").innerHTML="<iframe src='data:application/pdf;base64,"+t.split("|")[1]+"' type='application/pdf' width='100%' height='100%'></iframe>"}})),r.popDesign.hide();case 7:case"end":return t.stop()}}),t)})))})),E.createElement("div",{className:"col-6"},E.createElement(S.Z,{text:this.lang.t("btnCancel"),type:"normal",stylingMode:"contained",width:"100%",onClick:function(){r.popDesign.hide()}}))))))),E.createElement("div",null,E.createElement(U.ZP,{parent:this,id:"popMultiItem",visible:!1,showCloseButton:!0,showTitle:!0,title:this.t("popMultiItem.title"),container:"#root",width:"900",height:"700",position:{of:"#root"}},E.createElement(C(),{colCount:2,height:"fit-content"},E.createElement(x.Item,{colSpan:2},E.createElement(x.Label,{alignment:"right"}),E.createElement(k.ZP,{id:"tagItemCode",parent:this,simple:!0,value:[],placeholder:this.t("tagItemCodePlaceholder")})),E.createElement(x.EmptyItem,null),E.createElement(x.Item,null,E.createElement(x.Label,{text:this.t("cmbMultiItemType.title"),alignment:"right"}),E.createElement(R.ZP,{simple:!0,parent:this,id:"cmbMultiItemType",height:"fit-content",displayExpr:"VALUE",valueExpr:"ID",value:0,data:{source:[{ID:0,VALUE:this.t("cmbMultiItemType.customerCode")},{ID:1,VALUE:this.t("cmbMultiItemType.ItemCode")}]}})),E.createElement(x.EmptyItem,null),E.createElement(x.Item,null,E.createElement("div",{className:"row"},E.createElement("div",{className:"col-6"},E.createElement(S.Z,{text:this.t("popMultiItem.btnApprove"),type:"normal",stylingMode:"contained",width:"100%",onClick:function(){var t=(0,o.Z)(p().mark((function t(e){return p().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:r.multiItemAdd();case 1:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()})),E.createElement("div",{className:"col-6"},E.createElement(S.Z,{text:this.t("popMultiItem.btnClear"),type:"normal",stylingMode:"contained",width:"100%",onClick:function(){r.multiItemData.clear()}})))),E.createElement(x.Item,{colSpan:2},E.createElement(A.ZP,{parent:this,id:"grdMultiItem",showBorders:!0,columnsAutoWidth:!0,allowColumnReordering:!0,allowColumnResizing:!0,headerFilter:{visible:!0},filterRow:{visible:!0},height:400,width:"100%",dbApply:!1,onRowRemoved:function(){var t=(0,o.Z)(p().mark((function t(e){return p().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()},E.createElement(A.m_,{editOnKeyPress:!0,enterKeyAction:"moveFocus",enterKeyDirection:"column"}),E.createElement(A.PY,{mode:"standart"}),E.createElement(A.LO,{mode:"cell",allowUpdating:!0,allowDeleting:!0}),E.createElement(A.sg,{dataField:"CODE",caption:this.t("grdMultiItem.clmCode"),width:150,allowEditing:!1}),E.createElement(A.sg,{dataField:"MULTICODE",caption:this.t("grdMultiItem.clmMulticode"),width:150,allowEditing:!1}),E.createElement(A.sg,{dataField:"NAME",caption:this.t("grdMultiItem.clmName"),width:300,headerFilter:{visible:!0},allowEditing:!1}),E.createElement(A.sg,{dataField:"QUANTITY",caption:this.t("grdMultiItem.clmQuantity"),dataType:"number",width:100,headerFilter:{visible:!0}}))),E.createElement(x.EmptyItem,null),E.createElement(x.Item,null,E.createElement("div",{className:"row"},E.createElement("div",{className:"col-6"}),E.createElement("div",{className:"col-6"},E.createElement(S.Z,{text:this.t("popMultiItem.btnSave"),type:"normal",stylingMode:"contained",width:"100%",onClick:function(){r.multiItemSave()}}))))))),E.createElement(j.Z,{id:"msgCombineItem",container:"#root",parent:this,position:{of:"#root"},showTitle:!0,title:this.t("msgCombineItem.title"),showCloseButton:!1,width:"500px",height:"250px",button:[{id:"btn01",caption:this.t("msgCombineItem.btn01"),location:"before"},{id:"btn02",caption:this.t("msgCombineItem.btn02"),location:"after"}]},E.createElement("div",{className:"row"},E.createElement("div",{className:"col-12 py-2"},E.createElement("div",{style:{textAlign:"center",fontSize:"20px"}},this.t("msgCombineItem.msg"))),E.createElement("div",{className:"col-12 py-2"},E.createElement(C(),null,E.createElement(x.Item,null,E.createElement(x.Label,{text:this.lang.t("checkAll"),alignment:"right"}),E.createElement(y.ZP,{id:"checkCombine",parent:this,simple:!0,value:!1}))))),E.createElement("div",{className:"row"})),E.createElement(j.Z,{id:"msgQuantity",container:"#root",parent:this,position:{of:"#root"},showTitle:!0,title:this.t("msgQuantity.title"),showCloseButton:!1,width:"350px",height:"250px",button:[{id:"btn01",caption:this.t("msgQuantity.btn01"),location:"after"}]},E.createElement("div",{className:"row"},E.createElement("div",{className:"col-12 py-2"},E.createElement("div",{style:{textAlign:"center",fontSize:"20px"}},this.t("msgQuantity.msg"))),E.createElement("div",{className:"col-12 py-2"},E.createElement(C(),null,E.createElement(x.Item,null,E.createElement(x.Label,{text:this.t("txtQuantity"),alignment:"right"}),E.createElement(_.ZP,{id:"txtPopQuantity",parent:this,simple:!0,onEnterKey:function(){var t=(0,o.Z)(p().mark((function t(e){return p().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:r.msgQuantity._onClick();case 1:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}().bind(this)}))))),E.createElement("div",{className:"row"})),E.createElement(N.Z,{id:"pg_offersGrid",parent:this,container:"#root",visible:!1,position:{of:"#root"},showTitle:!0,showBorders:!0,width:"90%",height:"90%",selection:{mode:"multiple"},title:this.t("pg_offersGrid.title")},E.createElement(A.Po,{defaultPageSize:22}),E.createElement(A.sg,{dataField:"REFERANS",caption:this.t("pg_offersGrid.clmReferans"),width:200,defaultSortOrder:"asc"}),E.createElement(A.sg,{dataField:"ITEM_CODE",caption:this.t("pg_offersGrid.clmCode"),width:200}),E.createElement(A.sg,{dataField:"ITEM_NAME",caption:this.t("pg_offersGrid.clmName"),width:500}),E.createElement(A.sg,{dataField:"QUANTITY",caption:this.t("pg_offersGrid.clmQuantity"),width:200}),E.createElement(A.sg,{dataField:"PRICE",caption:this.t("pg_offersGrid.clmPrice"),width:200,format:{style:"currency",currency:"EUR",precision:2}}),E.createElement(A.sg,{dataField:"TOTAL",caption:this.t("pg_offersGrid.clmTotal"),width:300,format:{style:"currency",currency:"EUR",precision:2}})),E.createElement(N.Z,{id:"pg_adress",parent:this,container:"#root",visible:!1,position:{of:"#root"},showTitle:!0,showBorders:!0,width:"90%",height:"90%",title:this.t("pg_adress.title")},E.createElement(A.sg,{dataField:"ADRESS",caption:this.t("pg_adress.clmAdress"),width:250}),E.createElement(A.sg,{dataField:"CITY",caption:this.t("pg_adress.clmCiyt"),width:150}),E.createElement(A.sg,{dataField:"ZIPCODE",caption:this.t("pg_adress.clmZipcode"),width:300,defaultSortOrder:"asc"}),E.createElement(A.sg,{dataField:"COUNTRY",caption:this.t("pg_adress.clmCountry"),width:200}))))}}]),K}(E.PureComponent)}}]);