"use strict";(self.webpackChunkwww=self.webpackChunkwww||[]).push([[6242],{55585:(t,e,a)=>{a.d(e,{ZP:()=>E});var i=a(15671),r=a(43144),n=a(97326),s=a(60136),l=a(82963),c=a(61120),o=a(67294),m=a(60250),d=a.n(m);var E=function(t){(0,s.Z)(E,t);var e,a,m=(e=E,a=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}(),function(){var t,i=(0,c.Z)(e);if(a){var r=(0,c.Z)(this).constructor;t=Reflect.construct(i,arguments,r)}else t=i.apply(this,arguments);return(0,l.Z)(this,t)});function E(t){var e;return(0,i.Z)(this,E),(e=m.call(this,t)).state.value=void 0!==t.value&&t.value,e._onValueChanged=e._onValueChanged.bind((0,n.Z)(e)),e}return(0,r.Z)(E,[{key:"_onValueChanged",value:function(t){this.value=t.value,void 0!==this.props.onValueChanged&&this.props.onValueChanged(t)}},{key:"value",get:function(){return this.state.value},set:function(t){var e=this;if(void 0!==t){if(void 0!==this.props.dt&&void 0!==this.props.dt.data&&this.props.dt.data.length>0&&void 0!==this.props.dt.field)if(void 0===this.props.dt.filter)void 0!==this.props.dt.row&&void 0!==this.props.dt.data.find((function(t){return t===e.props.dt.row}))?this.props.dt.data.find((function(t){return t===e.props.dt.row}))[this.props.dt.field]=t:this.props.dt.data[this.props.dt.data.length-1][this.props.dt.field]=t;else{var a=this.props.dt.data.where(this.props.dt.filter);a.length>0&&(void 0!==this.props.dt.row&&void 0!==a.find((function(t){return t===e.props.dt.row}))?a.find((function(t){return t===e.props.dt.row}))[this.props.dt.field]=t:a[a.length-1][this.props.dt.field]=t)}this.setState({value:t})}}},{key:"render",value:function(){return o.createElement(d(),{id:this.props.id,defaultValue:this.props.defaultValue,value:this.state.value,text:this.props.text,onValueChanged:this._onValueChanged},this.props.children,this.validationView())}}]),E}(a(20819).ZP)},26242:(t,e,a)=>{a.r(e),a.d(e,{default:()=>V});var i=a(4942),r=a(15861),n=a(15671),s=a(43144),l=a(97326),c=a(60136),o=a(82963),m=a(61120),d=a(64687),E=a.n(d),u=a(67294),h=a(73364),p=a(28996),C=a(30381),g=a.n(C),T=a(42866),O=a.n(T),x=a(53221),I=a.n(x),P=a(25552),S=a.n(P),f=a(91686),b=a.n(f),D=a(62690),R=a(30886),M=a(99846),v=a(5083),U=a(99077),A=a(55585),N=a(417),w=a(32175),_=a(18405),y=a(73682),L=a(90428),k=a(57941),B=a(60547),j=a(17276);function G(t,e){var a=Object.keys(t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);e&&(i=i.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),a.push.apply(a,i)}return a}function F(t){for(var e=1;e<arguments.length;e++){var a=null!=arguments[e]?arguments[e]:{};e%2?G(Object(a),!0).forEach((function(e){(0,i.Z)(t,e,a[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(a)):G(Object(a)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(a,e))}))}return t}var V=function(t){(0,c.Z)(q,t);var e,a,i,d,C,T,x,f,G,V,Z,Y,H,W,z=(H=q,W=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}(),function(){var t,e=(0,m.Z)(H);if(W){var a=(0,m.Z)(this).constructor;t=Reflect.construct(e,arguments,a)}else t=e.apply(this,arguments);return(0,o.Z)(this,t)});function q(t){var e;return(0,n.Z)(this,q),console.log("1 - "+g()(new Date).format("YYYY-MM-DD HH:mm:ss SSS")),(e=z.call(this,t)).state={underPrice:0,isItemGrpForOrginsValid:!1,isItemGrpForMinMaxAccess:!1,isTaxSugar:!1},e.core=h.Z.instance.core,e.prmObj=e.param.filter({TYPE:1,USERS:e.user.CODE}),e.itemsObj=new p.gn,e.itemsPriceSupply=new p.oQ,e.itemsPriceLogObj=new p._7,e.salesPriceLogObj=new j.$A,e.salesPriceLogObj.selectCmd={query:"SELECT * FROM [ITEM_PRICE_LOG_VW_01] WHERE ITEM_GUID = @ITEM_GUID AND TYPE = 0 ORDER BY LDATE DESC ",param:["ITEM_GUID:string|50"]},e.salesContractObj=new j.$A,e.salesContractObj.selectCmd={query:"SELECT * FROM [SALES_CONTRACT_Vw_01] WHERE ITEM = @ITEM_GUID AND TYPE = 1 AND START_DATE <= GETDATE() AND FINISH_DATE >= GETDATE()   ORDER BY LDATE DESC ",param:["ITEM_GUID:string|50"]},e.otherShopObj=new j.$A,e.otherShopObj.selectCmd={query:"SELECT  (CONVERT(NVARCHAR, OTHER_SHOP.UPDATE_DATE, 104) + ' ' + CONVERT(NVARCHAR, OTHER_SHOP.UPDATE_DATE, 24)) AS DATE, OTHER_SHOP.CODE, OTHER_SHOP.NAME, MAX(OTHER_SHOP.BARCODE) AS BARCODE, OTHER_SHOP.MULTICODE, OTHER_SHOP.SALE_PRICE, OTHER_SHOP.CUSTOMER, OTHER_SHOP.CUSTOMER_PRICE, OTHER_SHOP.SHOP FROM ITEM_BARCODE_VW_01 AS BARCODE INNER JOIN OTHER_SHOP_ITEMS AS OTHER_SHOP ON BARCODE.BARCODE = OTHER_SHOP.BARCODE WHERE BARCODE.ITEM_GUID = @ITEM_GUID GROUP BY OTHER_SHOP.CODE,OTHER_SHOP.NAME, OTHER_SHOP.MULTICODE, OTHER_SHOP.SALE_PRICE, OTHER_SHOP.CUSTOMER_PRICE, OTHER_SHOP.CUSTOMER,OTHER_SHOP.SHOP,OTHER_SHOP.UPDATE_DATE ",param:["ITEM_GUID:string|50"]},e.prevCode="",e.tabIndex=t.data.tabkey,e._onItemRendered=e._onItemRendered.bind((0,l.Z)(e)),e.taxSugarCalculate=e.taxSugarCalculate.bind((0,l.Z)(e)),e._cellRoleRender=e._cellRoleRender.bind((0,l.Z)(e)),e.extraCostData=new j.$A,e}return(0,s.Z)(q,[{key:"componentDidMount",value:(Y=(0,r.Z)(E().mark((function t(){return E().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,this.core.util.waitUntil(0);case 2:if(void 0===this.pagePrm){t.next=8;break}return t.next=5,this.init();case 5:this.getItem(this.pagePrm.CODE),t.next=9;break;case 8:this.init();case 9:console.log("2 - "+g()(new Date).format("YYYY-MM-DD HH:mm:ss SSS"));case 10:case"end":return t.stop()}}),t,this)}))),function(){return Y.apply(this,arguments)})},{key:"init",value:(Z=(0,r.Z)(E().mark((function t(){var e,a,i,r,n=this;return E().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return this.prevCode="",this.itemsObj.clearAll(),this.itemsPriceSupply.clearAll(),this.itemsPriceLogObj.clearAll(),this.salesPriceLogObj.clear(),this.salesContractObj.clear(),this.otherShopObj.clear(),this.itemsObj.ds.on("onAddRow",(function(t,e){"new"==e.stat&&(""!=n.prevCode?(n.btnNew.setState({disabled:!0}),n.btnBack.setState({disabled:!1})):(n.btnNew.setState({disabled:!1}),n.btnBack.setState({disabled:!1})),n.btnSave.setState({disabled:!1}),n.btnDelete.setState({disabled:!1}),n.btnCopy.setState({disabled:!1})),n.underPrice(),n.grossMargin(),n.netMargin(),n.taxSugarValidCheck(),n.taxSugarCalculate()})),this.itemsObj.ds.on("onEdit",(function(t,e){"edit"==e.rowData.stat&&(n.btnBack.setState({disabled:!1}),n.btnNew.setState({disabled:!0}),n.btnSave.setState({disabled:!1}),n.btnDelete.setState({disabled:!1}),n.btnCopy.setState({disabled:!1}),e.rowData.CUSER=n.user.CODE,n.itemsObj.itemMultiCode.dt("ITEM_MULTICODE")[0].CUSER=n.user.CODE),"ITEM_PRICE"!=t&&"ITEM_UNIT"!=t||(n.underPrice(),n.grossMargin(),n.netMargin())})),this.itemsObj.ds.on("onRefresh",(function(t){n.prevCode=n.itemsObj.dt("ITEMS").length>0?n.itemsObj.dt("ITEMS")[0].CODE:"",n.btnBack.setState({disabled:!1}),n.btnNew.setState({disabled:!1}),n.btnSave.setState({disabled:!0}),n.btnDelete.setState({disabled:!1}),n.btnCopy.setState({disabled:!1}),n.underPrice(),n.grossMargin(),n.netMargin()})),this.itemsObj.ds.on("onDelete",(function(t){n.btnBack.setState({disabled:!1}),n.btnNew.setState({disabled:!0}),n.btnSave.setState({disabled:!1}),n.btnDelete.setState({disabled:!1}),n.btnCopy.setState({disabled:!1})})),this.itemsObj.addEmpty(),this.txtRef.value=Math.floor(Date.now()/1e3),this.txtCustomer.value="",this.txtCustomer.displayValue="",this.txtBarcode.readOnly=!0,this.imgFile.value="",e=new p.Ni,t.next=20,e.load();case 20:(a=F({},this.itemsObj.itemUnit.empty)).TYPE=0,a.TYPE_NAME="Ana Birim",a.ITEM_GUID=this.itemsObj.dt()[0].GUID,e.dt(0).length>0&&(a.ID=e.dt(0)[0].ID),(i=F({},this.itemsObj.itemUnit.empty)).TYPE=1,i.TYPE_NAME="Alt Birim",i.ID=this.cmbUnderUnit.value,i.ITEM_GUID=this.itemsObj.dt()[0].GUID,i.FACTOR=0,(r=F({},this.itemsObj.itemBarcode.empty)).ITEM_GUID=this.itemsObj.dt()[0].GUID,this.itemsObj.itemBarcode.addEmpty(r),this.itemsObj.itemUnit.addEmpty(a),this.itemsObj.itemUnit.addEmpty(i),this.itemGrpForOrginsValidCheck(),this.itemGrpForMinMaxAccessCheck(),this.taxSugarValidCheck();case 38:case"end":return t.stop()}}),t,this)}))),function(){return Z.apply(this,arguments)})},{key:"getItem",value:(V=(0,r.Z)(E().mark((function t(e){var a,i;return E().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return console.log("11 - "+g()(new Date).format("YYYY-MM-DD HH:mm:ss SSS")),h.Z.instance.setState({isExecute:!0}),this.itemsObj.clearAll(),this.txtRef.value=Math.floor(Date.now()/1e3),this.txtCustomer.value="",this.txtCustomer.displayValue="",this.txtBarcode.readOnly=!0,this.imgFile.value="",t.next=10,this.itemsObj.load({CODE:e});case 10:return t.next=12,this.itemsPriceSupply.load({ITEM_GUID:this.itemsObj.dt()[0].GUID,TYPE:1});case 12:return t.next=14,this.itemsPriceLogObj.load({ITEM_GUID:this.itemsObj.dt()[0].GUID});case 14:return this.itemsObj.itemMultiCode.dt("ITEM_MULTICODE").length>0&&1==this.itemsObj.itemMultiCode.dt("ITEM_MULTICODE").length?this.txtLastBuyPrice.value=this.itemsObj.itemMultiCode.dt("ITEM_MULTICODE")[0].CUSTOMER_PRICE:this.itemsObj.itemMultiCode.dt("ITEM_MULTICODE").length>0&&(this.txtLastBuyPrice.value=this.itemsObj.itemMultiCode.dt("ITEM_MULTICODE")[1].CUSTOMER_PRICE),this.txtBarcode.readOnly=!0,this.salesPriceLogObj.selectCmd.value=[this.itemsObj.dt()[0].GUID],t.next=19,this.salesPriceLogObj.refresh();case 19:return this.salesContractObj.selectCmd.value=[this.itemsObj.dt()[0].GUID],t.next=22,this.salesContractObj.refresh();case 22:return this.otherShopObj.selectCmd.value=[this.itemsObj.dt()[0].GUID],t.next=25,this.otherShopObj.refresh();case 25:if(this.salesPriceLogObj.length>0&&(this.txtLastSalePrice.value=this.salesPriceLogObj[0].PRICE),h.Z.instance.setState({isExecute:!1}),void 0===this.txtSalePrice){t.next=33;break}return a={query:"SELECT [dbo].[FN_PRICE_SALE](@GUID,1,GETDATE(),'00000000-0000-0000-0000-000000000000') AS PRICE",param:["GUID:string|50"],value:[this.itemsObj.dt()[0].GUID]},t.next=31,this.core.sql.execute(a);case 31:(i=t.sent).result.recordset.length>0?(this.txtSalePrice.value=i.result.recordset[0].PRICE,this.txtSalePrice.setState({value:i.result.recordset[0].PRICE}),console.log(this.txtSalePrice)):(this.txtSalePrice.value=0,this.txtSalePrice.setState({value:0}));case 33:this.prevCode=this.itemsObj.dt("ITEMS").length>0?this.itemsObj.dt("ITEMS")[0].CODE:"",console.log("12 - "+g()(new Date).format("YYYY-MM-DD HH:mm:ss SSS"));case 35:case"end":return t.stop()}}),t,this)}))),function(t){return V.apply(this,arguments)})},{key:"checkItem",value:(G=(0,r.Z)(E().mark((function t(e){var a=this;return E().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",new Promise(function(){var t=(0,r.Z)(E().mark((function t(i){var r;return E().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(""===e){t.next=15;break}return t.next=3,(new p.gn).load({CODE:e});case 3:if(!(t.sent.length>0)){t.next=12;break}return r={id:"msgRef",showTitle:!0,title:a.t("msgRef.title"),showCloseButton:!0,width:"500px",height:"200px",button:[{id:"btn01",caption:a.t("msgRef.btn01"),location:"before"},{id:"btn02",caption:a.t("msgRef.btn02"),location:"after"}],content:u.createElement("div",{style:{textAlign:"center",fontSize:"20px"}},a.t("msgRef.msg"))},t.next=8,(0,B.W)(r);case 8:"btn01"==t.sent?(a.getItem(e),i(2)):i(3),t.next=13;break;case 12:i(1);case 13:t.next=16;break;case 15:i(0);case 16:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()));case 1:case"end":return t.stop()}}),t)}))),function(t){return G.apply(this,arguments)})},{key:"checkBarcode",value:(f=(0,r.Z)(E().mark((function t(e){var a=this;return E().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",new Promise(function(){var t=(0,r.Z)(E().mark((function t(i){var r,n;return E().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(""===e){t.next=15;break}return t.next=3,(new p.Ns).load({BARCODE:e});case 3:if(!((r=t.sent).length>0)){t.next=12;break}return n={id:"msgBarcode",showTitle:!0,title:a.t("msgBarcode.title"),showCloseButton:!0,width:"500px",height:"200px",button:[{id:"btn01",caption:a.t("msgBarcode.btn01"),location:"before"},{id:"btn02",caption:a.t("msgBarcode.btn02"),location:"after"}],content:u.createElement("div",{style:{textAlign:"center",fontSize:"20px"}},a.t("msgBarcode.msg"))},t.next=8,(0,B.W)(n);case 8:"btn01"==t.sent?(a.getItem(r[0].ITEM_CODE),i(2)):i(3),t.next=13;break;case 12:i(1);case 13:t.next=16;break;case 15:i(0);case 16:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()));case 1:case"end":return t.stop()}}),t)}))),function(t){return f.apply(this,arguments)})},{key:"checkMultiCode",value:(x=(0,r.Z)(E().mark((function t(e,a){var i=this;return E().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",new Promise(function(){var t=(0,r.Z)(E().mark((function t(r){var n,s,l;return E().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(""===e){t.next=20;break}return t.next=3,(new p.p6).load({MULTICODE:e,CUSTOMER_CODE:a});case 3:if(!((n=t.sent).length>0)){t.next=12;break}return s={id:"msgCustomer",showTitle:!0,title:i.t("msgCustomer.title"),showCloseButton:!0,width:"500px",height:"200px",button:[{id:"btn01",caption:i.t("msgCustomer.btn01"),location:"before"},{id:"btn02",caption:i.t("msgCustomer.btn02"),location:"after"}],content:u.createElement("div",{style:{textAlign:"center",fontSize:"20px"}},i.t("msgCustomer.msg"))},t.next=8,(0,B.W)(s);case 8:"btn01"==t.sent?(i.getItem(n[0].ITEM_CODE),r(2)):r(3),t.next=18;break;case 12:if(!(i.itemsObj.itemMultiCode.dt().where({CUSTOMER_CODE:a}).length>0)){t.next=17;break}return l={id:"msgCheckCustomerCode",showTitle:!0,title:i.t("msgCheckCustomerCode.title"),showCloseButton:!0,width:"500px",height:"200px",button:[{id:"btn01",caption:i.t("msgCheckCustomerCode.btn01"),location:"after"}],content:u.createElement("div",{style:{textAlign:"center",fontSize:"20px"}},i.t("msgCheckCustomerCode.msg"))},t.next=16,(0,B.W)(l);case 16:r(3);case 17:r(1);case 18:t.next=21;break;case 20:r(0);case 21:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()));case 1:case"end":return t.stop()}}),t)}))),function(t,e){return x.apply(this,arguments)})},{key:"_onItemRendered",value:(T=(0,r.Z)(E().mark((function t(e){var a,i;return E().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,this.core.util.waitUntil(10);case 2:if(e.itemData.title!=this.t("tabTitlePrice")){t.next=7;break}return t.next=5,this.grdPrice.dataRefresh({source:this.itemsObj.itemPrice.dt("ITEM_PRICE")});case 5:case 10:case 15:case 22:case 27:case 32:case 37:case 42:case 48:t.next=60;break;case 7:if(e.itemData.title!=this.t("tabTitleUnit")){t.next=12;break}return t.next=10,this.grdUnit.dataRefresh({source:this.itemsObj.itemUnit.dt("ITEM_UNIT")});case 12:if(e.itemData.title!=this.t("tabTitleBarcode")){t.next=17;break}return t.next=15,this.grdBarcode.dataRefresh({source:this.itemsObj.itemBarcode.dt("ITEM_BARCODE")});case 17:if(e.itemData.title!=this.t("tabTitleCustomer")){t.next=24;break}return t.next=20,this.grdCustomer.dataRefresh({source:this.itemsObj.itemMultiCode.dt("ITEM_MULTICODE")});case 20:return t.next=22,this.grdOtherShop.dataRefresh({source:this.otherShopObj});case 24:if(e.itemData.title!=this.t("tabTitleCustomerPrice")){t.next=29;break}return t.next=27,this.grdCustomerPrice.dataRefresh({source:this.itemsPriceLogObj.dt()});case 29:if(e.itemData.title!=this.t("tabTitleSalesPriceHistory")){t.next=34;break}return t.next=32,this.grdSalesPrice.dataRefresh({source:this.salesPriceLogObj});case 34:if(e.itemData.title!=this.t("tabTitleSalesContract")){t.next=39;break}return t.next=37,this.grdSalesContract.dataRefresh({source:this.salesContractObj});case 39:if(e.itemData.title!=this.t("tabExtraCost")){t.next=44;break}return t.next=42,this.grdExtraCost.dataRefresh({source:this.extraCostData});case 44:if(e.itemData.title!=this.t("tabTitleInfo")){t.next=50;break}return console.log(this.itemsObj.dt()),t.next=48,this.grdItemInfo.dataRefresh({source:this.itemsObj.dt()});case 50:if(e.itemData.title!=this.t("tabTitleOtherShop")){t.next=60;break}return a={query:"SELECT [dbo].[FN_PRICE_SALE](@GUID,1,GETDATE(),'00000000-0000-0000-0000-000000000000') AS PRICE",param:["GUID:string|50"],value:[this.itemsObj.dt()[0].GUID]},t.next=54,this.core.sql.execute(a);case 54:return(i=t.sent).result.recordset.length>0?(this.txtSalePrice.value=i.result.recordset[0].PRICE,this.txtSalePrice.setState({value:i.result.recordset[0].PRICE}),console.log(this.txtSalePrice)):(this.txtSalePrice.value=0,this.txtSalePrice.setState({value:0})),this.txtTabCostPrice.value=this.txtCostPrice.value,this.txtTabCostPrice.setState({value:this.txtCostPrice.value}),t.next=60,this.grdOtherShop.dataRefresh({source:this.otherShopObj});case 60:case"end":return t.stop()}}),t,this)}))),function(t){return T.apply(this,arguments)})},{key:"underPrice",value:function(){if(void 0!==this.itemsObj.itemUnit.dt().find((function(t){return 0==t.TYPE}))){var t=void 0!==this.itemsObj.itemPrice.dt().find((function(t){return 0==t.TYPE&&1==t.QUANTITY}))?this.itemsObj.itemPrice.dt().find((function(t){return 0==t.TYPE&&1==t.QUANTITY})).PRICE:0,e=void 0!==this.itemsObj.itemUnit.dt().find((function(t){return 1==t.TYPE}))?this.itemsObj.itemUnit.dt().find((function(t){return 1==t.TYPE})).FACTOR:0;this.setState({underPrice:(t/e).toFixed(2)})}}},{key:"grossMargin",value:(C=(0,r.Z)(E().mark((function t(){var e,a,i,r;return E().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:for(e=0;e<this.itemsObj.itemPrice.dt().length;e++)a=this.itemsObj.itemPrice.dt()[e].PRICE/(this.itemsObj.dt("ITEMS")[0].VAT/100+1),i=a-this.txtCostPrice.value,r=i/this.txtCostPrice.value*100,this.itemsObj.itemPrice.dt()[e].VAT_EXT=a,this.itemsObj.itemPrice.dt()[e].GROSS_MARGIN=i.toFixed(2)+"€ / %"+r.toFixed(2),this.itemsObj.itemPrice.dt()[e].GROSS_MARGIN_RATE=r.toFixed(2);return t.next=3,this.grdPrice.dataRefresh({source:this.itemsObj.itemPrice.dt("ITEM_PRICE")});case 3:case"end":return t.stop()}}),t,this)}))),function(){return C.apply(this,arguments)})},{key:"netMargin",value:(d=(0,r.Z)(E().mark((function t(){var e,a,i,r;return E().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:for(e=0;e<this.itemsObj.itemPrice.dt().length;e++)a=this.itemsObj.itemPrice.dt()[e].PRICE/(this.itemsObj.dt("ITEMS")[0].VAT/100+1),i=(a-this.txtCostPrice.value)/1.15,r=i/this.txtCostPrice.value*100,this.itemsObj.itemPrice.dt()[e].NET_MARGIN=i.toFixed(2)+"€ / %"+r.toFixed(2),this.itemsObj.itemPrice.dt()[e].NET_MARGIN_RATE=r.toFixed(2);return t.next=3,this.grdPrice.dataRefresh({source:this.itemsObj.itemPrice.dt("ITEM_PRICE")});case 3:case"end":return t.stop()}}),t,this)}))),function(){return d.apply(this,arguments)})},{key:"itemGrpForOrginsValidCheck",value:function(){var t=this,e=this.prmObj.filter({ID:"ItemGrpForOrginsValidation"}).getValue();void 0!==e&&Array.isArray(e)&&void 0!==e.find((function(e){return e==t.cmbItemGrp.value}))?this.setState({isItemGrpForOrginsValid:!0}):this.setState({isItemGrpForOrginsValid:!1})}},{key:"itemGrpForMinMaxAccessCheck",value:function(){var t=this,e=this.prmObj.filter({ID:"ItemGrpForMinMaxAccess"}).getValue();void 0!==e&&Array.isArray(e)&&void 0!==e.find((function(e){return e==t.cmbItemGrp.value}))?this.setState({isItemGrpForMinMaxAccess:!0}):this.setState({isItemGrpForMinMaxAccess:!1})}},{key:"taxSugarValidCheck",value:(i=(0,r.Z)(E().mark((function t(){var e,a,i,r,n=this;return E().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(e=this.prmObj.filter({ID:"taxSugarGroupValidation"}).getValue(),void 0===this.itemsObj.itemMultiCode.dt("ITEM_MULTICODE")[0]||void 0===e||!Array.isArray(e)||void 0===e.find((function(t){return t==n.cmbItemGrp.value}))){t.next=20;break}a=0;case 3:if(!(a<this.itemsObj.itemMultiCode.dt("ITEM_MULTICODE").length)){t.next=16;break}return i={query:"SELECT TAX_SUCRE FROM CUSTOMERS WHERE CODE = @CODE ",param:["CODE:string|50"],value:[this.itemsObj.itemMultiCode.dt("ITEM_MULTICODE")[0].CUSTOMER_CODE]},t.next=7,this.core.sql.execute(i);case 7:if(!((r=t.sent).result.recordset.length>0)){t.next=13;break}if(1!=r.result.recordset[0].TAX_SUCRE){t.next=13;break}return this.setState({isTaxSugar:!0}),this.txtTaxSugar.readOnly=!1,t.abrupt("return");case 13:a++,t.next=3;break;case 16:this.setState({isTaxSugar:!1}),this.txtTaxSugar.readOnly=!0,t.next=22;break;case 20:this.setState({isTaxSugar:!1}),this.txtTaxSugar.readOnly=!0;case 22:case"end":return t.stop()}}),t,this)}))),function(){return i.apply(this,arguments)})},{key:"taxSugarCalculate",value:(a=(0,r.Z)(E().mark((function t(){var e,a,i,r,n,s;return E().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(void 0===this.itemsObj.itemMultiCode.dt("ITEM_MULTICODE")[0]){t.next=16;break}return e={query:"SELECT TAX_SUCRE FROM CUSTOMERS WHERE CODE = @CODE ",param:["CODE:string|50"],value:[this.itemsObj.itemMultiCode.dt("ITEM_MULTICODE")[0].CUSTOMER_CODE]},t.next=4,this.core.sql.execute(e);case 4:if(!((a=t.sent).result.recordset.length>0)){t.next=16;break}if(1!=a.result.recordset[0].TAX_SUCRE){t.next=14;break}return i={query:"SELECT RATE,PRICE FROM TAX_SUGAR_TABLE_VW_01 WHERE MIN_VALUE <= @VALUE AND MAX_VALUE >= @VALUE AND TYPE =0 ",param:["VALUE:float"],value:[this.txtTaxSugar.value]},t.next=10,this.core.sql.execute(i);case 10:(r=t.sent).result.recordset.length>0&&(n=this.txtUnderUnit.value/100,s=n*r.result.recordset[0].PRICE,this.taxSugarPrice=Number(s.toFixed(3)),this.itemsObj.itemMultiCode.dt("ITEM_MULTICODE").length,this.extraCostCalculate()),t.next=16;break;case 14:this.taxSugarPrice=0,this.extraCostCalculate();case 16:case"end":return t.stop()}}),t,this)}))),function(){return a.apply(this,arguments)})},{key:"extraCostCalculate",value:(e=(0,r.Z)(E().mark((function t(){var e,a,i,r,n,s,l,c,o,m,d;return E().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(this.extraCostData.clear(),this.txtTaxSugar.value>0&&(this.extraCostData.where({TYPE_NAME:this.t("clmtaxSugar")}).length>0?this.extraCostData.where({TYPE_NAME:this.t("clmtaxSugar")})[0].PRICE=this.taxSugarPrice:this.extraCostData.push({TYPE_NAME:this.t("clmtaxSugar"),PRICE:this.taxSugarPrice,CUSTOMER:this.itemsObj.itemMultiCode.dt("ITEM_MULTICODE")[0].CUSTOMER_NAME,CUSTOMER_PRICE:this.itemsObj.itemMultiCode.dt("ITEM_MULTICODE")[0].CUSTOMER_PRICE})),!this.sysParam.filter({ID:"onlyBigChar",USERS:this.user.CODE}).getValue().value){t.next=14;break}return e={query:"SELECT TOP 1 DOC_GUID FROM DOC_ITEMS_VW_01 WHERE ITEM = @ITEM AND ISNULL((SELECT TOP 1 ITEM_TYPE FROM DOC_ITEMS WHERE ((DOC_ITEMS.DOC_GUID = DOC_ITEMS_VW_01.DOC_GUID) OR (DOC_ITEMS.DOC_GUID = DOC_ITEMS_VW_01.INVOICE_GUID)) AND ITEM_TYPE = 1),0) = 1 ORDER BY DOC_DATE DESC",param:["ITEM:string|50"],value:[this.itemsObj.dt()[0].GUID]},t.next=6,this.core.sql.execute(e);case 6:if(!((a=t.sent).result.recordset.length>0)){t.next=14;break}return console.log(a.result.recordset[0].DOC_GUID),i={query:"SELECT * FROM DOC_ITEMS_VW_01 WHERE (DOC_GUID = @DOC_GUID OR INVOICE_GUID = @DOC_GUID) OR DOC_GUID IN (SELECT INVOICE_GUID FROM DOC_ITEMS_VW_01 WHERE DOC_GUID = @DOC_GUID)",param:["DOC_GUID:string|50"],value:[a.result.recordset[0].DOC_GUID]},t.next=12,this.core.sql.execute(i);case 12:if((r=t.sent).result.recordset.length>0){for(n=[],s=0;s<r.result.recordset.length;s++)1==r.result.recordset[s].ITEM_TYPE&&n.push(r.result.recordset[s]);for(l=0;l<n.length;l++){for(c=0,o=0;o<r.result.recordset.length;o++)0==r.result.recordset[o].ITEM_TYPE&&(c+=r.result.recordset[o].QUANTITY);m=parseFloat(Number(n[l].AMOUNT/c).toFixed(2)),this.extraCostData.where({DESCRIPTION:n[l].ITEM_NAME}).length>0?(this.extraCostData.where({DESCRIPTION:n[l].ITEM_NAME})[0].PRICE=m,this.extraCostData.where({DESCRIPTION:n[l].ITEM_NAME})[0].CUSTOMER=n[l].OUTPUT_NAME):this.extraCostData.push({TYPE_NAME:this.t("clmInvoiceCost"),DESCRIPTION:n[l].ITEM_NAME,PRICE:m,CUSTOMER:n[l].OUTPUT_NAME,CUSTOMER_PRICE:this.itemsObj.itemMultiCode.dt("ITEM_MULTICODE")[0].CUSTOMER_PRICE})}}case 14:this.extraCostData.length>0?(d=parseFloat(this.extraCostData.sum("PRICE",3)),this.txtTotalExtraCost.setState({value:d}),this.txtCostPrice.value=this.itemsObj.itemMultiCode.dt("ITEM_MULTICODE")[0].CUSTOMER_PRICE+parseFloat(this.extraCostData.sum("PRICE",3))):this.txtTotalExtraCost.setState({value:0}),this.netMargin(),this.grossMargin();case 17:case"end":return t.stop()}}),t,this)}))),function(){return e.apply(this,arguments)})},{key:"_cellRoleRender",value:function(t){var e,a=this;if("CUSTOMER_PRICE_DATE"==t.column.name)return u.createElement(M.ZP,{id:"txtGrdDate"+t.rowIndex,parent:this,simple:!0,readOnly:!0,upper:this.sysParam.filter({ID:"onlyBigChar",USERS:this.user.CODE}).getValue().value,value:t.value,button:[{id:"01",icon:"revert",onClick:(e=(0,r.Z)(E().mark((function e(){var i,r,n,s,l;return E().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a.itemsObj.itemMultiCode.dt("ITEM_MULTICODE")[t.rowIndex].CUSTOMER_PRICE_DATE=g()(new Date).format("DD/MM/YYYY HH:mm:ss"),a.txtCostPrice.value=t.data.CUSTOMER_PRICE,console.log(t),i={query:"UPDATE ITEM_PRICE SET CHANGE_DATE = GETDATE() WHERE GUID =@PRICE_GUID ",param:["PRICE_GUID:string|50"],value:[t.data.CUSTOMER_PRICE_GUID]},e.next=6,a.core.sql.execute(i);case 6:e.sent,r=a.prmObj.filter({ID:"ItemMinPricePercent"}).getValue(),n=t.data.CUSTOMER_PRICE+t.data.CUSTOMER_PRICE*r/100,a.txtMinSalePrice.value=Number(n.toFixed(2)),s=a.prmObj.filter({ID:"ItemMaxPricePercent"}).getValue(),l=t.data.CUSTOMER_PRICE+t.data.CUSTOMER_PRICE*s/100,a.txtMaxSalePrice.value=Number(l.toFixed(2)),a.taxSugarValidCheck();case 14:case"end":return e.stop()}}),e)}))),function(){return e.apply(this,arguments)})}]})}},{key:"render",value:function(){var t,e,a=this;return console.log("3 - "+g()(new Date).format("YYYY-MM-DD HH:mm:ss SSS")),u.createElement(u.Fragment,null,u.createElement(O(),null,u.createElement("div",{className:"row px-2 pt-2"},u.createElement("div",{className:"col-12"},u.createElement(I(),null,u.createElement(P.Item,{location:"after",locateInMenu:"auto"},u.createElement(y.Z,{id:"btnBack",parent:this,icon:"revert",type:"default",onClick:function(){""!=a.prevCode&&a.getItem(a.prevCode)}})),u.createElement(P.Item,{location:"after",locateInMenu:"auto"},u.createElement(y.Z,{id:"btnNew",parent:this,icon:"file",type:"default",onClick:function(){a.init()}})),u.createElement(P.Item,{location:"after",locateInMenu:"auto"},u.createElement(y.Z,{id:"btnSave",parent:this,icon:"floppy",type:"default",validationGroup:"frmItems"+this.tabIndex,onClick:function(){var t=(0,r.Z)(E().mark((function t(e){var i,r,n,s,l;return E().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if("valid"!=e.validationGroup.validate().status){t.next=34;break}if(void 0!==a.itemsObj.itemBarcode.dt()[0]&&""==a.itemsObj.itemBarcode.dt()[0].BARCODE&&a.itemsObj.itemBarcode.clearAll(),void 0===(i=a.prmObj.filter({ID:"ItemGrpForNotPriceSave"}).getValue())||!Array.isArray(i)||void 0===i.find((function(t){return t==a.cmbItemGrp.value}))){t.next=6;break}t.next=11;break;case 6:if(0!=a.itemsObj.dt("ITEM_PRICE").length){t.next=11;break}return r={id:"msgPriceSave",showTitle:!0,title:a.t("msgPriceSave.title"),showCloseButton:!0,width:"500px",height:"200px",button:[{id:"btn01",caption:a.t("msgPriceSave.btn01"),location:"after"}],content:u.createElement("div",{style:{textAlign:"center",fontSize:"20px"}},a.t("msgPriceSave.msg"))},t.next=10,(0,B.W)(r);case 10:return t.abrupt("return");case 11:return n={id:"msgSave",showTitle:!0,title:a.t("msgSave.title"),showCloseButton:!0,width:"500px",height:"200px",button:[{id:"btn01",caption:a.t("msgSave.btn01"),location:"before"},{id:"btn02",caption:a.t("msgSave.btn02"),location:"after"}],content:u.createElement("div",{style:{textAlign:"center",fontSize:"20px"}},a.t("msgSave.msg"))},t.next=14,(0,B.W)(n);case 14:if("btn01"!=t.sent){t.next=32;break}return s={id:"msgSaveResult",showTitle:!0,title:a.t("msgSave.title"),showCloseButton:!0,width:"500px",height:"200px",button:[{id:"btn01",caption:a.t("msgSave.btn01"),location:"after"}]},t.next=19,a.itemsObj.save();case 19:if(t.t0=t.sent,0!=t.t0){t.next=29;break}return s.content=u.createElement("div",{style:{textAlign:"center",fontSize:"20px",color:"green"}},a.t("msgSaveResult.msgSuccess")),t.next=24,(0,B.W)(s);case 24:a.btnSave.setState({disabled:!0}),a.btnNew.setState({disabled:!1}),a.getItem(a.itemsObj.dt()[0].CODE),t.next=32;break;case 29:return s.content=u.createElement("div",{style:{textAlign:"center",fontSize:"20px",color:"red"}},a.t("msgSaveResult.msgFailed")),t.next=32,(0,B.W)(s);case 32:t.next=37;break;case 34:return l={id:"msgSaveValid",showTitle:!0,title:a.t("msgSaveValid.title"),showCloseButton:!0,width:"500px",height:"200px",button:[{id:"btn01",caption:a.t("msgSaveValid.btn01"),location:"after"}],content:u.createElement("div",{style:{textAlign:"center",fontSize:"20px"}},a.t("msgSaveValid.msg"))},t.next=37,(0,B.W)(l);case 37:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()})),u.createElement(P.Item,{location:"after",locateInMenu:"auto"},u.createElement(y.Z,{id:"btnDelete",parent:this,icon:"trash",type:"default",onClick:(0,r.Z)(E().mark((function t(){var e,i,r,n;return E().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return e={query:"SELECT TOP 1 * FROM POS_SALE_VW_01 WHERE ITEM_GUID = @CODE ",param:["CODE:string|50"],value:[a.itemsObj.dt()[0].GUID]},t.next=3,a.core.sql.execute(e);case 3:if(i=t.sent,console.log(i),!(i.result.recordset.length>0)){t.next=10;break}return r={id:"msgNotDelete",showTitle:!0,title:a.t("msgNotDelete.title"),showCloseButton:!0,width:"500px",height:"200px",button:[{id:"btn01",caption:a.t("msgNotDelete.btn01"),location:"after"}],content:u.createElement("div",{style:{textAlign:"center",fontSize:"20px"}},a.t("msgNotDelete.msg"))},t.next=9,(0,B.W)(r);case 9:return t.abrupt("return");case 10:return n={id:"msgDelete",showTitle:!0,title:a.t("msgDelete.title"),showCloseButton:!0,width:"500px",height:"200px",button:[{id:"btn01",caption:a.t("msgDelete.btn01"),location:"before"},{id:"btn02",caption:a.t("msgDelete.btn02"),location:"after"}],content:u.createElement("div",{style:{textAlign:"center",fontSize:"20px"}},a.t("msgDelete.msg"))},t.next=13,(0,B.W)(n);case 13:if("btn01"!=t.sent){t.next=19;break}return a.itemsObj.dt("ITEMS").removeAt(0),t.next=18,a.itemsObj.dt("ITEMS").delete();case 18:a.init();case 19:case"end":return t.stop()}}),t)})))})),u.createElement(P.Item,{location:"after",locateInMenu:"auto"},u.createElement(y.Z,{id:"btnCopy",parent:this,icon:"copy",type:"default",onClick:(0,r.Z)(E().mark((function t(){var e,i,r,n,s;return E().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return e=F({},a.itemsObj.dt()[0]),a.itemsObj.clearAll(),a.txtRef.value=Math.floor(Date.now()/1e3),a.txtCustomer.value="",a.txtCustomer.displayValue="",a.txtBarcode.displayValue="",a.txtBarcode.value="",a.txtBarcode.readOnly=!0,a.imgFile.value="",a.itemsPriceSupply.clearAll(),a.itemsPriceLogObj.clearAll(),a.salesPriceLogObj.clear(),a.salesContractObj.clear(),a.otherShopObj.clear(),a.core.util.waitUntil(0),a.itemsObj.addEmpty(),a.itemsObj.dt()[0].VAT=e.VAT,a.itemsObj.dt()[0].NAME=e.NAME,a.itemsObj.dt()[0].MAIN_GRP=e.MAIN_GRP,a.itemsObj.dt()[0].TYPE=e.TYPE,a.itemsObj.dt()[0].CODE=Math.floor(Date.now()/1e3),a.itemsObj.dt()[0].WEIGHING=e.WEIGHING,a.itemsObj.dt()[0].SALE_JOIN_LINE=e.SALE_JOIN_LINE,a.itemsObj.dt()[0].TICKET_REST=e.TICKET_REST,a.itemsObj.dt()[0].SNAME=e.SNAME,i=new p.Ni,t.next=28,i.load();case 28:(r=F({},a.itemsObj.itemUnit.empty)).TYPE=0,r.TYPE_NAME="Ana Birim",r.ITEM_GUID=a.itemsObj.dt()[0].GUID,i.dt(0).length>0&&(r.ID=i.dt(0)[0].ID),(n=F({},a.itemsObj.itemUnit.empty)).TYPE=1,n.TYPE_NAME="Alt Birim",n.ID=a.cmbUnderUnit.value,n.ITEM_GUID=a.itemsObj.dt()[0].GUID,n.FACTOR=0,(s=F({},a.itemsObj.itemBarcode.empty)).ITEM_GUID=a.itemsObj.dt()[0].GUID,a.itemsObj.itemBarcode.addEmpty(s),a.itemsObj.itemUnit.addEmpty(r),a.itemsObj.itemUnit.addEmpty(n),a.itemGrpForOrginsValidCheck(),a.itemGrpForMinMaxAccessCheck(),a.taxSugarValidCheck();case 46:case"end":return t.stop()}}),t)})))})),u.createElement(P.Item,{location:"after",locateInMenu:"auto"},u.createElement(y.Z,{id:"btnAnalysis",parent:this,icon:"chart",type:"default",onClick:(0,r.Z)(E().mark((function t(){var e,i;return E().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return h.Z.instance.setState({isExecute:!0}),a.dtFirstAnalysis.value=g()(new Date),a.dtLastAnalysis.value=g()(new Date),e={query:"SELECT ISNULL(SUM(QUANTITY),0) AS QUANTITY,'BUGÜN' AS DOC_DATE FROM POS_SALE_VW_01 WHERE ITEM_CODE = @CODE  AND DOC_DATE =  CONVERT(NVARCHAR,GETDATE(),112) GROUP BY ITEM_CODE UNION ALL SELECT ISNULL(SUM(QUANTITY),0) AS QUANTITY,'DÜN' AS DOC_DATE FROM POS_SALE_VW_01 WHERE ITEM_CODE = @CODE  AND DOC_DATE =  CONVERT(NVARCHAR,GETDATE()-1,112) GROUP BY ITEM_CODE  UNION ALL SELECT ISNULL(SUM(QUANTITY),0) AS QUANTITY,'BU HAFTA' AS DOC_DATE FROM POS_SALE_VW_01 WHERE ITEM_CODE = @CODE AND DOC_DATE >=  dateadd(day, 2-datepart(dw, getdate()), CONVERT(NVARCHAR,getdate(),112)) AND DOC_DATE <=CONVERT(NVARCHAR,GETDATE(),112) GROUP BY ITEM_CODE  UNION ALL SELECT ISNULL(SUM(QUANTITY),0) AS QUANTITY,'BU AY' AS DOC_DATE FROM POS_SALE_VW_01 WHERE ITEM_CODE = @CODE  AND DOC_DATE >=  dateadd(day, 1-datepart(dd, getdate()), CONVERT(NVARCHAR,getdate(),112)) AND DOC_DATE <=CONVERT(NVARCHAR,GETDATE(),112) GROUP BY DOC_DATE,ITEM_CODE  UNION ALL SELECT ISNULL(SUM(QUANTITY),0) AS QUANTITY,'BU AY' AS DOC_DATE FROM POS_SALE_VW_01 WHERE ITEM_CODE = @CODE  AND DOC_DATE >=  dateadd(day, 1-datepart(dd, getdate()), CONVERT(NVARCHAR,getdate(),112)) AND DOC_DATE <=CONVERT(NVARCHAR,GETDATE(),112) GROUP BY DOC_DATE,ITEM_CODE  UNION ALL SELECT ISNULL(SUM(QUANTITY),0) AS QUANTITY,'BU YIL' AS DOC_DATE FROM POS_SALE_VW_01 WHERE ITEM_CODE = @CODE  AND DOC_DATE >=  dateadd(day, 1-datepart(dy, getdate()), CONVERT(NVARCHAR,getdate(),112)) AND DOC_DATE <=CONVERT(NVARCHAR,GETDATE(),112) GROUP BY DOC_DATE,ITEM_CODE  ",param:["CODE:string|50"],value:[a.txtRef.value]},t.next=6,a.core.sql.execute(e);case 6:(i=t.sent).result.recordset.length>0?a.setState({dataSource:i.result.recordset}):a.setState({dataRefresh:{0:{QUANTITY:0,DOC_DATE:""}}}),h.Z.instance.setState({isExecute:!1}),a.popAnalysis.show();case 10:case"end":return t.stop()}}),t)})))})),u.createElement(P.Item,{location:"after",locateInMenu:"auto",widget:"dxButton",options:{type:"default",icon:"clear",onClick:(e=(0,r.Z)(E().mark((function t(){var e;return E().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return e={id:"msgClose",showTitle:!0,title:a.lang.t("msgWarning"),showCloseButton:!0,width:"500px",height:"200px",button:[{id:"btn01",caption:a.lang.t("btnYes"),location:"before"},{id:"btn02",caption:a.lang.t("btnNo"),location:"after"}],content:u.createElement("div",{style:{textAlign:"center",fontSize:"20px"}},a.lang.t("msgClose"))},t.next=3,(0,B.W)(e);case 3:"btn01"==t.sent&&h.Z.instance.panel.closePage();case 5:case"end":return t.stop()}}),t)}))),function(){return e.apply(this,arguments)})}})))),u.createElement("div",{className:"row px-2 pt-2"},u.createElement("div",{className:"col-9"},u.createElement(S(),{colCount:2,id:"frmItems"+this.tabIndex},u.createElement(P.Item,null,u.createElement(P.Label,{text:this.t("txtRef"),alignment:"right"}),u.createElement(M.ZP,{id:"txtRef",parent:this,simple:!0,tabIndex:this.tabIndex,dt:{data:this.itemsObj.dt("ITEMS"),field:"CODE"},upper:this.sysParam.filter({ID:"onlyBigChar",USERS:this.user.CODE}).getValue().value,button:[{id:"01",icon:"more",onClick:function(){a.pg_txtRef.show(),a.pg_txtRef.onClick=function(t){t.length>0&&a.getItem(t[0].CODE)}}},{id:"02",icon:"arrowdown",onClick:function(){a.txtRef.value=Math.floor(Date.now()/1e3)}}],onChange:(0,r.Z)(E().mark((function t(){return E().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,a.checkItem(a.txtRef.value);case 2:3==t.sent&&(a.txtRef.value="");case 4:case"end":return t.stop()}}),t)}))).bind(this),param:this.param.filter({ELEMENT:"txtRef",USERS:this.user.CODE}),access:this.access.filter({ELEMENT:"txtRef",USERS:this.user.CODE}),selectAll:!0}),u.createElement(N.Z,{id:"pg_txtRef",parent:this,container:"#root",visible:!1,position:{of:"#root"},showTitle:!0,showBorders:!0,width:"90%",height:"90%",title:this.t("pg_txtRef.title"),search:!0,data:{source:{select:{query:"SELECT GUID,CODE,NAME,STATUS FROM ITEMS_VW_01 WHERE UPPER(CODE) LIKE UPPER(@VAL) OR UPPER(NAME) LIKE UPPER(@VAL)",param:["VAL:string|50"]},sql:this.core.sql}},button:[{id:"tst",icon:"more",onClick:function(){console.log(1111)}}]},u.createElement(_.sg,{dataField:"CODE",caption:this.t("pg_txtRef.clmCode"),width:"20%"}),u.createElement(_.sg,{dataField:"NAME",caption:this.t("pg_txtRef.clmName"),width:"70%",defaultSortOrder:"asc"}),u.createElement(_.sg,{dataField:"STATUS",caption:this.t("pg_txtRef.clmStatus"),width:"10%"}))),u.createElement(P.Item,null,u.createElement(P.Label,{text:this.t("cmbItemGrp"),alignment:"right"}),u.createElement(U.ZP,{simple:!0,parent:this,id:"cmbItemGrp",tabIndex:this.tabIndex,dt:{data:this.itemsObj.dt("ITEMS"),field:"MAIN_GRP",display:"MAIN_GRP_NAME"},displayExpr:"NAME",valueExpr:"CODE",value:"",searchEnabled:!0,showClearButton:!0,pageSize:50,notRefresh:!0,param:this.param.filter({ELEMENT:"cmbItemGrp",USERS:this.user.CODE}),access:this.access.filter({ELEMENT:"cmbItemGrp",USERS:this.user.CODE}),data:{source:{select:{query:"SELECT CODE,NAME FROM ITEM_GROUP ORDER BY NAME ASC"},sql:this.core.sql}},onValueChanged:function(t){a.itemGrpForOrginsValidCheck(),a.taxSugarValidCheck(),a.itemGrpForMinMaxAccessCheck()}})),u.createElement(P.Item,null,u.createElement(P.Label,{text:this.t("txtCustomer"),alignment:"right"}),u.createElement(M.ZP,{id:"txtCustomer",parent:this,simple:!0,upper:this.sysParam.filter({ID:"onlyBigChar",USERS:this.user.CODE}).getValue().value,dt:{data:this.itemsObj.dt("ITEM_MULTICODE"),field:"CUSTOMER_NAME",display:"CUSTOMER_NAME"},readOnly:!0,button:[{id:"001",icon:"add",onClick:function(){a.txtPopCustomerCode.value="",a.txtPopCustomerName.value="",a.txtPopCustomerItemCode.value="",a.txtPopCustomerPrice.value=0,a.popCustomer.show(),setTimeout((0,r.Z)(E().mark((function t(){return E().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:a.txtPopCustomerCode.focus();case 1:case"end":return t.stop()}}),t)}))),600)}}],param:this.param.filter({ELEMENT:"txtCustomer",USERS:this.user.CODE}),access:this.access.filter({ELEMENT:"txtCustomer",USERS:this.user.CODE})})),u.createElement(P.Item,null,u.createElement(P.Label,{text:this.t("cmbItemGenus"),alignment:"right"}),u.createElement(U.ZP,{simple:!0,parent:this,id:"cmbItemGenus",dt:{data:this.itemsObj.dt("ITEMS"),field:"TYPE"},displayExpr:"VALUE",valueExpr:"ID",data:{source:[{ID:"0",VALUE:this.t("cmbItemGenusData.item")},{ID:"1",VALUE:this.t("cmbItemGenusData.service")},{ID:"2",VALUE:this.t("cmbItemGenusData.deposit")}]},param:this.param.filter({ELEMENT:"cmbItemGenus",USERS:this.user.CODE}),access:this.access.filter({ELEMENT:"cmbItemGenus",USERS:this.user.CODE})})),u.createElement(P.Item,null,u.createElement(P.Label,{text:this.t("txtBarcode"),alignment:"right"}),u.createElement(M.ZP,{id:"txtBarcode",parent:this,simple:!0,upper:this.sysParam.filter({ID:"onlyBigChar",USERS:this.user.CODE}).getValue().value,dt:{data:this.itemsObj.dt("ITEM_BARCODE"),field:"BARCODE"},button:[{id:"001",icon:"add",onClick:(t=(0,r.Z)(E().mark((function t(){return E().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,a.cmbPopBarUnit.dataRefresh({source:a.itemsObj.dt("ITEM_UNIT").where({TYPE:0})});case 2:a.txtPopBarcode.value="",a.cmbPopBarType.value="0",a.cmbPopBarUnit.value=a.itemsObj.dt("ITEM_UNIT").where({TYPE:0}).length>0?a.itemsObj.dt("ITEM_UNIT").where({TYPE:0})[0].GUID:"",a.popBarcode.show(),setTimeout((0,r.Z)(E().mark((function t(){return E().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:a.txtPopBarcode.focus();case 1:case"end":return t.stop()}}),t)}))),600);case 7:case"end":return t.stop()}}),t)}))),function(){return t.apply(this,arguments)})}],onChange:(0,r.Z)(E().mark((function t(){return E().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,a.checkBarcode(a.txtBarcode.value);case 2:case"end":return t.stop()}}),t)}))).bind(this),param:this.param.filter({ELEMENT:"txtBarcode",USERS:this.user.CODE}),access:this.access.filter({ELEMENT:"txtBarcode",USERS:this.user.CODE})})),u.createElement(P.Item,null,u.createElement(P.Label,{text:this.t("cmbTax"),alignment:"right"}),u.createElement(U.ZP,{simple:!0,parent:this,id:"cmbTax",height:"fit-content",dt:{data:this.itemsObj.dt("ITEMS"),field:"VAT"},displayExpr:"VAT",valueExpr:"VAT",data:{source:{select:{query:"SELECT VAT FROM VAT ORDER BY ID ASC"},sql:this.core.sql}},param:this.param.filter({ELEMENT:"cmbTax",USERS:this.user.CODE}),access:this.access.filter({ELEMENT:"cmbTax",USERS:this.user.CODE})})),u.createElement(P.Item,null,u.createElement(P.Label,{text:this.t("cmbMainUnit"),alignment:"right"}),u.createElement("div",{className:"row"},u.createElement("div",{className:"col-4 pe-0"},u.createElement(U.ZP,{simple:!0,parent:this,id:"cmbMainUnit",height:"fit-content",dt:{data:this.itemsObj.dt("ITEM_UNIT"),field:"ID",display:"NAME",filter:{TYPE:0}},style:{borderTopRightRadius:"0px",borderBottomRightRadius:"0px"},displayExpr:"NAME",valueExpr:"ID",data:{source:{select:{query:"SELECT ID,NAME,SYMBOL FROM UNIT ORDER BY ID ASC"},sql:this.core.sql}},param:this.param.filter({ELEMENT:"cmbMainUnit",USERS:this.user.CODE}),access:this.access.filter({ELEMENT:"cmbMainUnit",USERS:this.user.CODE})})),u.createElement("div",{className:"col-5 ps-0"},u.createElement(v.ZP,{id:"txtMainUnit",parent:this,simple:!0,tabIndex:this.tabIndex,style:{borderTopLeftRadius:"0px",borderBottomLeftRadius:"0px"},showSpinButtons:!0,step:1,format:"###.000",dt:{data:this.itemsObj.dt("ITEM_UNIT"),field:"FACTOR",filter:{TYPE:0}},param:this.param.filter({ELEMENT:"txtMainUnit",USERS:this.user.CODE}),access:this.access.filter({ELEMENT:"txtMainUnit",USERS:this.user.CODE})})))),u.createElement(P.Item,null,u.createElement(P.Label,{text:this.t("cmbOrigin"),alignment:"right"}),u.createElement(U.ZP,{simple:!0,parent:this,id:"cmbOrigin",dt:{data:this.itemsObj.dt("ITEMS"),field:"ORGINS",display:"ORGINS_NAME"},displayExpr:"NAME",valueExpr:"CODE",value:"",searchEnabled:!0,showClearButton:!0,param:this.param.filter({ELEMENT:"cmbOrigin",USERS:this.user.CODE}),access:this.access.filter({ELEMENT:"cmbOrigin",USERS:this.user.CODE}),data:{source:{select:{query:"SELECT CODE,NAME FROM COUNTRY ORDER BY CODE ASC"},sql:this.core.sql}},onValueChanged:function(t){a.btnSave.setState({disabled:!1}),a.taxSugarValidCheck()}},u.createElement(M.cX,{validationGroup:this.state.isItemGrpForOrginsValid?"frmItems"+this.tabIndex:""},u.createElement(M.n2,{message:"Menşei boş geçemezsiniz !"})))),u.createElement(P.Item,null,u.createElement(P.Label,{text:this.t("cmbUnderUnit"),alignment:"right"}),u.createElement("div",{className:"row"},u.createElement("div",{className:"col-4 pe-0"},u.createElement(U.ZP,{simple:!0,parent:this,id:"cmbUnderUnit",height:"fit-content",dt:{data:this.itemsObj.dt("ITEM_UNIT"),field:"ID",display:"NAME",filter:{TYPE:1}},style:{borderTopRightRadius:"0px",borderBottomRightRadius:"0px"},displayExpr:"NAME",valueExpr:"ID",data:{source:{select:{query:"SELECT ID,NAME,SYMBOL FROM UNIT ORDER BY ID ASC"},sql:this.core.sql}},param:this.param.filter({ELEMENT:"cmbUnderUnit",USERS:this.user.CODE}),access:this.access.filter({ELEMENT:"cmbUnderUnit",USERS:this.user.CODE})})),u.createElement("div",{className:"col-5 ps-0"},u.createElement(v.ZP,{id:"txtUnderUnit",parent:this,simple:!0,tabIndex:this.tabIndex,style:{borderTopLeftRadius:"0px",borderBottomLeftRadius:"0px"},showSpinButtons:!0,step:.1,format:"##0.000",dt:{id:"txtUnderUnit",data:this.itemsObj.dt("ITEM_UNIT"),field:"FACTOR",filter:{TYPE:1}},param:this.param.filter({ELEMENT:"txtUnderUnit",USERS:this.user.CODE}),access:this.access.filter({ELEMENT:"txtUnderUnit",USERS:this.user.CODE})})),u.createElement("div",{className:"col-3 pe-0"},u.createElement("div",{className:"dx-field-label",style:{width:"100%"}},this.state.underPrice," €")))),u.createElement(P.Item,null,u.createElement(P.Label,{text:this.t("txtTaxSugar"),alignment:"right"}),u.createElement(v.ZP,{id:"txtTaxSugar",parent:this,simple:!0,readOnly:!0,showSpinButtons:!0,step:1,format:"###.00",style:{borderTopLeftRadius:"0px",borderBottomLeftRadius:"0px"},dt:{data:this.itemsObj.dt("ITEMS"),field:"SUGAR_RATE"},param:this.param.filter({ELEMENT:"txtTaxSugar",USERS:this.user.CODE}),access:this.access.filter({ELEMENT:"txtTaxSugar",USERS:this.user.CODE}),onChange:function(){a.taxSugarCalculate()}},u.createElement(M.cX,{validationGroup:this.state.isTaxSugar?"frmItems"+this.tabIndex:""},u.createElement(M.Qh,{min:4.001,message:"Şeker oranını doğru giriniz !"})))),u.createElement(P.Item,null,u.createElement(P.Label,{text:this.t("txtItemName"),alignment:"right"}),u.createElement(M.ZP,{id:"txtItemName",parent:this,simple:!0,dt:{data:this.itemsObj.dt("ITEMS"),field:"NAME"},param:this.param.filter({ELEMENT:"txtItemName",USERS:this.user.CODE}),access:this.access.filter({ELEMENT:"txtItemName",USERS:this.user.CODE}),upper:this.sysParam.filter({ID:"onlyBigChar",USERS:this.user.CODE}).getValue().value,onValueChanged:function(t){t.value.length<=32&&(a.txtShortName.value=t.value.toUpperCase())}},u.createElement(M.cX,{validationGroup:"frmItems"+this.tabIndex},u.createElement(M.n2,{message:"Adı boş geçemezsiniz !"})))),u.createElement(P.Item,null,u.createElement(P.Label,{text:this.t("txtShortName"),alignment:"right"}),u.createElement(M.ZP,{id:"txtShortName",parent:this,simple:!0,dt:{data:this.itemsObj.dt("ITEMS"),field:"SNAME"},upper:this.sysParam.filter({ID:"onlyBigChar",USERS:this.user.CODE}).getValue().value,maxLength:32,param:this.param.filter({ELEMENT:"txtShortName",USERS:this.user.CODE}),access:this.access.filter({ELEMENT:"txtShortName",USERS:this.user.CODE})})))),u.createElement("div",{className:"col-3"},u.createElement("div",{className:"row"},u.createElement("div",{className:"col-12"},u.createElement(k.Z,{id:"imgFile",parent:this,dt:{data:this.itemsObj.dt("ITEM_IMAGE"),field:"IMAGE"},onValueChanged:function(t){0==a.itemsObj.dt("ITEM_IMAGE").length&&a.itemsObj.itemImage.addEmpty(),a.itemsObj.dt("ITEM_IMAGE")[0].CUSER=a.core.auth.data.CODE,a.itemsObj.dt("ITEM_IMAGE")[0].ITEM_GUID=a.itemsObj.dt()[0].GUID,a.itemsObj.dt("ITEM_IMAGE")[0].IMAGE=t}}))),u.createElement("div",{className:"row pt-2"},u.createElement("div",{className:"col-6"},u.createElement(y.Z,{id:"btnNewImg",parent:this,icon:"add",type:"default",width:"100%"})),u.createElement("div",{className:"col-6"},u.createElement(y.Z,{id:"btnImgDel",parent:this,icon:"trash",type:"default",width:"100%",onClick:function(){""!=a.prevCode&&(a.itemsObj.dt("ITEM_IMAGE")[0].IMAGE="")}}))))),u.createElement("div",{className:"row px-2 pt-2"},u.createElement("div",{className:"col-12"},u.createElement(S(),{colCount:6,id:"frmChkBox"+this.tabIndex},u.createElement(P.Item,null,u.createElement(P.Label,{text:this.t("chkActive"),alignment:"right"}),u.createElement(A.ZP,{id:"chkActive",parent:this,defaultValue:!0,dt:{data:this.itemsObj.dt("ITEMS"),field:"STATUS"},param:this.param.filter({ELEMENT:"chkActive",USERS:this.user.CODE}),access:this.access.filter({ELEMENT:"chkActive",USERS:this.user.CODE})})),u.createElement(P.Item,null,u.createElement(P.Label,{text:this.t("chkCaseWeighed"),alignment:"right"}),u.createElement(A.ZP,{id:"chkCaseWeighed",parent:this,defaultValue:!1,dt:{data:this.itemsObj.dt("ITEMS"),field:"WEIGHING"},param:this.param.filter({ELEMENT:"chkCaseWeighed",USERS:this.user.CODE}),access:this.access.filter({ELEMENT:"chkCaseWeighed",USERS:this.user.CODE})})),u.createElement(P.Item,null,u.createElement(P.Label,{text:this.t("chkLineMerged"),alignment:"right"}),u.createElement(A.ZP,{id:"chkLineMerged",parent:this,defaultValue:!1,dt:{data:this.itemsObj.dt("ITEMS"),field:"SALE_JOIN_LINE"}})),u.createElement(P.Item,null,u.createElement(P.Label,{text:this.t("chkTicketRest"),alignment:"right"}),u.createElement(A.ZP,{id:"chkTicketRest",parent:this,defaultValue:!1,dt:{data:this.itemsObj.dt("ITEMS"),field:"TICKET_REST"},param:this.param.filter({ELEMENT:"chkTicketRest",USERS:this.user.CODE}),access:this.access.filter({ELEMENT:"chkTicketRest",USERS:this.user.CODE})}))))),u.createElement("div",{className:"row px-2 pt-2"},u.createElement("div",{className:"col-12"},u.createElement(b(),{height:"100%",onItemRendered:this._onItemRendered},u.createElement(P.Item,{title:this.t("tabTitlePrice")},u.createElement("div",{className:"row px-2 py-2"},u.createElement("div",{className:"col-1"},u.createElement(v.ZP,{id:"txtCostPrice",parent:this,title:this.t("txtCostPrice"),titleAlign:"top",tabIndex:this.tabIndex,dt:{data:this.itemsObj.dt("ITEMS"),field:"COST_PRICE"},readOnly:!0,format:"#,##0.000",step:.1,param:this.param.filter({ELEMENT:"txtCostPrice",USERS:this.user.CODE}),access:this.access.filter({ELEMENT:"txtCostPrice",USERS:this.user.CODE})})),u.createElement("div",{className:"col-1"},u.createElement(v.ZP,{id:"txtTotalExtraCost",parent:this,title:this.t("txtTotalExtraCost"),titleAlign:"top",tabIndex:this.tabIndex,format:"#,##0.000",readOnly:!0,param:this.param.filter({ELEMENT:"txtTotalExtraCost",USERS:this.user.CODE}),access:this.access.filter({ELEMENT:"txtTotalExtraCost",USERS:this.user.CODE})})),u.createElement("div",{className:"col-1"},u.createElement(v.ZP,{id:"txtMinSalePrice",parent:this,title:this.t("txtMinSalePrice"),titleAlign:"top",tabIndex:this.tabIndex,dt:{data:this.itemsObj.dt("ITEMS"),field:"MIN_PRICE"},format:"#,##0.000",step:.1,editable:this.state.isItemGrpForMinMaxAccess,param:this.param.filter({ELEMENT:"txtMinSalePrice",USERS:this.user.CODE}),access:this.access.filter({ELEMENT:"txtMinSalePrice",USERS:this.user.CODE})})),u.createElement("div",{className:"col-1"},u.createElement(v.ZP,{id:"txtMaxSalePrice",parent:this,title:this.t("txtMaxSalePrice"),titleAlign:"top",tabIndex:this.tabIndex,dt:{data:this.itemsObj.dt("ITEMS"),field:"MAX_PRICE"},format:"#,##0.000",step:.1,editable:this.state.isItemGrpForMinMaxAccess,param:this.param.filter({ELEMENT:"txtMaxSalePrice",USERS:this.user.CODE}),access:this.access.filter({ELEMENT:"txtMaxSalePrice",USERS:this.user.CODE})})),u.createElement("div",{className:"col-1"},u.createElement(v.ZP,{id:"txtLastBuyPrice",parent:this,title:this.t("txtLastBuyPrice"),titleAlign:"top",readOnly:!0,format:"#,##0.000",step:.1,param:this.param.filter({ELEMENT:"txtLastBuyPrice",USERS:this.user.CODE}),access:this.access.filter({ELEMENT:"txtLastBuyPrice",USERS:this.user.CODE})})),u.createElement("div",{className:"col-1"},u.createElement(v.ZP,{id:"txtLastSalePrice",parent:this,title:this.t("txtLastSalePrice"),titleAlign:"top",format:"#,##0.000",step:.1,readOnly:!0,param:this.param.filter({ELEMENT:"txtLastSalePrice",USERS:this.user.CODE}),access:this.access.filter({ELEMENT:"txtLastSalePrice",USERS:this.user.CODE})})),u.createElement("div",{className:"col-1 offset-5 py-3"},u.createElement(I(),null,u.createElement(P.Item,{location:"after"},u.createElement(R.Button,{icon:"add",text:this.t("sellPriceAdd"),onClick:function(){a.dtPopPriStartDate.value="1970-01-01",a.dtPopPriEndDate.value="1970-01-01",a.txtPopPriQuantity.value=1,a.txtPopPriPrice.value=0,a.popPrice.show(),setTimeout((0,r.Z)(E().mark((function t(){return E().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:a.txtPopPriPrice.focus();case 1:case"end":return t.stop()}}),t)}))),600)}}))))),u.createElement("div",{className:"row px-2 py-2"},u.createElement("div",{className:"col-12"},u.createElement(_.ZP,{parent:this,id:"grdPrice",showBorders:!0,columnsAutoWidth:!0,allowColumnReordering:!0,allowColumnResizing:!0,height:"100%",width:"100%",dbApply:!1,onCellPrepared:function(t){"data"===t.rowType&&"GROSS_MARGIN"===t.column.dataField&&(t.cellElement.style.color=t.data.GROSS_MARGIN_RATE<30?"red":"blue"),"data"===t.rowType&&"NET_MARGIN"===t.column.dataField&&(t.cellElement.style.color=t.data.NET_MARGIN_RATE<30?"red":"blue")},onRowUpdating:function(){var t=(0,r.Z)(E().mark((function t(e){var i;return E().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(void 0===e.newData.PRICE){t.next=7;break}if(!(a.prmObj.filter({ID:"SalePriceCostCtrl"}).getValue()&&0!=a.txtCostPrice.value&&a.txtCostPrice.value>=e.newData.PRICE)){t.next=7;break}return e.cancel=!0,e.component.cancelEditData(),i={id:"msgCostPriceValid",showTitle:!0,title:a.t("msgCostPriceValid.title"),showCloseButton:!0,width:"500px",height:"200px",button:[{id:"btn01",caption:a.t("msgCostPriceValid.btn01"),location:"after"}],content:u.createElement("div",{style:{textAlign:"center",fontSize:"20px"}},a.t("msgCostPriceValid.msg"))},t.next=7,(0,B.W)(i);case 7:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()},u.createElement(_.Po,{defaultPageSize:6}),u.createElement(_.LO,{mode:"cell",allowUpdating:!0,allowDeleting:!0}),u.createElement(_.sg,{dataField:"TYPE_NAME",caption:this.t("grdPrice.clmType"),allowEditing:!1}),u.createElement(_.sg,{dataField:"DEPOT_NAME",caption:this.t("grdPrice.clmDepot"),allowEditing:!1}),u.createElement(_.sg,{dataField:"CUSTOMER_NAME",caption:this.t("grdPrice.clmCustomerName"),visible:!1,allowEditing:!1}),u.createElement(_.sg,{dataField:"START_DATE",caption:this.t("grdPrice.clmStartDate"),dataType:"date",editorOptions:{value:null},cellRender:function(t){if("1970-01-01"!=g()(t.value).format("YYYY-MM-DD"))return t.text}}),u.createElement(_.sg,{dataField:"FINISH_DATE",caption:this.t("grdPrice.clmFinishDate"),dataType:"date",editorOptions:{value:null},cellRender:function(t){if("1970-01-01"!=g()(t.value).format("YYYY-MM-DD"))return t.text}}),u.createElement(_.sg,{dataField:"QUANTITY",caption:this.t("grdPrice.clmQuantity")}),u.createElement(_.sg,{dataField:"VAT_EXT",caption:this.t("grdPrice.clmVatExt"),dataType:"number",format:{style:"currency",currency:"EUR",precision:2},allowEditing:!1}),u.createElement(_.sg,{dataField:"PRICE",caption:this.t("grdPrice.clmPrice"),dataType:"number",format:{style:"currency",currency:"EUR",precision:2}}),u.createElement(_.sg,{dataField:"GROSS_MARGIN",caption:this.t("grdPrice.clmGrossMargin"),dataType:"string",allowEditing:!1}),u.createElement(_.sg,{dataField:"NET_MARGIN",caption:this.t("grdPrice.clmNetMargin"),dataType:"string",format:{style:"currency",currency:"EUR",precision:2},allowEditing:!1}))))),u.createElement(P.Item,{title:this.t("tabTitleUnit")},u.createElement("div",{className:"row px-2 py-2"},u.createElement("div",{className:"col-2"},u.createElement(M.ZP,{id:"txtUnderUnitFiyat",parent:this,title:this.t("underUnitPrice"),titleAlign:"top"})),u.createElement("div",{className:"col-10"},u.createElement(I(),null,u.createElement(P.Item,{location:"after"},u.createElement(R.Button,{icon:"add",onClick:function(){a.cmbPopUnitType.value="2",a.cmbPopUnitName.value="001",a.txtPopUnitFactor.value="0",a.txtPopUnitWeight.value="0",a.txtPopUnitVolume.value="0",a.txtPopUnitWidth.value="0",a.txtPopUnitHeight.value="0",a.txtPopUnitSize.value="0",a.popUnit.show()}}))))),u.createElement("div",{className:"row px-2 py-2"},u.createElement("div",{className:"col-12"},u.createElement(_.ZP,{parent:this,id:"grdUnit",showBorders:!0,columnsAutoWidth:!0,allowColumnReordering:!0,allowColumnResizing:!0,height:"100%",width:"100%",dbApply:!1},u.createElement(_.Po,{defaultPageSize:5}),u.createElement(_.LO,{mode:"cell",allowUpdating:!0,allowDeleting:!0}),u.createElement(_.sg,{dataField:"TYPE_NAME",caption:this.t("grdUnit.clmType"),width:250,allowEditing:!1}),u.createElement(_.sg,{dataField:"NAME",caption:this.t("grdUnit.clmName"),allowEditing:!1}),u.createElement(_.sg,{dataField:"FACTOR",caption:this.t("grdUnit.clmFactor")}),u.createElement(_.sg,{dataField:"WEIGHT",caption:this.t("grdUnit.clmWeight")}),u.createElement(_.sg,{dataField:"VOLUME",caption:this.t("grdUnit.clmVolume")}),u.createElement(_.sg,{dataField:"WIDTH",caption:this.t("grdUnit.clmWidth")}),u.createElement(_.sg,{dataField:"HEIGHT",caption:this.t("grdUnit.clmHeight")}),u.createElement(_.sg,{dataField:"SIZE",caption:this.t("grdUnit.clmSize")}))))),u.createElement(P.Item,{title:this.t("tabTitleBarcode")},u.createElement("div",{className:"row px-2 py-2"},u.createElement("div",{className:"col-12"},u.createElement(I(),null,u.createElement(P.Item,{location:"after"},u.createElement(R.Button,{icon:"add",onClick:(0,r.Z)(E().mark((function t(){return E().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,a.cmbPopBarUnit.dataRefresh({source:a.itemsObj.dt("ITEM_UNIT").where({TYPE:0})});case 2:a.txtPopBarcode.value="",a.cmbPopBarType.value="0",a.cmbPopBarUnit.value=a.itemsObj.dt("ITEM_UNIT").where({TYPE:0}).length>0?a.itemsObj.dt("ITEM_UNIT").where({TYPE:0})[0].GUID:"",a.popBarcode.show(),setTimeout((0,r.Z)(E().mark((function t(){return E().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:a.txtPopBarcode.focus();case 1:case"end":return t.stop()}}),t)}))),600);case 7:case"end":return t.stop()}}),t)})))}))))),u.createElement("div",{className:"row px-2 py-2"},u.createElement("div",{className:"col-12"},u.createElement(_.ZP,{parent:this,id:"grdBarcode",showBorders:!0,columnsAutoWidth:!0,allowColumnReordering:!0,allowColumnResizing:!0,height:"100%",width:"100%",dbApply:!1},u.createElement(_.Po,{defaultPageSize:5}),u.createElement(_.LO,{mode:"cell",allowUpdating:!0,allowDeleting:!0}),u.createElement(_.sg,{dataField:"BARCODE",caption:this.t("grdBarcode.clmBarcode"),allowEditing:!1}),u.createElement(_.sg,{dataField:"UNIT_NAME",caption:this.t("grdBarcode.clmUnit"),allowEditing:!1}),u.createElement(_.sg,{dataField:"TYPE_NAME",caption:this.t("grdBarcode.clmType"),allowEditing:!1}))))),u.createElement(P.Item,{title:this.t("tabTitleCustomer")},u.createElement("div",{className:"row px-2 py-2"},u.createElement("div",{className:"col-2"},u.createElement(M.ZP,{id:"txtMinAlisFiyat",parent:this,title:this.t("minBuyPrice"),titleAlign:"top"})),u.createElement("div",{className:"col-2"},u.createElement(M.ZP,{id:"txtMaxAlisFiyat",parent:this,title:this.t("maxBuyPrice"),titleAlign:"top"})),u.createElement("div",{className:"col-8"},u.createElement(I(),null,u.createElement(P.Item,{location:"after"},u.createElement(R.Button,{icon:"add",onClick:function(){a.txtPopCustomerItemCode.value="",a.txtPopCustomerPrice.value=0,a.popCustomer.show(),setTimeout((0,r.Z)(E().mark((function t(){return E().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:a.txtPopCustomerCode.focus();case 1:case"end":return t.stop()}}),t)}))),600)}}))))),u.createElement("div",{className:"row px-2 py-2"},u.createElement("div",{className:"col-12"},u.createElement(_.ZP,{parent:this,id:"grdCustomer",showBorders:!0,columnsAutoWidth:!0,allowColumnReordering:!0,allowColumnResizing:!0,height:"100%",width:"100%",dbApply:!1,selection:{mode:"single"},onRowUpdating:function(){var t=(0,r.Z)(E().mark((function t(e){var i,r,n,s,l,c;return E().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(a.btnSave.setState({disabled:!1}),void 0===e.newData.CUSTOMER_PRICE){t.next=19;break}if(i=a.itemsObj.itemPrice.dt().where({START_DATE:new Date("1970-01-01").toISOString()}).where({FINISH_DATE:new Date("1970-01-01").toISOString()}).where({TYPE:0}).where({QUANTITY:1}),!(a.prmObj.filter({ID:"SalePriceToCustomerPriceCtrl"}).getValue()&&i.length>0&&e.newData.CUSTOMER_PRICE>=i[0].PRICE)){t.next=11;break}return e.cancel=!0,e.component.cancelEditData(),r={id:"msgSalePriceToCustomerPrice",showTitle:!0,title:a.t("msgSalePriceToCustomerPrice.title"),showCloseButton:!0,width:"500px",height:"200px",button:[{id:"btn01",caption:a.t("msgSalePriceToCustomerPrice.btn01"),location:"after"}],content:u.createElement("div",{style:{textAlign:"center",fontSize:"20px"}},a.t("msgSalePriceToCustomerPrice.msg"))},t.next=9,(0,B.W)(r);case 9:t.next=19;break;case 11:a.txtCostPrice.value=e.newData.CUSTOMER_PRICE,n=a.prmObj.filter({ID:"ItemMinPricePercent"}).getValue(),s=e.newData.CUSTOMER_PRICE+e.newData.CUSTOMER_PRICE*n/100,a.txtMinSalePrice.value=Number(s.toFixed(2)),l=a.prmObj.filter({ID:"ItemMaxPricePercent"}).getValue(),c=e.newData.CUSTOMER_PRICE+e.newData.CUSTOMER_PRICE*l/100,a.txtMaxSalePrice.value=Number(c.toFixed(2)),a.taxSugarValidCheck();case 19:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()},u.createElement(_.Po,{defaultPageSize:5}),u.createElement(_.LO,{mode:"cell",allowUpdating:!0,allowDeleting:!0}),u.createElement(_.sg,{dataField:"CUSTOMER_CODE",caption:this.t("grdCustomer.clmCode"),allowEditing:!1}),u.createElement(_.sg,{dataField:"CUSTOMER_NAME",caption:this.t("grdCustomer.clmName"),allowEditing:!1}),u.createElement(_.sg,{dataField:"LUSER_NAME",caption:this.t("grdCustomer.clmPriceUserName"),allowEditing:!1}),u.createElement(_.sg,{dataField:"CUSTOMER_PRICE_DATE",caption:this.t("grdCustomer.clmPriceDate"),editCellRender:this._cellRoleRender}),u.createElement(_.sg,{dataField:"CUSTOMER_PRICE",caption:this.t("grdCustomer.clmPrice"),dataType:"number",format:"€#,##0.000"}),u.createElement(_.sg,{dataField:"MULTICODE",caption:this.t("grdCustomer.clmMulticode")})))),u.createElement("div",{className:"row px-2 py-2"},u.createElement("div",{className:"col-12"},u.createElement(_.ZP,{parent:this,id:"grdOtherShop",showBorders:!0,columnsAutoWidth:!0,allowColumnReordering:!0,allowColumnResizing:!0,height:"100%",width:"100%"},u.createElement(_.Po,{defaultPageSize:5}),u.createElement(_.LO,{mode:"cell",allowUpdating:!1,allowDeleting:!1}),u.createElement(_.sg,{dataField:"NAME",caption:this.t("grdOtherShop.clmName"),width:247}),u.createElement(_.sg,{dataField:"CUSTOMER",caption:this.t("grdOtherShop.clmCustomer"),width:247}),u.createElement(_.sg,{dataField:"SHOP",caption:this.t("grdOtherShop.clmShop"),width:247}),u.createElement(_.sg,{dataField:"DATE",caption:this.t("grdOtherShop.clmDate"),width:247}),u.createElement(_.sg,{dataField:"CUSTOMER_PRICE",caption:this.t("grdOtherShop.clmCustomerPrice"),allowEditing:!1,dataType:"number",format:{style:"currency",currency:"EUR",precision:2},width:247}),u.createElement(_.sg,{dataField:"SALE_PRICE",caption:this.t("grdOtherShop.clmPrice"),allowEditing:!1,dataType:"number",format:{style:"currency",currency:"EUR",precision:2},width:247}),u.createElement(_.sg,{dataField:"MULTICODE",caption:this.t("grdOtherShop.clmMulticode")}))))),u.createElement(P.Item,{title:this.t("tabTitleCustomerPrice")},u.createElement("div",{className:"row px-2 py-2"},u.createElement("div",{className:"col-12"},u.createElement(_.ZP,{parent:this,id:"grdCustomerPrice",showBorders:!0,columnsAutoWidth:!0,allowColumnReordering:!0,allowColumnResizing:!0,height:"100%",width:"100%"},u.createElement(_.Po,{defaultPageSize:5}),u.createElement(_.LO,{mode:"cell",allowUpdating:!1}),u.createElement(_.sg,{dataField:"CUSER_NAME",caption:this.t("grdCustomerPrice.clmUser")}),u.createElement(_.sg,{dataField:"CUSTOMER_CODE",caption:this.t("grdCustomerPrice.clmCode")}),u.createElement(_.sg,{dataField:"CUSTOMER_NAME",caption:this.t("grdCustomerPrice.clmName")}),u.createElement(_.sg,{dataField:"CHANGE_DATE",caption:this.t("grdCustomerPrice.clmDate"),allowEditing:!1,dataType:"datetime",format:"dd/MM/yyyy - HH:mm:ss"}),u.createElement(_.sg,{dataField:"PRICE",caption:this.t("grdCustomerPrice.clmPrice"),allowEditing:!1,dataType:"number",format:{style:"currency",currency:"EUR",precision:2}}),u.createElement(_.sg,{dataField:"MULTICODE",caption:this.t("grdCustomerPrice.clmMulticode")}))))),u.createElement(P.Item,{title:this.t("tabTitleSalesPriceHistory")},u.createElement("div",{className:"row px-2 py-2"},u.createElement("div",{className:"col-12"},u.createElement(_.ZP,{parent:this,id:"grdSalesPrice",showBorders:!0,columnsAutoWidth:!0,allowColumnReordering:!0,allowColumnResizing:!0,height:"100%",width:"100%"},u.createElement(_.Po,{defaultPageSize:5}),u.createElement(_.LO,{mode:"cell",allowUpdating:!1}),u.createElement(_.sg,{dataField:"CUSER_NAME",caption:this.t("grdSalesPrice.clmUser")}),u.createElement(_.sg,{dataField:"CHANGE_DATE",caption:this.t("grdSalesPrice.clmDate"),allowEditing:!1,dataType:"datetime",format:"dd/MM/yyyy - HH:mm:ss"}),u.createElement(_.sg,{dataField:"PRICE",caption:this.t("grdSalesPrice.clmPrice"),allowEditing:!1,dataType:"number",format:{style:"currency",currency:"EUR",precision:2}}))))),u.createElement(P.Item,{title:this.t("tabTitleSalesContract")},u.createElement("div",{className:"row px-2 py-2"},u.createElement("div",{className:"col-12"},u.createElement(_.ZP,{parent:this,id:"grdSalesContract",showBorders:!0,columnsAutoWidth:!0,allowColumnReordering:!0,allowColumnResizing:!0,height:"100%",width:"100%"},u.createElement(_.Po,{defaultPageSize:5}),u.createElement(_.LO,{mode:"cell",allowUpdating:!1,allowDeleting:!1}),u.createElement(_.sg,{dataField:"CUSER_NAME",caption:this.t("grdSalesContract.clmUser")}),u.createElement(_.sg,{dataField:"CUSTOMER_CODE",caption:this.t("grdSalesContract.clmCode")}),u.createElement(_.sg,{dataField:"CUSTOMER_NAME",caption:this.t("grdSalesContract.clmName")}),u.createElement(_.sg,{dataField:"PRICE",caption:this.t("grdSalesContract.clmPrice"),allowEditing:!1,dataType:"number",format:{style:"currency",currency:"EUR",precision:2}}))))),u.createElement(P.Item,{title:this.t("tabExtraCost")},u.createElement("div",{className:"row px-2 py-2"},u.createElement("div",{className:"col-12"},u.createElement(_.ZP,{parent:this,id:"grdExtraCost",showBorders:!0,columnsAutoWidth:!0,allowColumnReordering:!0,allowColumnResizing:!0,height:"100%",width:"100%",dbApply:!1},u.createElement(_.Po,{defaultPageSize:5}),u.createElement(_.LO,{mode:"cell",allowUpdating:!1,allowDeleting:!1}),u.createElement(_.sg,{dataField:"CUSTOMER",caption:this.t("grdExtraCost.clmCustomer")}),u.createElement(_.sg,{dataField:"TYPE_NAME",caption:this.t("grdExtraCost.clmTypeName")}),u.createElement(_.sg,{dataField:"DESCRIPTION",caption:this.t("grdExtraCost.clmDescription")}),u.createElement(_.sg,{dataField:"CUSTOMER_PRICE",caption:this.t("grdExtraCost.clmCustomerPrice"),format:"#,##0.000 €"}),u.createElement(_.sg,{dataField:"PRICE",caption:this.t("grdExtraCost.clmPrice"),format:"#,##0.000 €"}))))),u.createElement(P.Item,{title:this.t("tabTitleInfo")},u.createElement("div",{className:"row px-2 py-2"},u.createElement("div",{className:"col-12"},u.createElement(_.ZP,{parent:this,id:"grdItemInfo",showBorders:!0,columnsAutoWidth:!0,allowColumnReordering:!0,allowColumnResizing:!0,height:"100%",width:"100%",dbApply:!1},u.createElement(_.Po,{defaultPageSize:5}),u.createElement(_.LO,{mode:"cell",allowUpdating:!1,allowDeleting:!1}),u.createElement(_.sg,{dataField:"CDATE",caption:this.t("grdItemInfo.cDate"),dataType:"datetime",format:"dd/MM/yyyy - HH:mm:ssZ"}),u.createElement(_.sg,{dataField:"CUSER_NAME",caption:this.t("grdItemInfo.cUser")}),u.createElement(_.sg,{dataField:"LDATE",caption:this.t("grdItemInfo.lDate"),dataType:"datetime",format:"dd/MM/yyyy - HH:mm:ssZ"}),u.createElement(_.sg,{dataField:"LUSER_NAME",caption:this.t("grdItemInfo.lUser")}))))),u.createElement(P.Item,{title:this.t("tabTitleOtherShop")},u.createElement("div",{className:"row px-2 py-2"},u.createElement("div",{className:"col-2"},u.createElement(v.ZP,{id:"txtTabCostPrice",parent:this,title:this.t("txtCostPrice"),titleAlign:"top",tabIndex:this.tabIndex,dt:{data:this.itemsObj.dt("ITEMS"),field:"COST_PRICE"},readOnly:!0,format:"#,##0.000",step:.1})),u.createElement("div",{className:"col-2"},u.createElement(v.ZP,{id:"txtSalePrice",parent:this,title:this.t("txtSalePrice"),titleAlign:"top",tabIndex:this.tabIndex,format:"#,##0.000",readOnly:!0}))),u.createElement("div",{className:"row px-2 py-2"},u.createElement("div",{className:"col-12"},u.createElement(_.ZP,{parent:this,id:"grdOtherShop",showBorders:!0,columnsAutoWidth:!0,allowColumnReordering:!0,allowColumnResizing:!0,height:"100%",width:"100%"},u.createElement(_.Po,{defaultPageSize:5}),u.createElement(_.LO,{mode:"cell",allowUpdating:!1,allowDeleting:!1}),u.createElement(_.sg,{dataField:"DATE",caption:this.t("grdOtherShop.clmDate")}),u.createElement(_.sg,{dataField:"CUSTOMER_PRICE",caption:this.t("grdOtherShop.clmCustomerPrice"),allowEditing:!1,dataType:"number",format:{style:"currency",currency:"EUR",precision:2}}),u.createElement(_.sg,{dataField:"SALE_PRICE",caption:this.t("grdOtherShop.clmPrice"),allowEditing:!1,dataType:"number",format:{style:"currency",currency:"EUR",precision:2}}),u.createElement(_.sg,{dataField:"MULTICODE",caption:this.t("grdOtherShop.clmMulticode")}),u.createElement(_.sg,{dataField:"CUSTOMER",caption:this.t("grdOtherShop.clmCustomer")}),u.createElement(_.sg,{dataField:"NAME",caption:this.t("grdOtherShop.clmName"),width:250}),u.createElement(_.sg,{dataField:"CODE",caption:this.t("grdOtherShop.clmCode")}),u.createElement(_.sg,{dataField:"BARCODE",caption:this.t("grdOtherShop.clmBarcode")}),u.createElement(_.sg,{dataField:"SHOP",caption:this.t("grdOtherShop.clmShop")})))))))),u.createElement("div",null,u.createElement(w.ZP,{parent:this,id:"popPrice",visible:!1,showCloseButton:!0,showTitle:!0,title:this.t("popPrice.title"),container:"#root",width:"500",height:"320",position:{of:"#root"}},u.createElement(S(),{colCount:1,height:"fit-content",id:"frmPrice"+this.tabIndex},u.createElement(P.Item,null,u.createElement(P.Label,{text:this.t("popPrice.dtPopPriStartDate"),alignment:"right"}),u.createElement(L.ZP,{simple:!0,parent:this,id:"dtPopPriStartDate"})),u.createElement(P.Item,null,u.createElement(P.Label,{text:this.t("popPrice.dtPopPriEndDate"),alignment:"right"}),u.createElement(L.ZP,{simple:!0,parent:this,id:"dtPopPriEndDate"})),u.createElement(P.Item,null,u.createElement(P.Label,{text:this.t("popPrice.txtPopPriQuantity"),alignment:"right"}),u.createElement(v.ZP,{id:"txtPopPriQuantity",parent:this,simple:!0},u.createElement(M.cX,{validationGroup:"frmPrice"+this.tabIndex},u.createElement(M.n2,{message:"Miktar'ı boş geçemezsiniz !"})))),u.createElement(P.Item,null,u.createElement(P.Label,{text:this.t("popPrice.txtPopPriPrice"),alignment:"right"}),u.createElement(v.ZP,{id:"txtPopPriPrice",parent:this,simple:!0},u.createElement(M.cX,{validationGroup:"frmPrice"+this.tabIndex},u.createElement(M.n2,{message:"Fiyat'ı boş geçemezsiniz !"}),u.createElement(M.Qh,{min:.001,message:"Fiyat sıfırdan küçük olamaz !"})))),u.createElement(P.Item,null,u.createElement("div",{className:"row"},u.createElement("div",{className:"col-6"},u.createElement(y.Z,{text:this.lang.t("btnSave"),type:"normal",stylingMode:"contained",width:"100%",validationGroup:"frmPrice"+this.tabIndex,onClick:function(){var t=(0,r.Z)(E().mark((function t(e){var i,r,n,s;return E().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if("valid"!=e.validationGroup.validate().status){t.next=28;break}if(!(a.itemsObj.itemPrice.dt("ITEM_PRICE").where({START_DATE:new Date(g()(a.dtPopPriStartDate.value).format("YYYY-MM-DD")).toISOString()}).where({FINISH_DATE:new Date(g()(a.dtPopPriEndDate.value).format("YYYY-MM-DD")).toISOString()}).where({TYPE:0}).where({QUANTITY:a.txtPopPriQuantity.value}).length>0)){t.next=10;break}return i={id:"msgCheckPrice",showTitle:!0,title:a.t("msgCheckPrice.title"),showCloseButton:!0,width:"500px",height:"200px",button:[{id:"btn01",caption:a.t("msgCheckPrice.btn01"),location:"after"}],content:u.createElement("div",{style:{textAlign:"center",fontSize:"20px"}},a.t("msgCheckPrice.msg"))},t.next=9,(0,B.W)(i);case 9:case 14:return t.abrupt("return");case 10:if(!(a.prmObj.filter({ID:"SalePriceCostCtrl"}).getValue()&&0!=a.txtCostPrice.value&&a.txtCostPrice.value>=a.txtPopPriPrice.value)){t.next=15;break}return r={id:"msgCostPriceValid",showTitle:!0,title:a.t("msgCostPriceValid.title"),showCloseButton:!0,width:"500px",height:"200px",button:[{id:"btn01",caption:a.t("msgCostPriceValid.btn01"),location:"after"}],content:u.createElement("div",{style:{textAlign:"center",fontSize:"20px"}},a.t("msgCostPriceValid.msg"))},t.next=14,(0,B.W)(r);case 15:(n=F({},a.itemsObj.itemPrice.empty)).TYPE=0,n.TYPE_NAME="Standart",n.ITEM_GUID=a.itemsObj.dt()[0].GUID,n.DEPOT="00000000-0000-0000-0000-000000000000",n.START_DATE=new Date(g()(a.dtPopPriStartDate.value).format("YYYY-MM-DD")).toISOString(),n.FINISH_DATE=new Date(g()(a.dtPopPriEndDate.value).format("YYYY-MM-DD")).toISOString(),n.PRICE=a.txtPopPriPrice.value,n.QUANTITY=a.txtPopPriQuantity.value,a.itemsObj.itemPrice.addEmpty(n),a.popPrice.hide(),t.next=31;break;case 28:return s={id:"msgPriceAdd",showTitle:!0,title:a.t("msgPriceAdd.title"),showCloseButton:!0,width:"500px",height:"200px",button:[{id:"btn01",caption:a.t("msgPriceAdd.btn01"),location:"after"}],content:u.createElement("div",{style:{textAlign:"center",fontSize:"20px"}},a.t("msgPriceAdd.msg"))},t.next=31,(0,B.W)(s);case 31:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()})),u.createElement("div",{className:"col-6"},u.createElement(y.Z,{text:this.lang.t("btnCancel"),type:"normal",stylingMode:"contained",width:"100%",onClick:function(){a.popPrice.hide()}}))))))),u.createElement("div",null,u.createElement(w.ZP,{parent:this,id:"popUnit",visible:!1,showCloseButton:!0,showTitle:!0,title:this.t("popUnit.title"),container:"#root",width:"500",height:"510",position:{of:"#root"}},u.createElement(S(),{colCount:1,height:"fit-content"},u.createElement(P.Item,null,u.createElement(P.Label,{text:this.t("popUnit.cmbPopUnitType"),alignment:"right"}),u.createElement(U.ZP,{simple:!0,parent:this,id:"cmbPopUnitType",displayExpr:"VALUE",valueExpr:"ID",value:"2",data:{source:[{ID:"2",VALUE:"Üst Birim"}]}})),u.createElement(P.Item,null,u.createElement(P.Label,{text:this.t("popUnit.cmbPopUnitName"),alignment:"right"}),u.createElement(U.ZP,{simple:!0,parent:this,id:"cmbPopUnitName",displayExpr:"NAME",valueExpr:"ID",value:"001",data:{source:{select:{query:"SELECT ID,NAME,SYMBOL FROM UNIT ORDER BY ID ASC"},sql:this.core.sql}}})),u.createElement(P.Item,null,u.createElement(P.Label,{text:this.t("popUnit.txtPopUnitFactor"),alignment:"right"}),u.createElement(M.ZP,{id:"txtPopUnitFactor",parent:this,simple:!0})),u.createElement(P.Item,null,u.createElement(P.Label,{text:this.t("popUnit.txtPopUnitWeight"),alignment:"right"}),u.createElement(M.ZP,{id:"txtPopUnitWeight",parent:this,simple:!0})),u.createElement(P.Item,null,u.createElement(P.Label,{text:this.t("popUnit.txtPopUnitVolume"),alignment:"right"}),u.createElement(M.ZP,{id:"txtPopUnitVolume",parent:this,simple:!0})),u.createElement(P.Item,null,u.createElement(P.Label,{text:this.t("popUnit.txtPopUnitWidth"),alignment:"right"}),u.createElement(M.ZP,{id:"txtPopUnitWidth",parent:this,simple:!0})),u.createElement(P.Item,null,u.createElement(P.Label,{text:this.t("popUnit.txtPopUnitHeight"),alignment:"right"}),u.createElement(M.ZP,{id:"txtPopUnitHeight",parent:this,simple:!0})),u.createElement(P.Item,null,u.createElement(P.Label,{text:this.t("popUnit.txtPopUnitSize"),alignment:"right"}),u.createElement(M.ZP,{id:"txtPopUnitSize",parent:this,simple:!0})),u.createElement(P.Item,null,u.createElement("div",{className:"row"},u.createElement("div",{className:"col-6"},u.createElement(y.Z,{text:this.lang.t("btnSave"),type:"normal",stylingMode:"contained",width:"100%",onClick:(0,r.Z)(E().mark((function t(){var e;return E().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:(e=F({},a.itemsObj.itemUnit.empty)).TYPE=a.cmbPopUnitType.value,e.TYPE_NAME=a.cmbPopUnitType.displayValue,e.ID=a.cmbPopUnitName.value,e.NAME=a.cmbPopUnitName.displayValue,e.FACTOR=a.txtPopUnitFactor.value,e.WEIGHT=a.txtPopUnitWeight.value,e.VOLUME=a.txtPopUnitVolume.value,e.WIDTH=a.txtPopUnitWidth.value,e.HEIGHT=a.txtPopUnitHeight.value,e.SIZE=a.txtPopUnitSize.value,e.ITEM_GUID=a.itemsObj.dt()[0].GUID,a.itemsObj.itemUnit.addEmpty(e),a.popUnit.hide();case 14:case"end":return t.stop()}}),t)})))})),u.createElement("div",{className:"col-6"},u.createElement(y.Z,{text:this.lang.t("btnCancel"),type:"normal",stylingMode:"contained",width:"100%",onClick:function(){a.popUnit.hide()}}))))))),u.createElement("div",null,u.createElement(w.ZP,{parent:this,id:"popBarcode",visible:!1,showCloseButton:!0,showTitle:!0,title:this.t("popBarcode.title"),container:"#root",width:"500",height:"275",position:{of:"#root"}},u.createElement(S(),{colCount:1,height:"fit-content"},u.createElement(P.Item,null,u.createElement(P.Label,{text:this.t("popBarcode.txtPopBarcode"),alignment:"right"}),u.createElement(M.ZP,{id:"txtPopBarcode",parent:this,simple:!0,upper:this.sysParam.filter({ID:"onlyBigChar",USERS:this.user.CODE}).getValue().value,onEnterKey:(0,r.Z)(E().mark((function t(){var e,i,r;return E().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return e=F({},a.itemsObj.itemBarcode.empty),i=!0,void 0!==a.itemsObj.itemBarcode.dt().find((function(t){return""==t.BARCODE}))&&(i=!1,e=a.itemsObj.itemBarcode.dt().find((function(t){return""==t.BARCODE}))),e.BARCODE=a.txtPopBarcode.value,e.TYPE=a.cmbPopBarType.value,e.UNIT_GUID=a.cmbPopBarUnit.value,e.UNIT_NAME=a.cmbPopBarUnit.displayValue,e.ITEM_GUID=a.itemsObj.dt()[0].GUID,t.next=10,a.checkBarcode(a.txtPopBarcode.value);case 10:2==(r=t.sent)?a.popBarcode.hide():1==r&&(i&&a.itemsObj.itemBarcode.addEmpty(e),a.popBarcode.hide());case 12:case"end":return t.stop()}}),t)}))),onValueChanged:function(t){NaN!=parseInt(t.value)&&parseInt(t.value).toString()==t.value?8==t.value.length?a.cmbPopBarType.value="0":13==t.value.length?a.cmbPopBarType.value="1":a.cmbPopBarType.value="2":a.cmbPopBarType.value="2"}})),u.createElement(P.Item,null,u.createElement(P.Label,{text:this.t("popBarcode.cmbPopBarUnit"),alignment:"right"}),u.createElement(U.ZP,{simple:!0,parent:this,id:"cmbPopBarUnit",displayExpr:"NAME",valueExpr:"GUID"})),u.createElement(P.Item,null,u.createElement(P.Label,{text:this.t("popBarcode.cmbPopBarType"),alignment:"right"}),u.createElement(U.ZP,{simple:!0,parent:this,id:"cmbPopBarType",displayExpr:"VALUE",valueExpr:"ID",value:"0",data:{source:[{ID:"0",VALUE:"EAN8"},{ID:"1",VALUE:"EAN13"},{ID:"2",VALUE:"CODE39"}]}})),u.createElement(P.Item,null,u.createElement("div",{className:"row"},u.createElement("div",{className:"col-6"},u.createElement(y.Z,{text:this.lang.t("btnSave"),type:"normal",stylingMode:"contained",width:"100%",onClick:(0,r.Z)(E().mark((function t(){var e,i,r;return E().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return e=F({},a.itemsObj.itemBarcode.empty),i=!0,void 0!==a.itemsObj.itemBarcode.dt().find((function(t){return""==t.BARCODE}))&&(i=!1,e=a.itemsObj.itemBarcode.dt().find((function(t){return""==t.BARCODE}))),e.BARCODE=a.txtPopBarcode.value,e.TYPE=a.cmbPopBarType.value,e.UNIT_GUID=a.cmbPopBarUnit.value,e.UNIT_NAME=a.cmbPopBarUnit.displayValue,e.ITEM_GUID=a.itemsObj.dt()[0].GUID,t.next=10,a.checkBarcode(a.txtPopBarcode.value);case 10:2==(r=t.sent)?a.popBarcode.hide():1==r&&(i&&a.itemsObj.itemBarcode.addEmpty(e),a.popBarcode.hide());case 12:case"end":return t.stop()}}),t)})))})),u.createElement("div",{className:"col-6"},u.createElement(y.Z,{text:this.lang.t("btnCancel"),type:"normal",stylingMode:"contained",width:"100%",onClick:function(){a.popBarcode.hide()}}))))))),u.createElement("div",null,u.createElement(w.ZP,{parent:this,id:"popCustomer",visible:!1,showCloseButton:!0,showTitle:!0,title:this.t("popCustomer.title"),container:"#root",width:"500",height:"320",position:{of:"#root"}},u.createElement(S(),{colCount:1,height:"fit-content",id:"frmItemCustomer"+ +this.tabIndex},u.createElement(P.Item,null,u.createElement(P.Label,{text:this.t("popCustomer.txtPopCustomerCode"),alignment:"right"}),u.createElement(M.ZP,{id:"txtPopCustomerCode",parent:this,simple:!0,upper:this.sysParam.filter({ID:"onlyBigChar",USERS:this.user.CODE}).getValue().value,onEnterKey:function(){var t=(0,r.Z)(E().mark((function t(e){return E().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,a.pg_txtPopCustomerCode.setVal(a.txtPopCustomerCode.value);case 2:a.pg_txtPopCustomerCode.show(),a.pg_txtPopCustomerCode.onClick=function(t){t.length>0&&(a.txtPopCustomerCode.GUID=t[0].GUID,a.txtPopCustomerCode.value=t[0].CODE,a.txtPopCustomerName.value=t[0].TITLE)};case 4:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}().bind(this),button:[{id:"01",icon:"more",onClick:function(){a.pg_txtPopCustomerCode.show(),a.pg_txtPopCustomerCode.onClick=function(t){t.length>0&&(a.txtPopCustomerCode.GUID=t[0].GUID,a.txtPopCustomerCode.value=t[0].CODE,a.txtPopCustomerName.value=t[0].TITLE)}}},{id:"02",icon:"add",onClick:function(){}}]}),u.createElement(N.Z,{id:"pg_txtPopCustomerCode",parent:this,container:".dx-multiview-wrapper",position:{of:"#page"},showTitle:!0,showBorders:!0,width:"90%",height:"90%",title:this.t("pg_txtPopCustomerCode.title"),columnAutoWidth:!0,allowColumnResizing:!0,search:!0,data:{source:{select:{query:"SELECT GUID,CODE,TITLE FROM CUSTOMER_VW_01 WHERE GENUS IN(1,2) AND (UPPER(CODE) LIKE UPPER(@VAL) OR UPPER(TITLE) LIKE UPPER(@VAL))",param:["VAL:string|50"]},sql:this.core.sql}}},u.createElement(_.PY,{mode:"standart"}),u.createElement(_.sg,{dataField:"TITLE",caption:this.t("pg_txtPopCustomerCode.clmName"),width:650,defaultSortOrder:"asc"}),u.createElement(_.sg,{dataField:"CODE",caption:this.t("pg_txtPopCustomerCode.clmCode"),width:150}))),u.createElement(P.Item,null,u.createElement(P.Label,{text:this.t("popCustomer.txtPopCustomerName"),alignment:"right"}),u.createElement(M.ZP,{id:"txtPopCustomerName",parent:this,simple:!0,readOnly:!0,upper:this.sysParam.filter({ID:"onlyBigChar",USERS:this.user.CODE}).getValue().value},u.createElement(M.cX,{validationGroup:"frmItemCustomer"+this.tabIndex},u.createElement(M.n2,{message:"Tedarikci Kodu Giriniz !"})))),u.createElement(P.Item,null,u.createElement(P.Label,{text:this.t("popCustomer.txtPopCustomerItemCode"),alignment:"right"}),u.createElement(M.ZP,{id:"txtPopCustomerItemCode",parent:this,simple:!0,upper:this.sysParam.filter({ID:"onlyBigChar",USERS:this.user.CODE}).getValue().value},u.createElement(M.cX,{validationGroup:"frmItemCustomer"+this.tabIndex},u.createElement(M.n2,{message:"Tedarikci Kodu Giriniz !"})))),u.createElement(P.Item,null,u.createElement(P.Label,{text:this.t("popCustomer.txtPopCustomerPrice"),alignment:"right"}),u.createElement(v.ZP,{id:"txtPopCustomerPrice",parent:this,simple:!0},u.createElement(M.cX,{validationGroup:"frmItemCustomer"+this.tabIndex},u.createElement(M.n2,{message:"Fiyat'ı boş geçemezsiniz !"}),u.createElement(M.Qh,{min:.001,message:"Fiyat sıfırdan küçük olamaz !"})))),u.createElement(P.Item,null,u.createElement("div",{className:"row"},u.createElement("div",{className:"col-6"},u.createElement(y.Z,{text:this.lang.t("btnSave"),type:"normal",stylingMode:"contained",width:"100%",validationGroup:"frmItemCustomer"+this.tabIndex,onClick:function(){var t=(0,r.Z)(E().mark((function t(e){var i,r,n,s,l,c,o;return E().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if("valid"!=e.validationGroup.validate().status){t.next=22;break}return(i=F({},a.itemsObj.itemMultiCode.empty)).CUSER=a.core.auth.data.CODE,i.ITEM_GUID=a.itemsObj.dt()[0].GUID,i.CUSTOMER_GUID=a.txtPopCustomerCode.GUID,i.CUSTOMER_CODE=a.txtPopCustomerCode.value,i.CUSTOMER_NAME=a.txtPopCustomerName.value,i.MULTICODE=a.txtPopCustomerItemCode.value,i.CUSTOMER_PRICE=a.txtPopCustomerPrice.value,i.CUSTOMER_PRICE_DATE=g()(new Date).format("DD/MM/YYYY HH:mm:ss"),t.next=11,a.checkMultiCode(a.txtPopCustomerItemCode.value,a.txtPopCustomerCode.value);case 11:2==(r=t.sent)?a.popCustomer.hide():1==r&&(a.txtCostPrice.value=a.txtPopCustomerPrice.value,a.itemsObj.itemMultiCode.addEmpty(i),a.popCustomer.hide()),n=a.prmObj.filter({ID:"ItemMinPricePercent"}).getValue(),s=a.txtPopCustomerPrice.value+a.txtPopCustomerPrice.value*n/100,a.txtMinSalePrice.value=Number(s.toFixed(2)),l=a.prmObj.filter({ID:"ItemMaxPricePercent"}).getValue(),c=a.txtPopCustomerPrice.value+a.txtPopCustomerPrice.value*l/100,a.txtMaxSalePrice.value=Number(c.toFixed(2)),a.taxSugarValidCheck(),t.next=25;break;case 22:return o={id:"msgPriceAdd",showTitle:!0,title:a.t("msgPriceAdd.title"),showCloseButton:!0,width:"500px",height:"200px",button:[{id:"btn01",caption:a.t("msgPriceAdd.btn01"),location:"after"}],content:u.createElement("div",{style:{textAlign:"center",fontSize:"20px"}},a.t("msgPriceAdd.msg"))},t.next=25,(0,B.W)(o);case 25:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()})),u.createElement("div",{className:"col-6"},u.createElement(y.Z,{text:this.lang.t("btnCancel"),type:"normal",stylingMode:"contained",width:"100%",onClick:function(){a.popCustomer.hide()}}))))))),u.createElement("div",null,u.createElement(w.ZP,{parent:this,id:"popAnalysis",visible:!1,showCloseButton:!0,showTitle:!0,title:this.t("popAnalysis.title"),container:"#root",width:"700",height:"600",position:{of:"#root"}},u.createElement(S(),{colCount:3,height:"fit-content"},u.createElement(P.Item,null,u.createElement(P.Label,{text:this.t("dtFirstAnalysis"),alignment:"right"}),u.createElement(L.ZP,{simple:!0,parent:this,id:"dtFirstAnalysis"})),u.createElement(P.Item,null,u.createElement(P.Label,{text:this.t("dtLastAnalysis"),alignment:"right"}),u.createElement(L.ZP,{simple:!0,parent:this,id:"dtLastAnalysis"})),u.createElement(P.Item,null,u.createElement(y.Z,{id:"btnGet",parent:this,text:this.t("btnGet"),type:"default",width:"100%",onClick:(0,r.Z)(E().mark((function t(){var e,i;return E().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return e={query:"SELECT SUM(QUANTITY) AS QUANTITY,CONVERT(NVARCHAR,DOC_DATE,104) AS DOC_DATE FROM POS_SALE_VW_01 WHERE ITEM_CODE = @CODE AND DOC_DATE >= @FIRST_DATE AND DOC_DATE <= @LAST_DATE GROUP BY DOC_DATE,ITEM_CODE ",param:["CODE:string|50","FIRST_DATE:date","LAST_DATE:date"],value:[a.txtRef.value,a.dtFirstAnalysis.value,a.dtLastAnalysis.value]},t.next=3,a.core.sql.execute(e);case 3:(i=t.sent).result.recordset.length>0?a.setState({dataSource:i.result.recordset}):a.setState({dataRefresh:{0:{QUANTITY:0,DOC_DATE:""}}});case 5:case"end":return t.stop()}}),t)})))})),u.createElement(P.Item,{colSpan:3},u.createElement(D.Chart,{id:"chart",dataSource:this.state.dataSource},u.createElement(D.CommonSeriesSettings,{argumentField:"state",type:"bar",hoverMode:"allArgumentPoints",selectionMode:"allArgumentPoints"},u.createElement(P.Label,{visible:!0},u.createElement(D.Format,{type:"fixedPoint",precision:0}))),u.createElement(D.Series,{valueField:"QUANTITY",argumentField:"DOC_DATE",name:"Şatış",type:"bar",color:"#008000"}))))))))}}]),q}(u.PureComponent)}}]);